!function(){return function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){return r(t[o][1][e]||e)},c,c.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}}()({1:[function(e,t,n){(function(n,i){"use strict";t.exports=function(t,r){var s,o,a={},u={},l=!1,c=e("path");function p(e,t){var n;return e&&"."===e.charAt(0)&&t&&(function(e){var t,n;for(t=0;e[t];t+=1)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}(n=(n=(n=t.split("/")).slice(0,n.length-1)).concat(e.split("/"))),e=n.join("/")),e}function h(e,n,o){var a,c,p,h;if(e)c=u[e]={},a=s(r,c,p={id:e,uri:i,exports:c},e);else{if(l)throw new Error("amdefine with no module ID cannot be called more than once per file.");l=!0,c=t.exports,a=s(r,c,p=t,t.id)}n&&(n=n.map(function(e){return a(e)})),void 0!==(h="function"==typeof o?o.apply(p.exports,n):o)&&(p.exports=h,e&&(u[e]=p.exports))}function d(e,t,n){Array.isArray(e)?(n=t,t=e,e=void 0):"string"!=typeof e&&(n=e,e=t=void 0),t&&!Array.isArray(t)&&(n=t,t=void 0),t||(t=["require","exports","module"]),e?a[e]=[e,t,n]:h(e,t,n)}return s=function(e,t,i,r){function s(s,a){if("string"==typeof s)return o(e,t,i,s,r);s=s.map(function(n){return o(e,t,i,n,r)}),a&&n.nextTick(function(){a.apply(null,s)})}return s.toUrl=function(e){return 0===e.indexOf(".")?p(e,c.dirname(i.filename)):e},s},r=r||function(){return t.require.apply(t,arguments)},o=function(e,t,n,i,r){var l,c,d,f=i.indexOf("!"),g=i;if(-1===f){if("require"===(i=p(i,r)))return s(e,t,n,r);if("exports"===i)return t;if("module"===i)return n;if(u.hasOwnProperty(i))return u[i];if(a[i])return h.apply(null,a[i]),u[i];if(e)return e(g);throw new Error("No module with ID: "+i)}return l=i.substring(0,f),i=i.substring(f+1,i.length),i=(c=o(e,t,n,l,r)).normalize?c.normalize(i,(d=r,function(e){return p(e,d)})):p(i,r),u[i]?u[i]:(c.load(i,s(e,t,n,r),function(e){function t(t){u[e]=t}return t.fromText=function(e,t){throw new Error("amdefine does not implement load.fromText")},t}(i),{}),u[i])},d.require=function(e){return u[e]?u[e]:a[e]?(h.apply(null,a[e]),u[e]):void 0},d.amd={},d}}).call(this,e("_process"),"/node_modules/amdefine/amdefine.js")},{_process:33,path:32}],2:[function(e,t,n){},{}],3:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=i(e("./handlebars.runtime")),s=i(e("./handlebars/compiler/ast")),o=e("./handlebars/compiler/base"),a=e("./handlebars/compiler/compiler"),u=i(e("./handlebars/compiler/javascript-compiler")),l=i(e("./handlebars/compiler/visitor")),c=i(e("./handlebars/no-conflict")),p=r.default.create;function h(){var e=p();return e.compile=function(t,n){return a.compile(t,n,e)},e.precompile=function(t,n){return a.precompile(t,n,e)},e.AST=s.default,e.Compiler=a.Compiler,e.JavaScriptCompiler=u.default,e.Parser=o.parser,e.parse=o.parse,e}var d=h();d.create=h,c.default(d),d.Visitor=l.default,d.default=d,n.default=d,t.exports=n.default},{"./handlebars.runtime":4,"./handlebars/compiler/ast":6,"./handlebars/compiler/base":7,"./handlebars/compiler/compiler":9,"./handlebars/compiler/javascript-compiler":11,"./handlebars/compiler/visitor":14,"./handlebars/no-conflict":17}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n.__esModule=!0;var s=r(e("./handlebars/base")),o=i(e("./handlebars/safe-string")),a=i(e("./handlebars/exception")),u=r(e("./handlebars/utils")),l=r(e("./handlebars/runtime")),c=i(e("./handlebars/no-conflict"));function p(){var e=new s.HandlebarsEnvironment;return u.extend(e,s),e.SafeString=o.default,e.Exception=a.default,e.Utils=u,e.escapeExpression=u.escapeExpression,e.VM=l,e.template=function(t){return l.template(t,e)},e}var h=p();h.create=p,c.default(h),h.default=h,n.default=h,t.exports=n.default},{"./handlebars/base":5,"./handlebars/exception":16,"./handlebars/no-conflict":17,"./handlebars/runtime":18,"./handlebars/safe-string":19,"./handlebars/utils":20}],5:[function(e,t,n){"use strict";n.__esModule=!0,n.HandlebarsEnvironment=c,n.createFrame=d;var i,r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils")),s=e("./exception"),o=(i=s)&&i.__esModule?i:{default:i};n.VERSION="3.0.1";n.COMPILER_REVISION=6;n.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};var a=r.isArray,u=r.isFunction,l=r.toString;function c(e,t){var n;this.helpers=e||{},this.partials=t||{},(n=this).registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}),n.registerHelper("blockHelperMissing",function(e,t){var i=t.inverse,s=t.fn;if(!0===e)return s(this);if(!1===e||null==e)return i(this);if(a(e))return e.length>0?(t.ids&&(t.ids=[t.name]),n.helpers.each(e,t)):i(this);if(t.data&&t.ids){var o=d(t.data);o.contextPath=r.appendContextPath(t.data.contextPath,t.name),t={data:o}}return s(e,t)}),n.registerHelper("each",function(e,t){if(!t)throw new o.default("Must pass iterator to #each");var n=t.fn,i=t.inverse,s=0,l="",c=void 0,p=void 0;function h(t,i,s){c&&(c.key=t,c.index=i,c.first=0===i,c.last=!!s,p&&(c.contextPath=p+t)),l+=n(e[t],{data:c,blockParams:r.blockParams([e[t],t],[p+t,null])})}if(t.data&&t.ids&&(p=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),u(e)&&(e=e.call(this)),t.data&&(c=d(t.data)),e&&"object"==typeof e)if(a(e))for(var f=e.length;s<f;s++)h(s,s,s===e.length-1);else{var g=void 0;for(var m in e)e.hasOwnProperty(m)&&(g&&h(g,s-1),g=m,s++);g&&h(g,s-1,!0)}return 0===s&&(l=i(this)),l}),n.registerHelper("if",function(e,t){return u(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),n.registerHelper("unless",function(e,t){return n.helpers.if.call(this,e,{fn:t.inverse,inverse:t.fn,hash:t.hash})}),n.registerHelper("with",function(e,t){u(e)&&(e=e.call(this));var n=t.fn;if(r.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var i=d(t.data);i.contextPath=r.appendContextPath(t.data.contextPath,t.ids[0]),t={data:i}}return n(e,t)}),n.registerHelper("log",function(e,t){var i=t.data&&null!=t.data.level?parseInt(t.data.level,10):1;n.log(i,e)}),n.registerHelper("lookup",function(e,t){return e&&e[t]})}c.prototype={constructor:c,logger:p,log:h,registerHelper:function(e,t){if("[object Object]"===l.call(e)){if(t)throw new o.default("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===l.call(e))r.extend(this.partials,e);else{if(void 0===t)throw new o.default("Attempting to register a partial as undefined");this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(e,t){if("undefined"!=typeof console&&p.level<=e){var n=p.methodMap[e];(console[n]||console.log).call(console,t)}}};n.logger=p;var h=p.log;function d(e){var t=r.extend({},e);return t._parent=e,t}n.log=h},{"./exception":16,"./utils":20}],6:[function(e,t,n){"use strict";n.__esModule=!0;var i={Program:function(e,t,n,i){this.loc=i,this.type="Program",this.body=e,this.blockParams=t,this.strip=n},MustacheStatement:function(e,t,n,i,r,s){this.loc=s,this.type="MustacheStatement",this.path=e,this.params=t||[],this.hash=n,this.escaped=i,this.strip=r},BlockStatement:function(e,t,n,i,r,s,o,a,u){this.loc=u,this.type="BlockStatement",this.path=e,this.params=t||[],this.hash=n,this.program=i,this.inverse=r,this.openStrip=s,this.inverseStrip=o,this.closeStrip=a},PartialStatement:function(e,t,n,i,r){this.loc=r,this.type="PartialStatement",this.name=e,this.params=t||[],this.hash=n,this.indent="",this.strip=i},ContentStatement:function(e,t){this.loc=t,this.type="ContentStatement",this.original=this.value=e},CommentStatement:function(e,t,n){this.loc=n,this.type="CommentStatement",this.value=e,this.strip=t},SubExpression:function(e,t,n,i){this.loc=i,this.type="SubExpression",this.path=e,this.params=t||[],this.hash=n},PathExpression:function(e,t,n,i,r){this.loc=r,this.type="PathExpression",this.data=e,this.original=i,this.parts=n,this.depth=t},StringLiteral:function(e,t){this.loc=t,this.type="StringLiteral",this.original=this.value=e},NumberLiteral:function(e,t){this.loc=t,this.type="NumberLiteral",this.original=this.value=Number(e)},BooleanLiteral:function(e,t){this.loc=t,this.type="BooleanLiteral",this.original=this.value="true"===e},UndefinedLiteral:function(e){this.loc=e,this.type="UndefinedLiteral",this.original=this.value=void 0},NullLiteral:function(e){this.loc=e,this.type="NullLiteral",this.original=this.value=null},Hash:function(e,t){this.loc=t,this.type="Hash",this.pairs=e},HashPair:function(e,t,n){this.loc=n,this.type="HashPair",this.key=e,this.value=t},helpers:{helperExpression:function(e){return!("SubExpression"!==e.type&&!e.params.length&&!e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!i.helpers.scopedId(e)&&!e.depth}}};n.default=i,t.exports=n.default},{}],7:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.parse=function(e,t){if("Program"===e.type)return e;return r.default.yy=l,l.locInfo=function(e){return new l.SourceLocation(t&&t.srcName,e)},(new o.default).accept(r.default.parse(e))};var r=i(e("./parser")),s=i(e("./ast")),o=i(e("./whitespace-control")),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./helpers")),u=e("../utils");n.parser=r.default;var l={};u.extend(l,a,s.default)},{"../utils":20,"./ast":6,"./helpers":10,"./parser":12,"./whitespace-control":15}],8:[function(e,t,n){"use strict";n.__esModule=!0;var i=e("../utils"),r=void 0;try{if("function"!=typeof define||!define.amd){var s=e("source-map");r=s.SourceNode}}catch(e){}function o(e,t,n){if(i.isArray(e)){for(var r=[],s=0,o=e.length;s<o;s++)r.push(t.wrap(e[s],n));return r}return"boolean"==typeof e||"number"==typeof e?e+"":e}function a(e){this.srcFile=e,this.source=[]}r||((r=function(e,t,n,i){this.src="",i&&this.add(i)}).prototype={add:function(e){i.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){i.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),a.prototype={prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,n=this.source.length;t<n;t++)e(this.source[t])},empty:function(){var e=arguments.length<=0||void 0===arguments[0]?this.currentLocation||{start:{}}:arguments[0];return new r(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof r?e:(e=o(e,this,t),new r(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,n){return n=this.generateList(n),this.wrap([e,t?"."+t+"(":"(",n,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var i=o(e[n],this);"undefined"!==i&&t.push([this.quotedString(n),":",i])}var r=this.generateList(t);return r.prepend("{"),r.add("}"),r},generateList:function(e,t){for(var n=this.empty(t),i=0,r=e.length;i<r;i++)i&&n.add(","),n.add(o(e[i],this,t));return n},generateArray:function(e,t){var n=this.generateList(e,t);return n.prepend("["),n.add("]"),n}},n.default=a,t.exports=n.default},{"../utils":20,"source-map":22}],9:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.Compiler=u,n.precompile=function(e,t,n){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new r.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0);t.compat&&(t.useDepths=!0);var i=n.parse(e,t),s=(new n.Compiler).compile(i,t);return(new n.JavaScriptCompiler).compile(s,t)},n.compile=function(e,t,n){void 0===t&&(t={});if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new r.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in t||(t.data=!0);t.compat&&(t.useDepths=!0);var i=void 0;function s(){var i=n.parse(e,t),r=(new n.Compiler).compile(i,t),s=(new n.JavaScriptCompiler).compile(r,t,void 0,!0);return n.template(s)}function o(e,t){return i||(i=s()),i.call(this,e,t)}return o._setup=function(e){return i||(i=s()),i._setup(e)},o._child=function(e,t,n,r){return i||(i=s()),i._child(e,t,n,r)},o};var r=i(e("../exception")),s=e("../utils"),o=i(e("./ast")),a=[].slice;function u(){}function l(e,t){if(e===t)return!0;if(s.isArray(e)&&s.isArray(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!l(e[n],t[n]))return!1;return!0}}function c(e){if(!e.path.parts){var t=e.path;e.path=new o.default.PathExpression(!1,0,[t.original+""],t.original+"",t.loc)}}u.prototype={compiler:u,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var i=this.opcodes[n],r=e.opcodes[n];if(i.opcode!==r.opcode||!l(i.args,r.args))return!1}t=this.children.length;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[];var n=t.knownHelpers;if(t.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},n)for(var i in n)i in n&&(t.knownHelpers[i]=n[i]);return this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[n]=t,this.useDepths=this.useDepths||t.useDepths,n},accept:function(e){this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,n=t.length,i=0;i<n;i++)this.accept(t[i]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){c(e);var t=e.program,n=e.inverse;t=t&&this.compileProgram(t),n=n&&this.compileProgram(n);var i=this.classifySexpr(e);"helper"===i?this.helperSexpr(e,t,n):"simple"===i?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,n),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},PartialStatement:function(e){this.usePartial=!0;var t=e.params;if(t.length>1)throw new r.default("Unsupported number of partial arguments: "+t.length,e);t.length||t.push({type:"PathExpression",parts:[],depth:0});var n=e.name.original,i="SubExpression"===e.name.type;i&&this.accept(e.name),this.setupFullMustacheParams(e,void 0,void 0,!0);var s=e.indent||"";this.options.preventIndent&&s&&(this.opcode("appendContent",s),s=""),this.opcode("invokePartial",i,n,s),this.opcode("append")},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){c(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,n){var i=e.path,r=i.parts[0],s=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.accept(i),this.opcode("invokeAmbiguous",r,s)},simpleSexpr:function(e){this.accept(e.path),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),s=e.path,a=s.parts[0];if(this.options.knownHelpers[a])this.opcode("invokeKnownHelper",i.length,a);else{if(this.options.knownHelpersOnly)throw new r.default("You specified knownHelpersOnly, but used the unknown helper "+a,e);s.falsy=!0,this.accept(s),this.opcode("invokeHelper",i.length,s.original,o.default.helpers.simpleId(s))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],n=o.default.helpers.scopedId(e),i=!e.depth&&!n&&this.blockParamIndex(t);i?this.opcode("lookupBlockParam",i,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts)):this.opcode("lookupOnContext",e.parts,e.falsy,n):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,n=0,i=t.length;for(this.opcode("pushHash");n<i;n++)this.pushParam(t[n].value);for(;n--;)this.opcode("assignToHash",t[n].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:a.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=o.default.helpers.simpleId(e.path),n=t&&!!this.blockParamIndex(e.path.parts[0]),i=!n&&o.default.helpers.helperExpression(e),r=!n&&(i||t);if(r&&!i){var s=e.path.parts[0],a=this.options;a.knownHelpers[s]?i=!0:a.knownHelpersOnly&&(r=!1)}return i?"helper":r?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;t<n;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var n=void 0;if(!e.parts||o.default.helpers.scopedId(e)||e.depth||(n=this.blockParamIndex(e.parts[0])),n){var i=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,i)}else(t=e.original||t).replace&&(t=t.replace(/^\.\//g,"").replace(/^\.$/g,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,n,i){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.accept(e.hash):this.opcode("emptyHash",i),r},blockParamIndex:function(e){for(var t=0,n=this.options.blockParams.length;t<n;t++){var i=this.options.blockParams[t],r=i&&s.indexOf(i,e);if(i&&r>=0)return[t,r]}}}},{"../exception":16,"../utils":20,"./ast":6}],10:[function(e,t,n){"use strict";n.__esModule=!0,n.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},n.id=function(e){return/^\[.*\]$/.test(e)?e.substr(1,e.length-2):e},n.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},n.stripComment=function(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")},n.preparePath=function(e,t,n){n=this.locInfo(n);for(var i=e?"@":"",r=[],o=0,a=0,u=t.length;a<u;a++){var l=t[a].part,c=t[a].original!==l;if(i+=(t[a].separator||"")+l,c||".."!==l&&"."!==l&&"this"!==l)r.push(l);else{if(r.length>0)throw new s.default("Invalid path: "+i,{loc:n});".."===l&&(o++,"../")}}return new this.PathExpression(e,o,r,i,n)},n.prepareMustache=function(e,t,n,i,r,s){var o=i.charAt(3)||i.charAt(2),a="{"!==o&&"&"!==o;return new this.MustacheStatement(e,t,n,a,r,this.locInfo(s))},n.prepareRawBlock=function(e,t,n,i){if(e.path.original!==n){var r={loc:e.path.loc};throw new s.default(e.path.original+" doesn't match "+n,r)}i=this.locInfo(i);var o=new this.Program([t],null,{},i);return new this.BlockStatement(e.path,e.params,e.hash,o,void 0,{},{},{},i)},n.prepareBlock=function(e,t,n,i,r,o){if(i&&i.path&&e.path.original!==i.path.original){var a={loc:e.path.loc};throw new s.default(e.path.original+" doesn't match "+i.path.original,a)}t.blockParams=e.blockParams;var u=void 0,l=void 0;n&&(n.chain&&(n.program.body[0].closeStrip=i.strip),l=n.strip,u=n.program);r&&(r=u,u=t,t=r);return new this.BlockStatement(e.path,e.params,e.hash,t,u,e.strip,l,i&&i.strip,this.locInfo(o))};var i,r=e("../exception"),s=(i=r)&&i.__esModule?i:{default:i}},{"../exception":16}],11:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=e("../base"),s=i(e("../exception")),o=e("../utils"),a=i(e("./code-gen"));function u(e){this.value=e}function l(){}l.prototype={nameLookup:function(e,t){return l.isValidJavaScriptVariableName(t)?[e,".",t]:[e,"['",t,"']"]},depthedLookup:function(e){return[this.aliasable("this.lookup"),'(depths, "',e,'")']},compilerInfo:function(){var e=r.COMPILER_REVISION;return[e,r.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,n){return o.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:n?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},compile:function(e,t,n,i){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var r=e.opcodes,o=void 0,a=void 0,u=void 0,l=void 0;for(u=0,l=r.length;u<l;u++)o=r[u],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new s.default("Compile completed with content left on stack");var c=this.createFunctionContext(i);if(this.isChild)return c;var p={compiler:this.compilerInfo(),main:c},h=this.context.programs;for(u=0,l=h.length;u<l;u++)h[u]&&(p[u]=h[u]);return this.environment.usePartial&&(p.usePartial=!0),this.options.data&&(p.useData=!0),this.useDepths&&(p.useDepths=!0),this.useBlockParams&&(p.useBlockParams=!0),this.options.compat&&(p.compat=!0),i?p.compilerOptions=this.options:(p.compiler=JSON.stringify(p.compiler),this.source.currentLocation={start:{line:1,column:0}},p=this.objectLiteral(p),t.srcName?(p=p.toStringWithSourceMap({file:t.destName})).map=p.map&&p.map.toString():p=p.toString()),p},preamble:function(){this.lastContext=0,this.source=new a.default(this.options.srcName)},createFunctionContext:function(e){var t="",n=this.stackVars.concat(this.registers.list);n.length>0&&(t+=", "+n.join(", "));var i=0;for(var r in this.aliases){var s=this.aliases[r];this.aliases.hasOwnProperty(r)&&s.children&&s.referenceCount>1&&(t+=", alias"+ ++i+"="+r,s.children[0]="alias"+i)}var o=["depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&o.push("blockParams"),this.useDepths&&o.push("depths");var a=this.mergeSource(t);return e?(o.push(a),Function.apply(this,o)):this.source.wrap(["function(",o.join(","),") {\n  ",a,"}"])},mergeSource:function(e){var t=this.environment.isSimple,n=!this.forceBuffer,i=void 0,r=void 0,s=void 0,o=void 0;return this.source.each(function(e){e.appendToBuffer?(s?e.prepend("  + "):s=e,o=e):(s&&(r?s.prepend("buffer += "):i=!0,o.add(";"),s=o=void 0),r=!0,t||(n=!1))}),n?s?(s.prepend("return "),o.add(";")):r||this.source.push('return "";'):(e+=", buffer = "+(i?"":this.initializeBuffer()),s?(s.prepend("return buffer + "),o.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(i?"":";\n")),this.source.merge()},blockValue:function(e){var t=this.aliasable("helpers.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(e,0,n);var i=this.popStack();n.splice(1,0,i),this.push(this.source.functionCall(t,"call",n))},ambiguousBlockValue:function(){var e=this.aliasable("helpers.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var n=this.topStack();t.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n){var i=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[i++])),this.resolvePath("context",e,i,t)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t){e?this.pushStackLiteral("this.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0)},resolvePath:function(e,t,n,i){var r=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,n,i){var r=t.popStack(),s=0,o=n.length;e&&o--;for(;s<o;s++)r=t.nameLookup(r,n[s],i);return e?[t.aliasable("this.strict"),"(",r,", ",t.quotedString(n[s]),")"]:r}(this.options.strict,this,t,e));else for(var s=t.length;n<s;n++)this.replaceStack(function(s){var o=r.nameLookup(s,t[n],e);return i?[" && ",o]:[" != null ? ",o," : ",s]})},resolvePossibleLambda:function(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t,n){var i=this.popStack(),r=this.setupHelper(e,t),s=n?[r.name," || "]:"",o=["("].concat(s,i);this.options.strict||o.push(" || ",this.aliasable("helpers.helperMissing")),o.push(")"),this.push(this.source.functionCall(o,"call",r.callParams))},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var n=this.popStack();this.emptyHash();var i=this.setupHelper(0,e,t),r=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",n,")"];this.options.strict||(r[0]="(helper = ",r.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",r,i.paramsInit?["),(",i.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",i.callParams)," : helper))"])},invokePartial:function(e,t,n){var i=[],r=this.setupParams(t,1,i,!1);e&&(t=this.popStack(),delete r.name),n&&(r.indent=JSON.stringify(n)),r.helpers="helpers",r.partials="partials",e?i.unshift(t):i.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(r.depths="depths"),r=this.objectLiteral(r),i.push(r),this.push(this.source.functionCall("this.invokePartial","",i))},assignToHash:function(e){var t=this.popStack(),n=void 0,i=void 0,r=void 0;this.trackIds&&(r=this.popStack()),this.stringParams&&(i=this.popStack(),n=this.popStack());var s=this.hash;n&&(s.contexts[e]=n),i&&(s.types[e]=i),r&&(s.ids[e]=r),s.values[e]=t},pushId:function(e,t,n){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:l,compileChildren:function(e,t){for(var n=e.children,i=void 0,r=void 0,s=0,o=n.length;s<o;s++){i=n[s],r=new this.compiler;var a=this.matchExistingProgram(i);null==a?(this.context.programs.push(""),a=this.context.programs.length,i.index=a,i.name="program"+a,this.context.programs[a]=r.compile(i,t,this.context,!this.precompile),this.context.environments[a]=i,this.useDepths=this.useDepths||r.useDepths,this.useBlockParams=this.useBlockParams||r.useBlockParams):(i.index=a,i.name="program"+a,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var i=this.context.environments[t];if(i&&i.equals(e))return t}},programExpression:function(e){var t=this.environment.children[e],n=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"this.program("+n.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof u||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new u(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],n=void 0,i=void 0,r=void 0;if(!this.isInline())throw new s.default("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof u)t=["(",n=[o.value]],r=!0;else{i=!0;var a=this.incrStack();t=["((",this.push(a)," = ",o,")"],n=this.topStack()}var l=e.call(this,n);r||this.popStack(),i&&this.stackSlot--,this.push(t.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];if(i instanceof u)this.compileStack.push(i);else{var r=this.incrStack();this.pushSource([r," = ",i,";"]),this.compileStack.push(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof u)return n.value;if(!t){if(!this.stackSlot)throw new s.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof u?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,n){var i=[];return{params:i,paramsInit:this.setupHelperArgs(t,e,i,n),name:this.nameLookup("helpers",t,"helper"),callParams:[this.contextName(0)].concat(i)}},setupParams:function(e,t,n){var i={},r=[],s=[],o=[],a=void 0;i.name=this.quotedString(e),i.hash=this.popStack(),this.trackIds&&(i.hashIds=this.popStack()),this.stringParams&&(i.hashTypes=this.popStack(),i.hashContexts=this.popStack());var u=this.popStack(),l=this.popStack();(l||u)&&(i.fn=l||"this.noop",i.inverse=u||"this.noop");for(var c=t;c--;)a=this.popStack(),n[c]=a,this.trackIds&&(o[c]=this.popStack()),this.stringParams&&(s[c]=this.popStack(),r[c]=this.popStack());return this.trackIds&&(i.ids=this.source.generateArray(o)),this.stringParams&&(i.types=this.source.generateArray(s),i.contexts=this.source.generateArray(r)),this.options.data&&(i.data="data"),this.useBlockParams&&(i.blockParams="blockParams"),i},setupHelperArgs:function(e,t,n,i){var r=this.setupParams(e,t,n,!0);return r=this.objectLiteral(r),i?(this.useRegister("options"),n.push("options"),["options=",r]):(n.push(r),"")}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=l.RESERVED_WORDS={},n=0,i=e.length;n<i;n++)t[e[n]]=!0}(),l.isValidJavaScriptVariableName=function(e){return!l.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},n.default=l,t.exports=n.default},{"../base":5,"../exception":16,"../utils":20,"./code-gen":8}],12:[function(e,t,n){"use strict";n.__esModule=!0;var i=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,UNDEFINED:77,NULL:78,DATA:79,pathSegments:80,SEP:81,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"UNDEFINED",78:"NULL",79:"DATA",81:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[80,3],[80,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function(e,t,n,i,r,s,o){var a=s.length-1;switch(r){case 1:return s[a-1];case 2:this.$=new i.Program(s[a],null,{},i.locInfo(this._$));break;case 3:case 4:case 5:case 6:case 7:this.$=s[a];break;case 8:this.$=new i.CommentStatement(i.stripComment(s[a]),i.stripFlags(s[a],s[a]),i.locInfo(this._$));break;case 9:this.$=new i.ContentStatement(s[a],i.locInfo(this._$));break;case 10:this.$=i.prepareRawBlock(s[a-2],s[a-1],s[a],this._$);break;case 11:this.$={path:s[a-3],params:s[a-2],hash:s[a-1]};break;case 12:this.$=i.prepareBlock(s[a-3],s[a-2],s[a-1],s[a],!1,this._$);break;case 13:this.$=i.prepareBlock(s[a-3],s[a-2],s[a-1],s[a],!0,this._$);break;case 14:case 15:case 16:this.$={path:s[a-4],params:s[a-3],hash:s[a-2],blockParams:s[a-1],strip:i.stripFlags(s[a-5],s[a])};break;case 17:this.$={strip:i.stripFlags(s[a-1],s[a-1]),program:s[a]};break;case 18:var u=i.prepareBlock(s[a-2],s[a-1],s[a],s[a],!1,this._$),l=new i.Program([u],null,{},i.locInfo(this._$));l.chained=!0,this.$={strip:s[a-2].strip,program:l,chain:!0};break;case 19:this.$=s[a];break;case 20:this.$={path:s[a-1],strip:i.stripFlags(s[a-2],s[a])};break;case 21:case 22:this.$=i.prepareMustache(s[a-3],s[a-2],s[a-1],s[a-4],i.stripFlags(s[a-4],s[a]),this._$);break;case 23:this.$=new i.PartialStatement(s[a-3],s[a-2],s[a-1],i.stripFlags(s[a-4],s[a]),i.locInfo(this._$));break;case 24:case 25:this.$=s[a];break;case 26:this.$=new i.SubExpression(s[a-3],s[a-2],s[a-1],i.locInfo(this._$));break;case 27:this.$=new i.Hash(s[a],i.locInfo(this._$));break;case 28:this.$=new i.HashPair(i.id(s[a-2]),s[a],i.locInfo(this._$));break;case 29:this.$=i.id(s[a-1]);break;case 30:case 31:this.$=s[a];break;case 32:this.$=new i.StringLiteral(s[a],i.locInfo(this._$));break;case 33:this.$=new i.NumberLiteral(s[a],i.locInfo(this._$));break;case 34:this.$=new i.BooleanLiteral(s[a],i.locInfo(this._$));break;case 35:this.$=new i.UndefinedLiteral(i.locInfo(this._$));break;case 36:this.$=new i.NullLiteral(i.locInfo(this._$));break;case 37:case 38:this.$=s[a];break;case 39:this.$=i.preparePath(!0,s[a],this._$);break;case 40:this.$=i.preparePath(!1,s[a],this._$);break;case 41:s[a-2].push({part:i.id(s[a]),original:s[a],separator:s[a-1]}),this.$=s[a-2];break;case 42:this.$=[{part:i.id(s[a]),original:s[a]}];break;case 43:this.$=[];break;case 44:s[a-1].push(s[a]);break;case 45:this.$=[];break;case 46:s[a-1].push(s[a]);break;case 53:this.$=[];break;case 54:s[a-1].push(s[a]);break;case 59:this.$=[];break;case 60:s[a-1].push(s[a]);break;case 65:this.$=[];break;case 66:s[a-1].push(s[a]);break;case 73:this.$=[];break;case 74:s[a-1].push(s[a]);break;case 77:this.$=[];break;case 78:s[a-1].push(s[a]);break;case 81:this.$=[];break;case 82:s[a-1].push(s[a]);break;case 85:this.$=[];break;case 86:s[a-1].push(s[a]);break;case 89:this.$=[s[a]];break;case 90:s[a-1].push(s[a]);break;case 91:this.$=[s[a]];break;case 92:s[a-1].push(s[a])}},table:[{3:1,4:2,5:[2,43],6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],46:[2,43],49:[2,43],53:[2,43]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,44],13:[2,44],14:[2,44],17:[2,44],27:[2,44],32:[2,44],37:[2,44],42:[2,44],45:[2,44],46:[2,44],49:[2,44],53:[2,44]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:33,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:34,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{4:35,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{12:36,14:[1,18]},{18:38,54:37,58:39,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:41,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:42,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:43,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[2,73],47:44,59:[2,73],66:[2,73],74:[2,73],75:[2,73],76:[2,73],77:[2,73],78:[2,73],79:[2,73]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30],78:[2,30],79:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31],78:[2,31],79:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],77:[2,32],78:[2,32],79:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33],78:[2,33],79:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34],78:[2,34],79:[2,34]},{21:[2,35],31:[2,35],52:[2,35],59:[2,35],62:[2,35],66:[2,35],69:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35],78:[2,35],79:[2,35]},{21:[2,36],31:[2,36],52:[2,36],59:[2,36],62:[2,36],66:[2,36],69:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36],78:[2,36],79:[2,36]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],78:[2,40],79:[2,40],81:[1,45]},{66:[1,32],80:46},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{50:47,52:[2,77],59:[2,77],66:[2,77],74:[2,77],75:[2,77],76:[2,77],77:[2,77],78:[2,77],79:[2,77]},{23:48,36:50,37:[1,52],41:51,42:[1,53],43:49,45:[2,49]},{26:54,41:55,42:[1,53],45:[2,51]},{16:[1,56]},{31:[2,81],55:57,59:[2,81],66:[2,81],74:[2,81],75:[2,81],76:[2,81],77:[2,81],78:[2,81],79:[2,81]},{31:[2,37],59:[2,37],66:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],78:[2,37],79:[2,37]},{31:[2,38],59:[2,38],66:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],78:[2,38],79:[2,38]},{18:58,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{28:59,31:[2,53],59:[2,53],66:[2,53],69:[2,53],74:[2,53],75:[2,53],76:[2,53],77:[2,53],78:[2,53],79:[2,53]},{31:[2,59],33:60,59:[2,59],66:[2,59],69:[2,59],74:[2,59],75:[2,59],76:[2,59],77:[2,59],78:[2,59],79:[2,59]},{19:61,21:[2,45],59:[2,45],66:[2,45],74:[2,45],75:[2,45],76:[2,45],77:[2,45],78:[2,45],79:[2,45]},{18:65,31:[2,75],48:62,57:63,58:66,59:[1,40],63:64,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{66:[1,70]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],78:[2,39],79:[2,39],81:[1,45]},{18:65,51:71,52:[2,79],57:72,58:66,59:[1,40],63:73,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{24:74,45:[1,75]},{45:[2,50]},{4:76,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{45:[2,19]},{18:77,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:78,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{24:79,45:[1,75]},{45:[2,52]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:65,31:[2,83],56:80,57:81,58:66,59:[1,40],63:82,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{59:[2,85],60:83,62:[2,85],66:[2,85],74:[2,85],75:[2,85],76:[2,85],77:[2,85],78:[2,85],79:[2,85]},{18:65,29:84,31:[2,55],57:85,58:66,59:[1,40],63:86,64:67,65:68,66:[1,69],69:[2,55],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,31:[2,61],34:87,57:88,58:66,59:[1,40],63:89,64:67,65:68,66:[1,69],69:[2,61],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,20:90,21:[2,47],57:91,58:66,59:[1,40],63:92,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[1,93]},{31:[2,74],59:[2,74],66:[2,74],74:[2,74],75:[2,74],76:[2,74],77:[2,74],78:[2,74],79:[2,74]},{31:[2,76]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24],78:[2,24],79:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25],78:[2,25],79:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:94,66:[1,95],69:[2,27]},{21:[2,89],31:[2,89],52:[2,89],62:[2,89],66:[2,89],69:[2,89]},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],67:[1,96],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{21:[2,41],31:[2,41],52:[2,41],59:[2,41],62:[2,41],66:[2,41],69:[2,41],74:[2,41],75:[2,41],76:[2,41],77:[2,41],78:[2,41],79:[2,41],81:[2,41]},{52:[1,97]},{52:[2,78],59:[2,78],66:[2,78],74:[2,78],75:[2,78],76:[2,78],77:[2,78],78:[2,78],79:[2,78]},{52:[2,80]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:98,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{36:50,37:[1,52],41:51,42:[1,53],43:100,44:99,45:[2,71]},{31:[2,65],38:101,59:[2,65],66:[2,65],69:[2,65],74:[2,65],75:[2,65],76:[2,65],77:[2,65],78:[2,65],79:[2,65]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,102]},{31:[2,82],59:[2,82],66:[2,82],74:[2,82],75:[2,82],76:[2,82],77:[2,82],78:[2,82],79:[2,82]},{31:[2,84]},{18:65,57:104,58:66,59:[1,40],61:103,62:[2,87],63:105,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{30:106,31:[2,57],68:107,69:[1,108]},{31:[2,54],59:[2,54],66:[2,54],69:[2,54],74:[2,54],75:[2,54],76:[2,54],77:[2,54],78:[2,54],79:[2,54]},{31:[2,56],69:[2,56]},{31:[2,63],35:109,68:110,69:[1,108]},{31:[2,60],59:[2,60],66:[2,60],69:[2,60],74:[2,60],75:[2,60],76:[2,60],77:[2,60],78:[2,60],79:[2,60]},{31:[2,62],69:[2,62]},{21:[1,111]},{21:[2,46],59:[2,46],66:[2,46],74:[2,46],75:[2,46],76:[2,46],77:[2,46],78:[2,46],79:[2,46]},{21:[2,48]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,90],31:[2,90],52:[2,90],62:[2,90],66:[2,90],69:[2,90]},{67:[1,96]},{18:65,57:112,58:66,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,113]},{45:[2,18]},{45:[2,72]},{18:65,31:[2,67],39:114,57:115,58:66,59:[1,40],63:116,64:67,65:68,66:[1,69],69:[2,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,117]},{59:[2,86],62:[2,86],66:[2,86],74:[2,86],75:[2,86],76:[2,86],77:[2,86],78:[2,86],79:[2,86]},{62:[2,88]},{31:[1,118]},{31:[2,58]},{66:[1,120],70:119},{31:[1,121]},{31:[2,64]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,69],40:122,68:123,69:[1,108]},{31:[2,66],59:[2,66],66:[2,66],69:[2,66],74:[2,66],75:[2,66],76:[2,66],77:[2,66],78:[2,66],79:[2,66]},{31:[2,68],69:[2,68]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26],78:[2,26],79:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,125],71:[1,124]},{66:[2,91],71:[2,91]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,126]},{31:[2,70]},{31:[2,29]},{66:[2,92],71:[2,92]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],49:[2,50],51:[2,19],55:[2,52],64:[2,76],73:[2,80],78:[2,17],82:[2,84],92:[2,48],99:[2,18],100:[2,72],105:[2,88],107:[2,58],110:[2,64],111:[2,11],123:[2,70],124:[2,29]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],i=[null],r=[],s=this.table,o="",a=0,u=0,l=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;r.push(c);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,d,f,g,m,v,y,b,w,_,k={};;){if(f=n[n.length-1],this.defaultActions[f]?g=this.defaultActions[f]:(null==h&&(_=void 0,"number"!=typeof(_=t.lexer.lex()||1)&&(_=t.symbols_[_]||_),h=_),g=s[f]&&s[f][h]),void 0===g||!g.length||!g[0]){var S="";if(!l){for(v in w=[],s[f])this.terminals_[v]&&v>2&&w.push("'"+this.terminals_[v]+"'");S=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[h]||h)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:c,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+h);switch(g[0]){case 1:n.push(h),i.push(this.lexer.yytext),r.push(this.lexer.yylloc),n.push(g[1]),h=null,d?(h=d,d=null):(u=this.lexer.yyleng,o=this.lexer.yytext,a=this.lexer.yylineno,c=this.lexer.yylloc,l>0&&l--);break;case 2:if(y=this.productions_[g[1]][1],k.$=i[i.length-y],k._$={first_line:r[r.length-(y||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(y||1)].first_column,last_column:r[r.length-1].last_column},p&&(k._$.range=[r[r.length-(y||1)].range[0],r[r.length-1].range[1]]),void 0!==(m=this.performAction.call(k,o,u,a,this.yy,g[1],i,r)))return m;y&&(n=n.slice(0,-1*y*2),i=i.slice(0,-1*y),r=r.slice(0,-1*y)),n.push(this.productions_[g[1]][0]),i.push(k.$),r.push(k._$),b=s[n[n.length-2]][n[n.length-1]],n.push(b);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,n,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),o=0;o<s.length&&(!(n=this._input.match(this.rules[s[o]]))||t&&!(n[0].length>t[0].length)||(t=n,i=o,this.options.flex));o++);return t?((r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,s[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,n,i){function r(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return t.yytext=t.yytext.substr(5,t.yyleng-9),this.popState(),16;case 4:return 14;case 5:return this.popState(),13;case 6:return 59;case 7:return 62;case 8:return 17;case 9:return this.popState(),this.begin("raw"),21;case 10:return 53;case 11:return 27;case 12:return 45;case 13:case 14:return this.popState(),42;case 15:return 32;case 16:return 37;case 17:return 49;case 18:return 46;case 19:this.unput(t.yytext),this.popState(),this.begin("com");break;case 20:return this.popState(),13;case 21:return 46;case 22:return 67;case 23:case 24:return 66;case 25:return 81;case 26:break;case 27:return this.popState(),52;case 28:return this.popState(),31;case 29:return t.yytext=r(1,2).replace(/\\"/g,'"'),74;case 30:return t.yytext=r(1,2).replace(/\\'/g,"'"),74;case 31:return 79;case 32:case 33:return 76;case 34:return 77;case 35:return 78;case 36:return 75;case 37:return 69;case 38:return 71;case 39:case 40:return 66;case 41:return"INVALID";case 42:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,42],inclusive:!0}}};return e}();function n(){this.yy={}}return e.lexer=t,n.prototype=e,e.Parser=n,new n}();n.default=i,t.exports=n.default},{}],13:[function(e,t,n){"use strict";n.__esModule=!0,n.print=function(e){return(new o).accept(e)},n.PrintVisitor=o;var i,r=e("./visitor"),s=(i=r)&&i.__esModule?i:{default:i};function o(){this.padding=0}o.prototype=new s.default,o.prototype.pad=function(e){for(var t="",n=0,i=this.padding;n<i;n++)t+="  ";return t=t+e+"\n"},o.prototype.Program=function(e){var t="",n=e.body,i=void 0,r=void 0;if(e.blockParams){var s="BLOCK PARAMS: [";for(i=0,r=e.blockParams.length;i<r;i++)s+=" "+e.blockParams[i];s+=" ]",t+=this.pad(s)}for(i=0,r=n.length;i<r;i++)t+=this.accept(n[i]);return this.padding--,t},o.prototype.MustacheStatement=function(e){return this.pad("{{ "+this.SubExpression(e)+" }}")},o.prototype.BlockStatement=function(e){var t="";return t+=this.pad("BLOCK:"),this.padding++,t+=this.pad(this.SubExpression(e)),e.program&&(t+=this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--),e.inverse&&(e.program&&this.padding++,t+=this.pad("{{^}}"),this.padding++,t+=this.accept(e.inverse),this.padding--,e.program&&this.padding--),this.padding--,t},o.prototype.PartialStatement=function(e){var t="PARTIAL:"+e.name.original;return e.params[0]&&(t+=" "+this.accept(e.params[0])),e.hash&&(t+=" "+this.accept(e.hash)),this.pad("{{> "+t+" }}")},o.prototype.ContentStatement=function(e){return this.pad("CONTENT[ '"+e.value+"' ]")},o.prototype.CommentStatement=function(e){return this.pad("{{! '"+e.value+"' }}")},o.prototype.SubExpression=function(e){for(var t,n=e.params,i=[],r=0,s=n.length;r<s;r++)i.push(this.accept(n[r]));return n="["+i.join(", ")+"]",t=e.hash?" "+this.accept(e.hash):"",this.accept(e.path)+" "+n+t},o.prototype.PathExpression=function(e){var t=e.parts.join("/");return(e.data?"@":"")+"PATH:"+t},o.prototype.StringLiteral=function(e){return'"'+e.value+'"'},o.prototype.NumberLiteral=function(e){return"NUMBER{"+e.value+"}"},o.prototype.BooleanLiteral=function(e){return"BOOLEAN{"+e.value+"}"},o.prototype.UndefinedLiteral=function(){return"UNDEFINED"},o.prototype.NullLiteral=function(){return"NULL"},o.prototype.Hash=function(e){for(var t=e.pairs,n=[],i=0,r=t.length;i<r;i++)n.push(this.accept(t[i]));return"HASH{"+n.join(", ")+"}"},o.prototype.HashPair=function(e){return e.key+"="+this.accept(e.value)}},{"./visitor":14}],14:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=i(e("../exception")),s=i(e("./ast"));function o(){this.parents=[]}o.prototype={constructor:o,mutating:!1,acceptKey:function(e,t){var n=this.accept(e[t]);if(this.mutating){if(n&&(!n.type||!s.default[n.type]))throw new r.default('Unexpected node type "'+n.type+'" found when accepting '+t+" on "+e.type);e[t]=n}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new r.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,n=e.length;t<n;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,n--)},accept:function(e){if(e){this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},BlockStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash"),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")},PartialStatement:function(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},n.default=o,t.exports=n.default},{"../exception":16,"./ast":6}],15:[function(e,t,n){"use strict";n.__esModule=!0;var i,r=e("./visitor"),s=(i=r)&&i.__esModule?i:{default:i};function o(){}function a(e,t,n){void 0===t&&(t=e.length);var i=e[t-1],r=e[t-2];return i?"ContentStatement"===i.type?(r||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(i.original):void 0:n}function u(e,t,n){void 0===t&&(t=-1);var i=e[t+1],r=e[t+2];return i?"ContentStatement"===i.type?(r||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(i.original):void 0:n}function l(e,t,n){var i=e[null==t?0:t+1];if(i&&"ContentStatement"===i.type&&(n||!i.rightStripped)){var r=i.value;i.value=i.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),i.rightStripped=i.value!==r}}function c(e,t,n){var i=e[null==t?e.length-1:t-1];if(i&&"ContentStatement"===i.type&&(n||!i.leftStripped)){var r=i.value;return i.value=i.value.replace(n?/\s+$/:/[ \t]+$/,""),i.leftStripped=i.value!==r,i.leftStripped}}o.prototype=new s.default,o.prototype.Program=function(e){var t=!this.isRootSeen;this.isRootSeen=!0;for(var n=e.body,i=0,r=n.length;i<r;i++){var s=n[i],o=this.accept(s);if(o){var p=a(n,i,t),h=u(n,i,t),d=o.openStandalone&&p,f=o.closeStandalone&&h,g=o.inlineStandalone&&p&&h;o.close&&l(n,i,!0),o.open&&c(n,i,!0),g&&(l(n,i),c(n,i)&&"PartialStatement"===s.type&&(s.indent=/([ \t]+$)/.exec(n[i-1].original)[1])),d&&(l((s.program||s.inverse).body),c(n,i)),f&&(l(n,i),c((s.inverse||s.program).body))}}return e},o.prototype.BlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,n=e.program&&e.inverse,i=n,r=n;if(n&&n.chained)for(i=n.body[0].program;r.chained;)r=r.body[r.body.length-1].program;var s={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:u(t.body),closeStandalone:a((i||t).body)};if(e.openStrip.close&&l(t.body,null,!0),n){var o=e.inverseStrip;o.open&&c(t.body,null,!0),o.close&&l(i.body,null,!0),e.closeStrip.open&&c(r.body,null,!0),a(t.body)&&u(i.body)&&(c(t.body),l(i.body))}else e.closeStrip.open&&c(t.body,null,!0);return s},o.prototype.MustacheStatement=function(e){return e.strip},o.prototype.PartialStatement=o.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},n.default=o,t.exports=n.default},{"./visitor":14}],16:[function(e,t,n){"use strict";n.__esModule=!0;var i=["description","fileName","lineNumber","message","name","number","stack"];function r(e,t){var n=t&&t.loc,s=void 0,o=void 0;n&&(e+=" - "+(s=n.start.line)+":"+(o=n.start.column));for(var a=Error.prototype.constructor.call(this,e),u=0;u<i.length;u++)this[i[u]]=a[i[u]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{n&&(this.lineNumber=s,Object.defineProperty?Object.defineProperty(this,"column",{value:o,enumerable:!0}):this.column=o)}catch(e){}}r.prototype=new Error,n.default=r,t.exports=n.default},{}],17:[function(e,t,n){(function(e){"use strict";n.__esModule=!0,n.default=function(t){var n=void 0!==e?e:window,i=n.Handlebars;t.noConflict=function(){n.Handlebars===t&&(n.Handlebars=i)}},t.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t,n){"use strict";n.__esModule=!0,n.checkRevision=function(e){var t=e&&e[0]||1,n=a.COMPILER_REVISION;if(t!==n){if(t<n){var i=a.REVISION_CHANGES[n],r=a.REVISION_CHANGES[t];throw new o.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new o.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},n.template=function(e,t){if(!t)throw new o.default("No environment passed to template");if(!e||!e.main)throw new o.default("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n={strict:function(e,t){if(!(t in e))throw new o.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:r.escapeExpression,invokePartial:function(n,i,s){s.hash&&(i=r.extend({},i,s.hash));n=t.VM.resolvePartial.call(this,n,i,s);var a=t.VM.invokePartial.call(this,n,i,s);null==a&&t.compile&&(s.partials[s.name]=t.compile(n,e.compilerOptions,t),a=s.partials[s.name](i,s));if(null!=a){if(s.indent){for(var u=a.split("\n"),l=0,c=u.length;l<c&&(u[l]||l+1!==c);l++)u[l]=s.indent+u[l];a=u.join("\n")}return a}throw new o.default("The partial "+s.name+" could not be compiled when running in runtime-only mode")},fn:function(t){return e[t]},programs:[],program:function(e,t,n,i,r){var s=this.programs[e],o=this.fn(e);return t||r||i||n?s=u(this,e,o,t,n,i,r):s||(s=this.programs[e]=u(this,e,o)),s},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=r.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler};function i(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=r.data;i._setup(r),!r.partial&&e.useData&&(s=function(e,t){t&&"root"in t||((t=t?a.createFrame(t):{}).root=e);return t}(t,s));var o=void 0,u=e.useBlockParams?[]:void 0;return e.useDepths&&(o=r.depths?[t].concat(r.depths):[t]),e.main.call(n,t,n.helpers,n.partials,s,u,o)}return i.isTop=!0,i._setup=function(i){i.partial?(n.helpers=i.helpers,n.partials=i.partials):(n.helpers=n.merge(i.helpers,t.helpers),e.usePartial&&(n.partials=n.merge(i.partials,t.partials)))},i._child=function(t,i,r,s){if(e.useBlockParams&&!r)throw new o.default("must pass block params");if(e.useDepths&&!s)throw new o.default("must pass parent depths");return u(n,t,e[t],i,0,r,s)},i},n.wrapProgram=u,n.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e=n.partials[n.name];return e},n.invokePartial=function(e,t,n){if(n.partial=!0,void 0===e)throw new o.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},n.noop=function(){return""};var i,r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils")),s=e("./exception"),o=(i=s)&&i.__esModule?i:{default:i},a=e("./base");function u(e,t,n,i,r,s,o){function a(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.call(e,t,e.helpers,e.partials,r.data||i,s&&[r.blockParams].concat(s),o&&[t].concat(o))}return a.program=t,a.depth=o?o.length:0,a.blockParams=r||0,a}},{"./base":5,"./exception":16,"./utils":20}],19:[function(e,t,n){"use strict";function i(e){this.string=e}n.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},n.default=i,t.exports=n.default},{}],20:[function(e,t,n){"use strict";n.__esModule=!0,n.extend=function(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e},n.indexOf=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},n.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!s.test(e))return e;return e.replace(r,o)},n.isEmpty=function(e){return!e&&0!==e||!(!l(e)||0!==e.length)},n.blockParams=function(e,t){return e.path=t,e},n.appendContextPath=function(e,t){return(e?e+".":"")+t};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=/[&<>"'`]/g,s=/[&<>"'`]/;function o(e){return i[e]}var a,u=Object.prototype.toString;n.toString=u,(a=function(e){return"function"==typeof e})(/x/)&&(n.isFunction=a=function(e){return"function"==typeof e&&"[object Function]"===u.call(e)}),n.isFunction=a;var l=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===u.call(e)};n.isArray=l},{}],21:[function(e,t,n){var i=e("../dist/cjs/handlebars").default,r=e("../dist/cjs/handlebars/compiler/printer");function s(t,n){var r=e("fs").readFileSync(n,"utf8");t.exports=i.compile(r)}i.PrintVisitor=r.PrintVisitor,i.print=r.print,t.exports=i,void 0!==e&&e.extensions&&(e.extensions[".handlebars"]=s,e.extensions[".hbs"]=s)},{"../dist/cjs/handlebars":3,"../dist/cjs/handlebars/compiler/printer":13,fs:2}],22:[function(e,t,n){n.SourceMapGenerator=e("./source-map/source-map-generator").SourceMapGenerator,n.SourceMapConsumer=e("./source-map/source-map-consumer").SourceMapConsumer,n.SourceNode=e("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":28,"./source-map/source-map-generator":29,"./source-map/source-node":30}],23:[function(e,t,n){if("function"!=typeof i)var i=e("amdefine")(t,e);i(function(e,t,n){var i=e("./util");function r(){this._array=[],this._set={}}r.fromArray=function(e,t){for(var n=new r,i=0,s=e.length;i<s;i++)n.add(e[i],t);return n},r.prototype.add=function(e,t){var n=this.has(e),r=this._array.length;n&&!t||this._array.push(e),n||(this._set[i.toSetString(e)]=r)},r.prototype.has=function(e){return Object.prototype.hasOwnProperty.call(this._set,i.toSetString(e))},r.prototype.indexOf=function(e){if(this.has(e))return this._set[i.toSetString(e)];throw new Error('"'+e+'" is not in the set.')},r.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},r.prototype.toArray=function(){return this._array.slice()},t.ArraySet=r})},{"./util":31,amdefine:1}],24:[function(e,t,n){if("function"!=typeof i)var i=e("amdefine")(t,e);i(function(e,t,n){var i=e("./base64");t.encode=function(e){var t,n="",r=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&r,(r>>>=5)>0&&(t|=32),n+=i.encode(t)}while(r>0);return n},t.decode=function(e,t){var n,r,s,o,a=0,u=e.length,l=0,c=0;do{if(a>=u)throw new Error("Expected more digits in base 64 VLQ value.");n=!!(32&(r=i.decode(e.charAt(a++)))),l+=(r&=31)<<c,c+=5}while(n);t.value=(o=(s=l)>>1,1==(1&s)?-o:o),t.rest=e.slice(a)}})},{"./base64":25,amdefine:1}],25:[function(e,t,n){if("function"!=typeof i)var i=e("amdefine")(t,e);i(function(e,t,n){var i={},r={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(e,t){i[e]=t,r[t]=e}),t.encode=function(e){if(e in r)return r[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){if(e in i)return i[e];throw new TypeError("Not a valid base 64 digit: "+e)}})},{amdefine:1}],26:[function(e,t,n){if("function"!=typeof i)var i=e("amdefine")(t,e);i(function(e,t,n){t.search=function(e,t,n){return 0===t.length?-1:function e(t,n,i,r,s){var o=Math.floor((n-t)/2)+t,a=s(i,r[o],!0);return 0===a?o:a>0?n-o>1?e(o,n,i,r,s):o:o-t>1?e(t,o,i,r,s):t<0?-1:t}(-1,t.length,e,t,n)}})},{amdefine:1}],27:[function(e,t,n){if("function"!=typeof i)var i=e("amdefine")(t,e);i(function(e,t,n){var i=e("./util");function r(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}r.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},r.prototype.add=function(e){var t,n,r,s,o,a;t=this._last,n=e,r=t.generatedLine,s=n.generatedLine,o=t.generatedColumn,a=n.generatedColumn,s>r||s==r&&a>=o||i.compareByGeneratedPositions(t,n)<=0?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},r.prototype.toArray=function(){return this._sorted||(this._array.sort(i.compareByGeneratedPositions),this._sorted=!0),this._array},t.MappingList=r})},{"./util":31,amdefine:1}],28:[function(e,t,n){if("function"!=typeof i)var i=e("amdefine")(t,e);i(function(e,t,n){var i=e("./util"),r=e("./binary-search"),s=e("./array-set").ArraySet,o=e("./base64-vlq");function a(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=i.getArg(t,"version"),r=i.getArg(t,"sources"),o=i.getArg(t,"names",[]),a=i.getArg(t,"sourceRoot",null),u=i.getArg(t,"sourcesContent",null),l=i.getArg(t,"mappings"),c=i.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);r=r.map(i.normalize),this._names=s.fromArray(o,!0),this._sources=s.fromArray(r,!0),this.sourceRoot=a,this.sourcesContent=u,this._mappings=l,this.file=c}a.fromSourceMap=function(e){var t=Object.create(a.prototype);return t._names=s.fromArray(e._names.toArray(),!0),t._sources=s.fromArray(e._sources.toArray(),!0),t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file,t.__generatedMappings=e._mappings.toArray().slice(),t.__originalMappings=e._mappings.toArray().slice().sort(i.compareByOriginalPositions),t},a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?i.join(this.sourceRoot,e):e},this)}}),a.prototype.__generatedMappings=null,Object.defineProperty(a.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__generatedMappings}}),a.prototype.__originalMappings=null,Object.defineProperty(a.prototype,"_originalMappings",{get:function(){return this.__originalMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__originalMappings}}),a.prototype._nextCharIsMappingSeparator=function(e){var t=e.charAt(0);return";"===t||","===t},a.prototype._parseMappings=function(e,t){for(var n,r=1,s=0,a=0,u=0,l=0,c=0,p=e,h={};p.length>0;)if(";"===p.charAt(0))r++,p=p.slice(1),s=0;else if(","===p.charAt(0))p=p.slice(1);else{if((n={}).generatedLine=r,o.decode(p,h),n.generatedColumn=s+h.value,s=n.generatedColumn,(p=h.rest).length>0&&!this._nextCharIsMappingSeparator(p)){if(o.decode(p,h),n.source=this._sources.at(l+h.value),l+=h.value,0===(p=h.rest).length||this._nextCharIsMappingSeparator(p))throw new Error("Found a source, but no line and column");if(o.decode(p,h),n.originalLine=a+h.value,a=n.originalLine,n.originalLine+=1,0===(p=h.rest).length||this._nextCharIsMappingSeparator(p))throw new Error("Found a source and line, but no column");o.decode(p,h),n.originalColumn=u+h.value,u=n.originalColumn,(p=h.rest).length>0&&!this._nextCharIsMappingSeparator(p)&&(o.decode(p,h),n.name=this._names.at(c+h.value),c+=h.value,p=h.rest)}this.__generatedMappings.push(n),"number"==typeof n.originalLine&&this.__originalMappings.push(n)}this.__generatedMappings.sort(i.compareByGeneratedPositions),this.__originalMappings.sort(i.compareByOriginalPositions)},a.prototype._findMapping=function(e,t,n,i,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return r.search(e,t,s)},a.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},a.prototype.originalPositionFor=function(e){var t={generatedLine:i.getArg(e,"line"),generatedColumn:i.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",i.compareByGeneratedPositions);if(n>=0){var r=this._generatedMappings[n];if(r.generatedLine===t.generatedLine){var s=i.getArg(r,"source",null);return null!=s&&null!=this.sourceRoot&&(s=i.join(this.sourceRoot,s)),{source:s,line:i.getArg(r,"originalLine",null),column:i.getArg(r,"originalColumn",null),name:i.getArg(r,"name",null)}}}return{source:null,line:null,column:null,name:null}},a.prototype.sourceContentFor=function(e){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=i.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var t;if(null!=this.sourceRoot&&(t=i.urlParse(this.sourceRoot))){var n=e.replace(/^file:\/\//,"");if("file"==t.scheme&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!t.path||"/"==t.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}throw new Error('"'+e+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(e){var t={source:i.getArg(e,"source"),originalLine:i.getArg(e,"line"),originalColumn:i.getArg(e,"column")};null!=this.sourceRoot&&(t.source=i.relative(this.sourceRoot,t.source));var n=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions);if(n>=0){var r=this._originalMappings[n];return{line:i.getArg(r,"generatedLine",null),column:i.getArg(r,"generatedColumn",null),lastColumn:i.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},a.prototype.allGeneratedPositionsFor=function(e){var t={source:i.getArg(e,"source"),originalLine:i.getArg(e,"line"),originalColumn:1/0};null!=this.sourceRoot&&(t.source=i.relative(this.sourceRoot,t.source));var n=[],r=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions);if(r>=0)for(var s=this._originalMappings[r];s&&s.originalLine===t.originalLine;)n.push({line:i.getArg(s,"generatedLine",null),column:i.getArg(s,"generatedColumn",null),lastColumn:i.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[--r];return n.reverse()},a.GENERATED_ORDER=1,a.ORIGINAL_ORDER=2,a.prototype.eachMapping=function(e,t,n){var r,s=t||null;switch(n||a.GENERATED_ORDER){case a.GENERATED_ORDER:r=this._generatedMappings;break;case a.ORIGINAL_ORDER:r=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var o=this.sourceRoot;r.map(function(e){var t=e.source;return null!=t&&null!=o&&(t=i.join(o,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}}).forEach(e,s)},t.SourceMapConsumer=a})},{"./array-set":23,"./base64-vlq":24,"./binary-search":26,"./util":31,amdefine:1}],29:[function(e,t,n){if("function"!=typeof i)var i=e("amdefine")(t,e);i(function(e,t,n){var i=e("./base64-vlq"),r=e("./util"),s=e("./array-set").ArraySet,o=e("./mapping-list").MappingList;function a(e){e||(e={}),this._file=r.getArg(e,"file",null),this._sourceRoot=r.getArg(e,"sourceRoot",null),this._skipValidation=r.getArg(e,"skipValidation",!1),this._sources=new s,this._names=new s,this._mappings=new o,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(e){var t=e.sourceRoot,n=new a({file:e.file,sourceRoot:t});return e.eachMapping(function(e){var i={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(i.source=e.source,null!=t&&(i.source=r.relative(t,i.source)),i.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(i.name=e.name)),n.addMapping(i)}),e.sources.forEach(function(t){var i=e.sourceContentFor(t);null!=i&&n.setSourceContent(t,i)}),n},a.prototype.addMapping=function(e){var t=r.getArg(e,"generated"),n=r.getArg(e,"original",null),i=r.getArg(e,"source",null),s=r.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,i,s),null==i||this._sources.has(i)||this._sources.add(i),null==s||this._names.has(s)||this._names.add(s),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:i,name:s})},a.prototype.setSourceContent=function(e,t){var n=e;null!=this._sourceRoot&&(n=r.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[r.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[r.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(e,t,n){var i=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');i=e.file}var o=this._sourceRoot;null!=o&&(i=r.relative(o,i));var a=new s,u=new s;this._mappings.unsortedForEach(function(t){if(t.source===i&&null!=t.originalLine){var s=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=s.source&&(t.source=s.source,null!=n&&(t.source=r.join(n,t.source)),null!=o&&(t.source=r.relative(o,t.source)),t.originalLine=s.line,t.originalColumn=s.column,null!=s.name&&(t.name=s.name))}var l=t.source;null==l||a.has(l)||a.add(l);var c=t.name;null==c||u.has(c)||u.add(c)},this),this._sources=a,this._names=u,e.sources.forEach(function(t){var i=e.sourceContentFor(t);null!=i&&(null!=n&&(t=r.join(n,t)),null!=o&&(t=r.relative(o,t)),this.setSourceContent(t,i))},this)},a.prototype._validateMapping=function(e,t,n,i){if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||i)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:i}))},a.prototype._serializeMappings=function(){for(var e,t=0,n=1,s=0,o=0,a=0,u=0,l="",c=this._mappings.toArray(),p=0,h=c.length;p<h;p++){if((e=c[p]).generatedLine!==n)for(t=0;e.generatedLine!==n;)l+=";",n++;else if(p>0){if(!r.compareByGeneratedPositions(e,c[p-1]))continue;l+=","}l+=i.encode(e.generatedColumn-t),t=e.generatedColumn,null!=e.source&&(l+=i.encode(this._sources.indexOf(e.source)-u),u=this._sources.indexOf(e.source),l+=i.encode(e.originalLine-1-o),o=e.originalLine-1,l+=i.encode(e.originalColumn-s),s=e.originalColumn,null!=e.name&&(l+=i.encode(this._names.indexOf(e.name)-a),a=this._names.indexOf(e.name)))}return l},a.prototype._generateSourcesContent=function(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=r.relative(t,e));var n=r.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)},a.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},a.prototype.toString=function(){return JSON.stringify(this)},t.SourceMapGenerator=a})},{"./array-set":23,"./base64-vlq":24,"./mapping-list":27,"./util":31,amdefine:1}],30:[function(e,t,n){if("function"!=typeof i)var i=e("amdefine")(t,e);i(function(e,t,n){var i=e("./source-map-generator").SourceMapGenerator,r=e("./util"),s=/(\r?\n)/,o="$$$isSourceNode$$$";function a(e,t,n,i,r){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==r?null:r,this[o]=!0,null!=i&&this.add(i)}a.fromStringWithSourceMap=function(e,t,n){var i=new a,o=e.split(s),u=function(){return o.shift()+(o.shift()||"")},l=1,c=0,p=null;return t.eachMapping(function(e){if(null!==p){if(!(l<e.generatedLine)){t=(n=o[0]).substr(0,e.generatedColumn-c);return o[0]=n.substr(e.generatedColumn-c),c=e.generatedColumn,h(p,t),void(p=e)}var t="";h(p,u()),l++,c=0}for(;l<e.generatedLine;)i.add(u()),l++;if(c<e.generatedColumn){var n=o[0];i.add(n.substr(0,e.generatedColumn)),o[0]=n.substr(e.generatedColumn),c=e.generatedColumn}p=e},this),o.length>0&&(p&&h(p,u()),i.add(o.join(""))),t.sources.forEach(function(e){var s=t.sourceContentFor(e);null!=s&&(null!=n&&(e=r.join(n,e)),i.setSourceContent(e,s))}),i;function h(e,t){if(null===e||void 0===e.source)i.add(t);else{var s=n?r.join(n,e.source):e.source;i.add(new a(e.originalLine,e.originalColumn,s,t,e.name))}}},a.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[o]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},a.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[o]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},a.prototype.walk=function(e){for(var t,n=0,i=this.children.length;n<i;n++)(t=this.children[n])[o]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(e){var t,n,i=this.children.length;if(i>0){for(t=[],n=0;n<i-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},a.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[o]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},a.prototype.setSourceContent=function(e,t){this.sourceContents[r.toSetString(e)]=t},a.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][o]&&this.children[t].walkSourceContents(e);var i=Object.keys(this.sourceContents);for(t=0,n=i.length;t<n;t++)e(r.fromSetString(i[t]),this.sourceContents[i[t]])},a.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e},a.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new i(e),r=!1,s=null,o=null,a=null,u=null;return this.walk(function(e,i){t.code+=e,null!==i.source&&null!==i.line&&null!==i.column?(s===i.source&&o===i.line&&a===i.column&&u===i.name||n.addMapping({source:i.source,original:{line:i.line,column:i.column},generated:{line:t.line,column:t.column},name:i.name}),s=i.source,o=i.line,a=i.column,u=i.name,r=!0):r&&(n.addMapping({generated:{line:t.line,column:t.column}}),s=null,r=!1);for(var l=0,c=e.length;l<c;l++)10===e.charCodeAt(l)?(t.line++,t.column=0,l+1===c?(s=null,r=!1):r&&n.addMapping({source:i.source,original:{line:i.line,column:i.column},generated:{line:t.line,column:t.column},name:i.name})):t.column++}),this.walkSourceContents(function(e,t){n.setSourceContent(e,t)}),{code:t.code,map:n}},t.SourceNode=a})},{"./source-map-generator":29,"./util":31,amdefine:1}],31:[function(e,t,n){if("function"!=typeof i)var i=e("amdefine")(t,e);i(function(e,t,n){t.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var i=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,r=/^data:.+\,.+$/;function s(e){var t=e.match(i);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function a(e){var t=e,n=s(e);if(n){if(!n.path)return e;t=n.path}for(var i,r="/"===t.charAt(0),a=t.split(/\/+/),u=0,l=a.length-1;l>=0;l--)"."===(i=a[l])?a.splice(l,1):".."===i?u++:u>0&&(""===i?(a.splice(l+1,u),u=0):(a.splice(l,2),u--));return""===(t=a.join("/"))&&(t=r?"/":"."),n?(n.path=t,o(n)):t}function u(e,t){var n=e||"",i=t||"";return(n>i)-(n<i)}t.urlParse=s,t.urlGenerate=o,t.normalize=a,t.join=function(e,t){""===e&&(e="."),""===t&&(t=".");var n=s(t),i=s(e);if(i&&(e=i.path||"/"),n&&!n.scheme)return i&&(n.scheme=i.scheme),o(n);if(n||t.match(r))return t;if(i&&!i.host&&!i.path)return i.host=t,o(i);var u="/"===t.charAt(0)?t:a(e.replace(/\/+$/,"")+"/"+t);return i?(i.path=u,o(i)):u},t.relative=function(e,t){""===e&&(e=".");var n=s(e=e.replace(/\/$/,""));return"/"==t.charAt(0)&&n&&"/"==n.path?t.slice(1):0===t.indexOf(e+"/")?t.substr(e.length+1):t},t.toSetString=function(e){return"$"+e},t.fromSetString=function(e){return e.substr(1)},t.compareByOriginalPositions=function(e,t,n){var i;return(i=u(e.source,t.source))?i:(i=e.originalLine-t.originalLine)?i:(i=e.originalColumn-t.originalColumn)||n?i:(i=u(e.name,t.name))?i:(i=e.generatedLine-t.generatedLine)||e.generatedColumn-t.generatedColumn},t.compareByGeneratedPositions=function(e,t,n){var i;return(i=e.generatedLine-t.generatedLine)?i:(i=e.generatedColumn-t.generatedColumn)||n?i:(i=u(e.source,t.source))?i:(i=e.originalLine-t.originalLine)?i:(i=e.originalColumn-t.originalColumn)||u(e.name,t.name)}})},{amdefine:1}],32:[function(e,t,n){(function(e){function t(e,t){for(var n=0,i=e.length-1;i>=0;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}n.resolve=function(){for(var n="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var o=s>=0?arguments[s]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(n=o+"/"+n,r="/"===o.charAt(0))}return(r?"/":"")+(n=t(i(n.split("/"),function(e){return!!e}),!r).join("/"))||"."},n.normalize=function(e){var s=n.isAbsolute(e),o="/"===r(e,-1);return(e=t(i(e.split("/"),function(e){return!!e}),!s).join("/"))||s||(e="."),e&&o&&(e+="/"),(s?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(i(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var r=i(e.split("/")),s=i(t.split("/")),o=Math.min(r.length,s.length),a=o,u=0;u<o;u++)if(r[u]!==s[u]){a=u;break}var l=[];for(u=a;u<r.length;u++)l.push("..");return(l=l.concat(s.slice(a))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,i=-1,r=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!r){i=s;break}}else r=!1;return-1===i?n?"/":".":n&&1===i?"/":e.slice(0,i)},n.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,i=-1,r=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!r){n=t+1;break}}else-1===i&&(r=!1,i=t+1);return-1===i?"":e.slice(n,i)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,i=-1,r=!0,s=0,o=e.length-1;o>=0;--o){var a=e.charCodeAt(o);if(47!==a)-1===i&&(r=!1,i=o+1),46===a?-1===t?t=o:1!==s&&(s=1):-1!==t&&(s=-1);else if(!r){n=o+1;break}}return-1===t||-1===i||0===s||1===s&&t===i-1&&t===n+1?"":e.slice(t,i)};var r="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:33}],33:[function(e,t,n){var i,r,s=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,c=[],p=!1,h=-1;function d(){p&&l&&(p=!1,l.length?c=l.concat(c):h=-1,c.length&&f())}function f(){if(!p){var e=u(d);p=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,p=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new g(e,t)),1!==c.length||p||u(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],34:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e,t){return new(function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=e,this.url=n,this.init()}return i(t,[{key:"init",value:function(){if(e.utilites.isCustomHandlersRunning)return e.utilites.debugConsole({name:"Debug (class CustomHandlers) -> CustomHandlers is already running!",time:!0}),!1;e.utilites.setCustomHandlersRunning(!0),document.addEventListener("pw:customer_events:event",function(t){var n=t.detail;n&&e.utilites.setStataData(n)}),this.url&&this.includeEmbed()}},{key:"includeEmbed",value:function(){var e=this;return new Promise(function(t){document.addEventListener("pw:custom_handlers:ready",function(e){t(e.detail)}),e.scriptEmbed()})}},{key:"scriptEmbed",value:function(){var t=document.createElement("script"),n=document.getElementsByTagName("script")[0];t.type="text/javascript",t.src=this.url,t.async=!0,n.parentNode.insertBefore(t,n),e.utilites.customEvents("pw:custom_handlers:embed",!0)}}]),t}())(e,t)}},{}],35:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"createDevice",value:function(){return new Promise(function(e){e()})}},{key:"get",value:function(t){var n=this;if(e.isPromise()){this.createDevice().then(function(){return e.utilites.createIframe({src:""+e.api.device,id:""+e.namespace.iframe})}).then(function(e){e.addEventListener("load",function(){n.messageListener(e,t)},!1)})}else{var i=e.utilites.createIframe({src:""+e.api.device,id:""+e.namespace.iframe});i.addEventListener("load",function(){n.messageListener(i,t)},!1)}}},{key:"messageListener",value:function(t,n){var i=this,r=new MessageChannel,s=t.contentWindow;e.utilites.debugConsole({name:"Debug (class Deviceid) -> messageListener",params:{api:e.api,iframe:t},time:!0}),r&&(s.postMessage("pw-init",""+e.api.landing,[r.port2]),r.port1.onmessage=function(r){var s=r.data;e.utilites.debugConsole({name:"Debug (class Deviceid) -> onmessage",params:{data:r.data},time:!0}),s&&e.platform_code===s.platform_code&&(i.saveDevice(s,n),t&&t.remove())})}},{key:"saveDevice",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(t){t.deviceid&&(e.user.device_id=t.deviceid,e.utilites.setCookie("pw_deviceid",""+t.deviceid,{domain:e.user.host}));var i="http"===e.type?t.status_http:t.value;(i=!1===i?"default":i)&&(e.user.permission=i,e.utilites.setCookie("pw_status_"+e.platform_code,""+i,{domain:e.user.host})),t.track&&(e.track=t.track),this.publicData(t),e.utilites.debugConsole({name:"Debug (class Deviceid -> saveDevice)",params:t,time:!0}),"function"==typeof n&&n.call(this,i,t.endpoint,t.status_https)}}},{key:"publicData",value:function(t){if("landing"!==e.type){var n="https"===e.type&&"true"!==e.oneSchemeSubscribe?e.permissionCustom():t.value;"https"===e.type&&"true"===e.IS_ONE_DOMAIN_SUBSCRIBE&&(n=e.permissionDomain()),pw.permission=n,pw.device_id=e.user.device_id,pw.scheme=e.type}}}]),t}())}},{}],36:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(t,n){return new(function(){function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.type=t,this.debug=this.getDebug(),this.platform_code=pw.websiteId,this.platformUrl="https://www.banggood.com",this.filesPath=window.location.origin+"/",this.api={host:"https://banggoodcom.push.world",device:"https://banggoodcom.push.world/getid/?code="+this.platform_code,events:"https://events.push.world/v1/event",data:"https://events.push.world/v2/subscriber/create",url:"https://events.push.world",landing:"https://banggoodcom.push.world",serviceworkerScope:window.location.origin+"/",serviceworker:this.filesPath+"serviceworker.js?v="+ +new Date,serviceworkerUpdate:this.filesPath+"serviceworker-update.js?v="+ +new Date},this.apiEndpoints={subscriber_created:"https://events.push.world/v2/subscriber/create",subscriber_updated:"https://events.push.world/v2/subscriber/update",subscriber_system_segment:"https://events.push.world/v2/system-segmentation",subscriber_platform_segment:"https://events.push.world/v2/platform-segmentation",stat_widgets:"https://events.push.world/v2/stat/widget",stat_notifications:"https://events.push.world/v2/stat/notification",stat_purchase:"https://events.push.world/v2/stat/purchase",custom_events:"https://events.push.world/v2/trigger"},this.namespace={prefix:"pw",mark:"pushbookmark",device:"pwdevice_id",iframe:"pw-iframe",unique:"pw-unique",update:"pw-update"},this.support={browser:["Chrome","Firefox","Yandex","Opera"],serviceWorker:this.serviceWorkerSupported(),pushAPI:this.pushAPISupported(),notification:this.showNotificationSupported()},this.supportBrowserVersion=[{browser:"Chrome",version:"55"},{browser:"Firefox",version:"44"}],this.VAPID_PUBLIC_KEY="BGtQ+fHB6UOrEf6cArkxEUyrT/cw+0E+tqmrTTQztjNM66Cfsb61uu43/vl7V9rvQPPiu3sXYlp3OGWBYQqbHio=",this.IS_ONE_SCHEME_SUBSCRIBE="false",this.IS_ONE_DOMAIN_SUBSCRIBE="false",this.IS_SERVICE_WORKER_UPDATE="false",this.IS_WHITE_LABEL="false",this.IS_RESUBSCRIPTION="false",this.IS_SUBSCRIPTION_ENABLED="false",this.IGNORE_PERMISSION_FOR_TRIGGERS="true",this.endpoint=void 0,this.utilites=e("./utilites")(this),this.deviceid=e("./deviceid")(this),this.init()}return s(o,[{key:"init",value:function(){var e=this;if(this.utilites.isEmbedRunning)return this.utilites.debugConsole({name:"Debug (class Core) -> Embed is already running!",time:!0}),!1;this.utilites.setEmbedRunning(!0),this.user=this.getSystems(),this.allowedLoad().then(function(){pw.isAllowed=!0,e.utilites.deleteOldCookies(e.user.host),e.getDevice(function(t,n,i){var r=e.getPermission(t,i),s=e.isProtocol(),o=t,a=!1;"http"===e.type&&e.setCookieUser(n),s&&(e.customHandlerBindEvents(),e.customHandlersEmbed(),e.segmentationBindEvents(),e.purchaseTrackingBindEvents(),"true"===e.IGNORE_PERMISSION_FOR_TRIGGERS&&(e.customHandlersStart(),a=!0),"true"===e.IS_SUBSCRIPTION_ENABLED&&e.chekedFiles(function(t){t&&e.switchSW(r,o),"allow"===r&&"true"!==e.IGNORE_PERMISSION_FOR_TRIGGERS&&!1===a&&(e.customHandlersStart(),a=!0)}),!1===a&&document.addEventListener("pw:subscribe:allow",function(){e.customHandlersStart(),a=!0},!1)),e.utilites.publicEvents("pw:ready",{permission:r}),e.utilites.debugConsole({name:"Debug (class Core) -> DATA",params:e,time:!0})})}).catch(function(){pw.isAllowed=!1,e.utilites.debugConsole({name:"Debug (class Core) -> Private browsing mode enabled",time:!0})})}},{key:"switchSW",value:function(e,t){var n=this;this.getFileSWUD().then(function(e){e&&n.updateSW()}).then(function(){n.starting(e,t)})}},{key:"updateSW",value:function(){this.api.serviceworker=this.api.serviceworkerUpdate}},{key:"getFileSWUD",value:function(){var e=this;return new Promise(function(t){e.isUpdateSW()?e.getFiles(e.api.serviceworkerUpdate).then(function(e){"false"!==e.response?t(!0):t(!1)}):t(!1)})}},{key:"setCookieUser",value:function(e){var t=e&&e.length?"allow":"deny";this.utilites.setCookie("pw_status_"+this.platform_code,t,{domain:this.user.host})}},{key:"starting",value:function(t,n){var i=!1;this.utilites.debugConsole({name:"Debug (class Utilites -> starting)",params:{permission:t,status:n,context:this},time:!0});var r=this.utilites.getCookie("pw_subscription_domain_"+this.platform_code);"true"===this.IS_ONE_SCHEME_SUBSCRIBE&&this.getHost()!==r&&(i="allow"===n),"true"===this.IS_ONE_DOMAIN_SUBSCRIBE&&this.getHost()!==r&&(i="allow"===t),i||(this.subscription=e("./subscription")(this),this.elements=this.getElements(),this.widgets(t)),this.utilites.httpNotify()}},{key:"customHandlersEmbed",value:function(){var t=this,n=window.localStorage.getItem("pw-abandonedcart");n?e("./custom_handlers")(this,n):(document.addEventListener("pw:custom_handlers:ready",function(){e("./custom_handlers")(t)}),this.utilites.customEvents("pw:custom_handlers:embed",!0))}},{key:"customHandlerBindEvents",value:function(){var e=this;document.addEventListener("pw:customer_events:widget",function(t){var n=t.detail;n&&e.utilites.setStataData(n)});["pw:custom_handlers:embed","pw:custom_handlers:ready","pw:custom_handlers:start","pw:customer_events:node_ready","pw:customer_events:abandoned_cart","pw:customer_events:incomplete_action","pw:customer_events:abandoned_session","pw:customer_events:segmentation","pw:customer_events:purchase_handler"].forEach(function(t){document.addEventListener(t,function(t){var n=t.detail||{};e.utilites.debugConsole({name:"Debug (class Utilites -> debugConsole)",params:r({},n,{event_type:t.type}),time:!0})})})}},{key:"customHandlersStart",value:function(){this.utilites.customEvents("pw:custom_handlers:start",!0)}},{key:"segmentationBindEvents",value:function(){var e=this;document.addEventListener("pw:segmentation_events",function(t){var n=t.detail;n&&e.utilites.setStataData(n)})}},{key:"purchaseTrackingBindEvents",value:function(){var e=this;document.addEventListener("pw:purchase_events",function(t){var n=t.detail;n&&e.utilites.setStataData(n)})}},{key:"chekedFiles",value:function(e){var t=this;"https"===this.type&&this.isPromise()?Promise.all([this.getFiles(this.api.serviceworker)]).then(function(e){var n=e.length,i=[];return e.forEach(function(e){"false"!==e.response&&i.push(!0),t.utilites.debugConsole({name:"Debug (class Core) -> chekedFiles",params:e,time:!0})}),i.length===n}).then(function(n){"function"==typeof e&&e.call(t,n)}):"function"==typeof e&&e.call(this,!0)}},{key:"getFiles",value:function(e){var t=this;return new Promise(function(n,i){t.utilites.request(""+e,null,function(t){t?n({response:t,file:e}):i(t)},{method:"get"})})}},{key:"getDebug",value:function(){if(this.isLocal()){var e=window.localStorage.getItem("pw-debug");return"true"!==n?e||!1:n}return!1}},{key:"widgets",value:function(t){e("./widgets")(this,t)}},{key:"getReferrer",value:function(){return document.referrer||""}},{key:"getOrigin",value:function(){return window.location.href}},{key:"getElements",value:function(){var e={"widget":[{"properties":{"type":"native","styles":{"type":"inline","content":""}},"settings":{"break_timeout":"7","os_type":"all"},"triggers":{"type":"custom","content":"1"}}],"logo":"data:image/png;base64,UklGRngGAABXRUJQVlA4IGwGAACwJACdASqgAKAAPm02lUikIyGhJDdpwIANiWNEeBqY3Sq1wjmbiBddM5vlVf0r9wH7M+oD9Zuon6AH+U6hn9o/YA8s/2O/3M9Hj//63Gxf+3eDvic8b+2HHMeS+3/6j8qOQvgBeyP85vGIAPqjxH6R3Mm/wXowaEPqv2Ef1y9IAYX/JcCUqk4R6ZaMXXv4Hbl6eWjlo5vqCkGjln+2LIUxDskGjVTlUwbRSfNqRUH44lZ/3/GVPgfiwTrT2lVHDzCVtUOPHOjRyr41Zux/jOo3upOdxgJ2cwiiW/GMN3QEjDJTsDTgWudV81X1hCMBvpVB2fS/Q6pTPtYSW+pFrYIGxuEW9fqfxZoRYeftUDO9Vz+6uE534rJFHwmETMzMyDRziK40HsCaN99sN+eAAAD+/+hbl2Uq1885RzIzUak7LQRz72Dq6mgkpD/IczJ89jd4g+5zIh/Kp98Yv7ry89p5nzntumwMN/67ZO25jah4fyHw5ihFuQVMz4f4yar0fRGsy60RcKRjgEibyKkHi4wG8ha1RExOZ5twpOmrq/nirxLN50EhxUzAK/7mra6m6BgUia9XjZ7exWIYev+yOSaHNVIf17lPv1oEUAjcZHy33of+GXVT1KAiEmr79ifnnsTWyUN58ANvZJM45N1uRmAjj+OyP0bwsfc5yH/Z2x9Iizoc2L8hzT/urF88vqQ2lu1gySjHx8QbAOAGxpI46ycup9uvivSoEpeKLmZv6A/P3xSQbwf3wJpzPsO/XLVRb7sUb9Mi9XJ5WjuIl3kyjQmsxZJRq2RUg/Ky9+oCgFaEkTV0sMv52/vO4Be+hlXMrXgz3PQFnt+etX6De2EVkJ3+SSdQeJ9Dgu/ha3d4+35VI0qdgn/Kst/klQBnNzEydx+Iw3SKa6YvrJIq341KGoPjI6bDFzF2JF7vVKrP9EynBf7SE25aqEwAA8nz/fzVxjKm7qAoNlnAtusnURV27ZXj6NNqAckIk/WqiywN3MDQ12D/JQoekyyqtXRX//8I/NHBtXb+lhQe9UrVrBNjahdYMv2y4lP/9KBLQBDTPJHYfNQeUuOqx6Ggo76BKT96uORysscmCQArDON7ZfofC9c+VRKzBTws5jvjVh8XsjfRnGmDyPZ8yM0qEWAhHVkLhOAzguE22+zzc7No/7ALwzl6MS7YoaOBnB1Bbsiv6/lZL/dX7TPrG7fiUe9A7q7WGcNmrdSK7TYcigtlEAHiULjzLc6EDDdH9Cj1435C3h/DDviczcXsjLNn/x1vfQjDEbG6RZo+vVv0g1owdT/NOxtHuyj4910t3GYwqRvMbMA4SNr7U/a7clXWhMHLUrrrkkNH89NolQAe9TSeCREhrdwT4+FnDtVa7mwl3HfsByuhbeqjdJrNSPqtLOZcnXU6UCB5xUG6ti6RZo+QvECk2RYRWAz+oFS8xtxesiPT+L/D165djHNPtyTacTb6GgA+T/O6COtH1toZAbWYFlk5Y1fe1p35WMex4+lI5yNVuSiB022C8cMyR2XRR37qbl3W3Y77w/lVbTyNe1BKysFF+7xtXaVw1UxRoOP9RleslOZs4/9B5k/0yJnaNrhnJbGmDXxvKKu7rm/e6wOlIqId84W+sZdLZwE83QxPdvc/8rm1TglRXAkdQMNmPYO6CSrb8MRb8edGbxsYKcouzPZnZI4wj2UfsTthqTPbxt83Fw15woUtZ1YnxUpQjzm1fN3LwM61kj4u0amG8qRnPQHitXPWYHVp3GSXW+716EFTecYALVTz/R2Wj8QZYJhbuANj/ZThmbZMGKV97n6K+Nk6Yfwvlnb5uZ6UBOYgu1iQsf12RrimdutSxYl9i/LHO4JiJohs9zi8NgF5DKBjpXCPj0uCnpuQhFRRZhxoK7Tlxrl5Q8lywXoy8a95LzEgH34ncEo0/ELYKJaGSHgn0AiR5pCJVE2aOEbH7TbA3H3jNfA1PEOInRF+FM54YipY4Lf1EXvytbDO/AwT7fIeoZ7D3qO1RNwOc/qPcrfxpOESkNfhWqkjqXpkteoFyTFvl8Md4KIzuLpaJ/tWG9RYAz5oahUVO0TKP8HFO+OZga/meFtvJ/cr/5Kk8z96Gf4q8zMXF493IZIZgk8SKoTyj7bDE7NnEVgL2QDbxpX2Pnsppew0wC9H6z6BU+Px2S96LibicIyZBBjT1hBZ3ysX4AA=","name":"BangGood CPA"},t=void 0,n=this.utilites.getStorage("pw_debug_widgets");t="true"===this.debug&&n?JSON.parse(n):JSON.parse("{}");try{switch(i(e)){case"object":return this.mergeElementsConfig(e,t);case"string":return this.mergeElementsConfig(JSON.parse(e.replace(/content:""/gm,"content: ''")),t)}}catch(n){this.debugConsole({name:"Debug (class Core -> getElements)",params:[{error:decodeURIComponent("[Widgets elements] "+n),elements:e,CUSTOM_WIDGET_DEVELOPER_CONFIG:t}],time:!0})}}},{key:"mergeElementsConfig",value:function(e,t){return 0!==Object.keys(t).length&&0!==t.widgets.length&&Object.keys(t.widgets).forEach(function(n){var i=e.widget.find(function(e){return e.properties.type===n}),r=t.widgets[n];if(i){var s=r.init_conditions?r.init_conditions:[];i.settings=Object.assign({},i.settings,r.settings),i.init_conditions=(i.init_conditions||[]).concat(s)}}),e}},{key:"getPermission",value:function(e,t){return this.updateHttpsStatusOnLanding(t),"true"===this.IS_ONE_SCHEME_SUBSCRIBE?this.oneSchemePermission(e,t):"https"===this.type&&"true"===this.IS_ONE_DOMAIN_SUBSCRIBE?this.oneDomainPermission():this.permissionStatus(e)}},{key:"updateHttpsStatusOnLanding",value:function(e){if("https"===this.type){var t=this.permissionCustom();t!==e&&this.utilites.sendCookieToLanding("pw_status_https_"+this.platform_code,t)}}},{key:"oneSchemePermission",value:function(e,t){var n=void 0,i=this.permissionCustom();switch(this.type){case"https":n="allow"===e?"allow":i;break;case"http":n="allow"===i||"allow"===t?"allow":e}return this.utilites.debugConsole({name:"Debug (class Core) -> oneSchemePermission",params:{type:this.type,landing_permission:e,platform_permission:i,https_permission:t,result_permission:n},time:!0}),this.user.permission=n,n}},{key:"oneDomainPermission",value:function(){var e=void 0,t=this.utilites.getCookie("pw_subscription_domain_"+this.platform_code),n=this.permissionCustom(),i=this.getCookieDomain();return t?t===this.getHost()?(e=n,"allow"!==n&&this.utilites.deleteCookie("pw_subscription_domain_"+this.platform_code,{domain:i})):e="allow":(e=n,"allow"===n&&this.utilites.setCookie("pw_subscription_domain_"+this.platform_code,""+this.getHost(),{domain:i})),this.utilites.debugConsole({name:"Debug (class Core) -> oneDomainPermission",params:{type:this.type,subscription_domain:t,platform_permission:n,result_permission:e},time:!0}),this.user.permission=e,e}},{key:"permissionStatus",value:function(e){var t=void 0;switch(this.type){case"https":t=this.permissionCustom();break;case"http":t=e}return this.user.permission=t,t}},{key:"permissionCustom",value:function(){var e=void 0;switch(this.notificationPermission()){case"default":e="default";break;case"denied":e="deny";break;case"granted":e="allow"}return e}},{key:"permissionDomain",value:function(){var e=this.permissionCustom(),t=this.utilites.getCookie("pw_subscription_domain_"+this.platform_code);return t?t===this.getHost()?e:"allow":e}},{key:"getDevice",value:function(e){this.deviceid.get(e)}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"allowedLoad",value:function(){var t=this;return new Promise(function(n,i){e("./utilites/checkPrivateBrowsering")().check().then(function(e){if(e)return i();var r=t.support,s=t.supportBrowserVersion,o=[],a=!0;for(var u in r)Object.hasOwnProperty.call(r,u)&&("browser"===u?(~r[u].indexOf(t.user.browser)?o.push(!0):o.push(!1),t.utilites.debugConsole({name:"Debug (class Core) -> allowedList",params:{variable:u,value:~r[u].indexOf(t.user.browser)},time:!0})):("https"===t.type&&o.push(r[u]),t.utilites.debugConsole({name:"Debug (class Core) -> allowedList",params:{variable:u,value:r[u]},time:!0})));s.forEach(function(e){if(t.user.browser===e.browser){var n=parseFloat(t.user.browser_version.split(".")[0]),i=parseFloat(e.version);n<i&&o.push(!1),t.utilites.debugConsole({name:"Debug (class Core) -> supportBrowserVersion",params:{userBrowser:t.user.browser,currentVersion:n,minVersion:i},time:!0})}else t.utilites.debugConsole({name:"Debug (class Core) -> supportBrowserVersion",params:{userBrowser:t.user.browser,bvBrowser:e.browser},time:!0})});for(var l=0;l<o.length;l++)o[l]||(a=o[l]);~~a?n():i()})})}},{key:"getLang",value:function(){try{var e=Intl.DateTimeFormat().resolvedOptions().locale;return"string"==typeof e?e:Array.isArray(e)&&"string"==typeof e[0]?e[0]:""}catch(e){return""}}},{key:"getHost",value:function(){return window.location.host}},{key:"getHostHref",value:function(){return window.location.href}},{key:"getCookieDomain",value:function(){return"."+this.getHost().split(".").splice(-2,2).join(".")}},{key:"getTimezone",value:function(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;return"string"==typeof e?e:""}catch(e){return""}}},{key:"getProtocol",value:function(){return window.location.protocol.split(":")[0]}},{key:"isProtocol",value:function(){return"https"!==this.type||(this.type===this.getProtocol()||(this.utilites.infoConsole("Embed code works only with https protocol. Read more https://push.world/help"),!1))}},{key:"isUpdateSW",value:function(){var e=pw.version.split(".")[1];return this.isPromise()&&"https"===this.type&&"true"===this.IS_SERVICE_WORKER_UPDATE&&e%2==0}},{key:"getSystems",value:function(){var t=e("./systems")(),n=t.getOS(),i=t.getBrowser();return{os:n.name,os_version:n.version,browser:i.name,browser_version:i.version,platform_code:this.platform_code,host:this.getHost(),lang:this.getLang(),timezone:this.getTimezone(),scheme:this.type}}},{key:"fetchSupported",value:function(){return"undefined"!=typeof fetch&&window.fetch&&-1!==window.fetch.toString().indexOf("[native code]")}},{key:"serviceWorkerSupported",value:function(){return"serviceWorker"in navigator}},{key:"showNotificationSupported",value:function(){return"ServiceWorkerRegistration"in window&&"showNotification"in ServiceWorkerRegistration.prototype}},{key:"notificationPermission",value:function(){return Notification.permission}},{key:"pushAPISupported",value:function(){return"PushManager"in window&&this.operaSupported()}},{key:"operaSupported",value:function(){var e=window.navigator.userAgent,t=void 0;return!/(OPR|Opera)\/(\d+)\./.test(e)||!!(t=e.match(/(OPR|Opera)\/(\d+)\./)[2])&&parseInt(t)>39}},{key:"isPromise",value:function(){return"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")}},{key:"isLocal",value:function(){try{return"localStorage"in window&&"function"==typeof window.localStorage.getItem&&"function"==typeof window.localStorage.setItem}catch(e){return!1}}},{key:"getWorkingPath",value:function(){var e=document.createElement("a");e.href=this.platformUrl;var t=e.pathname.replace(/(\/\S[^\/]+?)\.(\w+?$)/,"");return("/"!==t.substr(-1)?t+"/":t).replace(/^\//,"")}}]),o}())}},{"./custom_handlers":34,"./deviceid":35,"./subscription":37,"./systems":41,"./utilites":43,"./utilites/checkPrivateBrowsering":42,"./widgets":45}],37:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(t){var n="https"===t.type||"landing"===t.type;return new(function(){function r(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n&&t.allowedLoad().then(function(){e.stateHTTPS=!1,t.is_resubscription=!1,"allow"===t.user.permission&&e.initSubscribe(),t.utilites.debugConsole({name:"Debug (class Subscription)",params:e,time:!0})})}return i(r,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(t.utilites.debugConsole({name:"Debug (class Subscription -> init)",params:{data:e},time:!0}),t.type){case"https":case"landing":this.initSubscribe(e);break;case"http":this.initLanding(e)}}},{key:"initLanding",value:function(n){e("core/subscription/landing")(t).create(n)}},{key:"getAdditional",value:function(){return e("core/systems/additional")(t)}},{key:"getPushbookmark",value:function(){return e("core/subscription/pushbookmark")(t)}},{key:"setStataData",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e&&(t.user.permission=this.getPushbookmark().getValue(),t.utilites.setStataData(t.utilites.extends(e,this.getAdditional().get()),i,function(e){"function"==typeof r&&r.call(n,e)}))}},{key:"updatePushbookmark",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getPushbookmark().get(),r=i.value;t.deviceid.saveDevice(i),"landing"===t.type?(t.utilites.customEvents(t.type+"-"+r,{value:r,data:i}),window.opener&&window.opener.postMessage(i,"*")):(t.utilites.setCookie("pw_status_"+t.platform_code,n?"allow":"deny",{domain:t.user.host}),t.utilites.sendCookieToLanding("pw_status_https_"+t.platform_code,n?"allow":"deny"),n&&t.utilites.setCookie("pw_subscription_domain_"+t.platform_code,""+t.user.host,{domain:t.getCookieDomain()}),"allow"!==r&&"deny"!==r||!e||(t.utilites.destroyWidgetAll(e,r),t.utilites.customEvents("landing-message",{value:r,data:e})))}},{key:"selfCloseLanding",value:function(){"landing"===t.type&&t.user.origin&&("pseudo_selfclose"===t.utilites.getUrlParam("type",t.user.origin)&&setTimeout(window.close,1500))}},{key:"unblockWidgetEvent",value:function(e){"allow"===e&&t.utilites.getStorage("pw-unblock_view")&&(t.utilites.setStataData({event_id:"unblock_disabled"}),t.utilites.delStorage("pw-unblock_view"))}},{key:"nativeWidgetStat",value:function(e,n){if(e&&"native"===e.source){var i="granted"===n?"widget_allow":"denied"===n?"widget_deny":void 0;i&&t.utilites.setStataData({event_id:i,source:e.source,trigger:e.trigger})}}},{key:"nativeWidgetRerunSet",value:function(e,n){if("Firefox"!==t.user.browser&&"default"===n&&e&&"native"===e.source&&e.widgetData){var i=t.namespace.update+"-"+e.widgetData.properties.type;t.utilites.sessionViewSet(i,e.widgetData)}}},{key:"serviceWorkerMessage",value:function(){navigator.serviceWorker.onmessage=function(e){var n=e.data,i=n.command,r=n.params,s=t.user;if(n&&i)switch(i){case"debug":t.utilites.debugConsole(n);break;case"user":SW.controller.postMessage({user:s,params:r})}}}},{key:"initSubscribe",value:function(e){var n=this;t.utilites.debugConsole({name:"Debug (class Subscription -> initSubscribe-1)",params:{data:e},time:!0});var i=this.registerServiceWorker();this.updateServiceWorker(i)&&i.update(),i.then(function(){return n.bodySubscription(e)}).catch(function(e){t.utilites.debugConsole({name:"Debug (class Subscription -> initSubscribe)",params:{error:e},time:!0})})}},{key:"bodySubscription",value:function(e){var n=this,i=e&&e.repeatSubscribe;this.getSubscribe().then(async function(e){t.utilites.debugConsole({name:"Debug (class Subscription -> bodySubscription)",params:{subscription:e},time:!0});return{isSubscription:!e||await n.reSubscription(e),subscription:e}}).then(function(e){var i=e.isSubscription,r=e.subscription;if(t.utilites.debugConsole({name:"Debug (class Subscription -> bodySubscription-2)",params:{isSubscription:i,subscription:r},time:!0}),r){var s=n.getEndpointKeys(r).endpoint,o=t.user.host;"landing"===t.type?t.utilites.setCookie("pw_endpoint",s,{domain:o}):(t.utilites.setCookie("pw_status_"+t.platform_code,s?"allow":"deny",{domain:o}),t.utilites.sendCookieToLanding("pw_status_https_"+t.platform_code,s?"allow":"deny")),n.endpoint=s,t.endpoint=s}return{isSubscription:i,subscription:r}}).then(function(r){var s=r.isSubscription,o=r.subscription;t.utilites.debugConsole({name:"Debug (class Subscription -> bodySubscription 3)",params:{type:t.type,isRepeatSubscribe:i,isSubscription:s,subscription:o},time:!0}),s||!o?"https"===t.type||i?n.subscribe(e):setTimeout(function(){return n.subscribe(e)},1200):"landing"===t.type&&(t.utilites.customEvents("landing-allow",{value:"allow",data:e}),window.opener&&window.opener.postMessage(e,"*"))}).catch(function(e){t.utilites.debugConsole({name:"Debug (class Subscription -> bodySubscription)",params:{error:e},time:!0})})}},{key:"subscribe",value:function(e){var n=this;t.utilites.debugConsole({name:"Debug (class Subscription -> subscribe)",params:{data:e},time:!0}),this.askPermission().then(function(){return n.subscribeUserToPush()}).then(function(i){if(i&&i.endpoint){var r=n.getEndpointKeys(i),s=r.endpoint,o=r.auth,a=r.p256dh,u=t.utilites.hashCodeEndpoint(s,t.VAPID_PUBLIC_KEY),l=t.permissionCustom(),c=Notification.permission,p=t.user.host;n.endpoint=s,t.endpoint=s,t.utilites.setStorage("pw-hash",u),t.utilites.showLoader();var h="landing"===t.type?n.getAdditional().getSubscribeHref():t.getHostHref();n.setStataData({event_id:"subscriber_created",subscription:s,auth_secret:o,public_key:a,subs_href:h,is_resubscription:t.is_resubscription},"subscribe",function(){t.utilites.hideLoader(),n.updatePushbookmark(e,!0)}),n.unblockWidgetEvent(l),n.nativeWidgetStat(e,c),t.utilites.publicEvents("pw:subscribe:"+l,{permission:l,subscription:s,auth_secret:o,public_key:a}),"landing"===t.type&&t.utilites.setCookie("pw_endpoint",s,{domain:p}),n.selfCloseLanding()}}).catch(function(i){var r=t.permissionCustom(),s=Notification.permission,o=t.user.host;if(t.utilites.debugConsole({name:"Debug (class Subscription -> subscribe-askPermission)",params:{error:i},time:!0}),"default"===r||"deny"===r){var a="default"===r?"permission_default":"permission_denied";n.setStataData({event_id:a},!1,function(){n.updatePushbookmark(e,!1)}),"landing"===t.type&&t.utilites.setCookie("pw_endpoint","",{domain:o}),n.nativeWidgetStat(e,s),n.nativeWidgetRerunSet(e,r),t.utilites.publicEvents("pw:subscribe:"+r,{permission:r}),n.selfCloseLanding()}else n.setStataData({event_id:"permission_errors",errorCode:"subscription catch: "+r,errorText:i},!1)})}},{key:"reSubscription",value:async function(e){var n=this.getEndpointKeys(e).endpoint,i="true"===t.IS_RESUBSCRIPTION?t.VAPID_PUBLIC_KEY+"_new":t.VAPID_PUBLIC_KEY,r=t.utilites.getStorage("pw-hash"),s=t.utilites.hashCodeEndpoint(n,i);return t.utilites.debugConsole({name:"Debug (class Subscription -> reSubscription)",params:{hashCodeLocale:r,hashCodeCurrent:s},time:!0}),parseInt(r,10)!==s&&(await e.unsubscribe(),t.is_resubscription=!0,!0)}},{key:"updateServiceWorker",value:function(e){var t=e.active,n=e.waiting;return!(!n||!t)&&t.scriptURL!==n.scriptURL}},{key:"askPermission",value:function(){var e=this;return new Promise(function(n,i){if("granted"===Notification.permission)return t.is_resubscription=!0,n("granted");e.setStataData({event_id:"permission_request"});var r=Notification.requestPermission(function(e){n(e)});r&&r.then(n,i)}).then(function(e){if("granted"!==e)throw new Error("We weren't granted permission.")})}},{key:"subscribeUserToPush",value:function(){var e=this,n=this.getFileServiceWorker(),i=t.api.serviceworkerScope||"/",r={updateViaCache:"none",scope:i};return t.utilites.debugConsole({name:"Debug (class Subscription -> subscribeUserToPush)",params:{serviceWorkerFile:n,serviceWorkerScope:i},time:!0}),navigator.serviceWorker.register(n,r).then(function(n){var i={userVisibleOnly:!0,applicationServerKey:e.urlBase64ToUint8Array(t.VAPID_PUBLIC_KEY)};return n.pushManager.subscribe(i)}).then(function(e){return e})}},{key:"getFileServiceWorker",value:function(){return"true"===t.IS_SERVICE_WORKER_UPDATE?t.api.serviceworkerUpdate:t.api.serviceworker}},{key:"registerServiceWorker",value:function(){var e=this,n=this.getFileServiceWorker(),i=t.api.serviceworkerScope||"/",r={updateViaCache:"none",scope:i};return t.utilites.debugConsole({name:"Debug (class Subscription -> registerServiceWorker)",params:{serviceWorkerFile:n,serviceWorkerScope:i},time:!0}),navigator.serviceWorker.register(n,r).then(function(t){return e.serviceWorkerMessage(),t}).catch(function(n){t.utilites.debugConsole({name:"Debug (class Subscription -> registerServiceWorker)",params:{error:n},time:!0}),e.setStataData({event_id:"permission_errors",errorCode:"registerServiceWorker",errorText:n})})}},{key:"getSubscribe",value:function(){return navigator.serviceWorker.ready.then(function(e){return e.pushManager.getSubscription().then(function(e){return e})})}},{key:"getEndpointKeys",value:function(e){return{endpoint:e.endpoint,auth:btoa(String.fromCharCode.apply(null,new Uint8Array(e.getKey("auth")))),p256dh:btoa(String.fromCharCode.apply(null,new Uint8Array(e.getKey("p256dh"))))}}},{key:"urlBase64ToUint8Array",value:function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}}]),r}())}},{"core/subscription/landing":38,"core/subscription/pushbookmark":39,"core/systems/additional":40}],38:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.openedWindow=null,this.size={width:600,height:580},this.prefix=e.namespace.prefix,e.utilites.debugConsole({name:"Debug (class Landing)",params:this,time:!0})}return i(t,[{key:"create",value:function(t){var n=this.configWindow(t),i=t.type?"&type="+t.type:"",r=e.api.landing+"/?source="+t.source+"&trigger="+t.trigger+i+"&subs_href="+encodeURIComponent(e.getHostHref());this.openWindow(r,n,t.blur),this.getSubscribe(t)}},{key:"openWindow",value:function(t,n,i){this.openedWindow=window.open(t,"PUSH.WORLD",n),e.utilites.debugConsole({name:"Debug (class Landing -> openWindow)",params:{openedWindow:this.openedWindow,config:n,link:t},time:!0});var r=e.utilites.getStorage("pw-notify-permission");r&&e.utilites.isJsonString(r)&&(r=JSON.parse(r),e.utilites.setStorage("pw-notify-permission",JSON.stringify({status:r.status,date:r.date,trigger:r.trigger,view:!0,attempts:r.attempts+1,lastview:Date.now()})))}},{key:"closeOpenedWindow",value:function(){var t=this.openedWindow;t&&(t.close(),e.utilites.debugConsole({name:"Debug (class Landing -> closeOpenedWindow)",params:{openedWindow:this.openedWindow},time:!0}))}},{key:"getSubscribe",value:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=function(r){var s=r.data,o=r.origin||r.originalEvent.origin;if(e.utilites.debugConsole({name:"Debug (class Landing -> getSubscribe)",params:[{origin:o,landing:e.api.landing,comparison:o===e.api.landing},{message:s}],time:!0}),o===e.api.landing&&s){e.deviceid.saveDevice(s);var a=s.value;"function"==typeof i&&i.call(n,a),e.utilites.publicEvents("pw:subscribe:"+a,{permission:a}),"allow"!==a&&"deny"!==a||(e.user.permission=a,e.utilites.destroyWidgetAll(t,a),e.utilites.customEvents("landing-message",{value:a,data:s}),n.closeOpenedWindow())}};window.addEventListener?window.addEventListener("message",r,!1):window.attachEvent("onmessage",r)}},{key:"configWindow",value:function(t){var n=t.event,i=this.getWindowSize(),r=this.changePositionWindow(),s=void 0!==window.screenLeft?window.screenLeft:screen.left,o=void 0!==window.screenTop?window.screenTop:screen.top,a=i.width/2-this.size.width/2+s,u=i.height/2-this.size.height/2+o,l={width:t.blur?250:this.size.width,height:t.blur?300:this.size.height,left:t.blur?i.width:"unblock"===t.type?a:n?n.screenX-r.left:a,top:t.blur?i.height:"unblock"===t.type?u:n?n.screenY-r.top:u,menubar:"no",toolbar:"no",location:"no"};return e.utilites.extends(" ",l,",")}},{key:"getWindowSize",value:function(){return{width:window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height:window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height}}},{key:"changePositionWindow",value:function(){var t=0,n=0;switch(e.user.os){case"Mac OS":switch(e.user.browser){case"Chrome":t=300,n=140;break;case"Firefox":t=200,n=160;break;case"Yandex":t=520,n=80}break;case"Windows":switch(e.user.browser){case"Chrome":t=200,n=140;break;case"Firefox":t=200,n=160;break;case"Yandex":t=360,n=50}}return{left:t,top:n}}}]),t}())}},{}],39:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=""+e.platform_code,this.deviceid=""+e.user.device_id,this.value=this.getValue()}return i(t,[{key:"get",value:function(){return{deviceid:this.deviceid,platform_code:""+e.platform_code,value:this.value}}},{key:"getValue",value:function(){var e="";switch(Notification.permission){case"default":e="default";break;case"denied":e="deny";break;case"granted":e="allow"}return e}}]),t}())}},{}],40:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"get",value:function(){var t={referrer:this.getReferrer(),origin:this.getOrigin()};return t=e.utilites.extends(t,this.getQueryLanding())}},{key:"getQueryLanding",value:function(){var t=this,n={};if("landing"===e.type){["resource","template","source","trigger"].forEach(function(e){var i,r;i=e,(r=t.getQuery(""+i))&&(n[i]=r)})}return n}},{key:"getReferrer",value:function(){return document.referrer||""}},{key:"getOrigin",value:function(){return window.location.href}},{key:"getSubscribeHref",value:function(){var t=this.getQuery("subs_href");return t?decodeURIComponent(t):e.getHostHref()}},{key:"getQuery",value:function(e){var t=document.location.href.split("?"),n="";if(t[1]){var i=t[1].split("&");i&&i.forEach(function(t){var i=t.split("="),r=i[0];e===r&&(n=i[1])})}return n=n.length?n:null}}]),t}())}},{}],41:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(){return new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maps=this.getMaps(),this.regexes=this.getRegexes(),this.ua=this.getUA()}return r(e,[{key:"getMaps",value:function(){return{browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}}}},{key:"getRegexes",value:function(){return{browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],["name","version"],[/(OPiOS)[\/\s]+([\w\.]+)/i],[["name","Opera Mini"],"version"],[/\s(opr)\/([\w\.]+)/i],[["name","Opera"],"version"],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],["name","version"],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[["name","IE"],"version"],[/(edge)\/((\d+)?[\w\.]+)/i],["name","version"],[/(yabrowser)\/([\w\.]+)/i],[["name","Yandex"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],["name","version"],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[["name","UCBrowser"],"version"],[/(dolfin)\/([\w\.]+)/i],[["name","Dolphin"],"version"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[["name","Chrome"],"version"],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],["version",["name","Android Browser"]],[/FBAV\/([\w\.]+);/i],["version",["name","Facebook"]],[/fxios\/([\w\.-]+)/i],["version",["name","Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["version","name"],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",["version",this.str,this.maps.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape)\/([\w\.-]+)/i],[["name","Netscape"],"version"],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name","version"]],os:[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],["name",["version",this.str,this.maps.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",this.str,this.maps.os.windows.version]],[/\((bb)(10);/i],[["name","BlackBerry"],"version"],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],["name","version"],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[["name","Symbian"],"version"],[/\((series40);/i],["name"],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name","Firefox OS"],"version"],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],["name","version"],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(sunos)\s?([\w\.]+\d)*/i],[["name","Solaris"],"version"],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],["name","version"],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[["name","iOS"],["version",/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[["name","Mac OS"],["version",/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],["name","version"]]}}},{key:"getUA",value:function(){return window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}},{key:"getBrowser",value:function(){return this.rgx.apply(this,this.regexes.browser)}},{key:"getOS",value:function(){return this.rgx.apply(this,this.regexes.os)}},{key:"rgx",value:function(){for(var e=void 0,t=0,n=void 0,r=void 0,s=void 0,o=void 0,a=void 0,u=void 0,l=arguments;t<l.length&&!a;){var c=l[t],p=l[t+1];if(void 0===e)for(s in e={},p)p.hasOwnProperty(s)&&("object"===(void 0===(o=p[s])?"undefined":i(o))?e[o[0]]=void 0:e[o]=void 0);for(n=r=0;n<c.length&&!a;)if(a=c[n++].exec(this.getUA()))for(s=0;s<p.length;s++)if(u=a[++r],"object"===(void 0===(o=p[s])?"undefined":i(o))&&o.length>0)switch(o.length){case 2:e[o[0]]="function"==typeof o[1]?o[1].call(this,u):o[1];break;case 3:e[o[0]]="function"!=typeof o[1]||o[1].exec&&o[1].test?u?u.replace(o[1],o[2]):void 0:u?o[1].call(this,u,o[2]):void 0;break;case 4:e[o[0]]=u?o[3].call(this,u.replace(o[1],o[2])):void 0}else e[o]=u||void 0;t+=2}return e}},{key:"str",value:function(e,t){for(var n in t)if(Object.hasOwnProperty.call(t,n))if("object"===i(t[n])&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(this.has(t[n][r],e))return"?"===n?void 0:n}else if(this.has(t[n],e))return"?"===n?void 0:n;return e}},{key:"has",value:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())}}]),e}())}},{}],42:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(){return new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"check",value:function(){var e=this;return new Promise(function(t,n){try{if(navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS")){if(window.safariIncognito)!0;else try{window.openDatabase(null,null,null,null),window.localStorage.setItem("test",1),t(!1)}catch(e){!0,t(!0)}}else if(navigator.userAgent.includes("Firefox")){var i=indexedDB.open("test");i.onerror=function(){t(!0)},i.onsuccess=function(){t(!1)}}else if(navigator.userAgent.includes("Edge")||navigator.userAgent.includes("Trident")||navigator.userAgent.includes("msie"))window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent||t(!0),t(!1);else if(e.isNewChrome())new Promise(function(e,t){"storage"in navigator&&"estimate"in navigator.storage?navigator.storage.estimate().then(function(n){n.quota<12e7?e():t(new Error("not an 76 chrome"))}):t(new Error("not an 76 chrome"))}).then(function(){t(!0)}).catch(function(){t(!1)});else{var r=window.RequestFileSystem||window.webkitRequestFileSystem;r?r(window.TEMPORARY,100,function(e){t(!1)},function(e){t(!0)}):t(null)}}catch(e){t(null)}})}},{key:"isNewChrome",value:function(){var e=navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/);if(null!=e&&5===e.length)return e.map(function(e){return parseInt(e,10)})[1]>=76}}]),e}())}},{}],43:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.prefix=e.namespace.prefix}return r(t,[{key:"parseData",value:function(e){if(!e)return"";var t="";for(var n in e)t+=n+"="+encodeURIComponent(e[n])+"&";return t=t.replace(/&$/,"")}},{key:"request",value:function(t,n,i,r){e.fetchSupported()&&e.isPromise()?this.fetchApi(t,n,i,r):this.ajaxApi(t,n,i,r)}},{key:"sendRequest",value:function(e,t,n,i){var r=Object.assign({},t),s=new FormData;Object.entries(r).forEach(function(e){s.append(e[0],e[1])});var o=void 0;try{o=navigator.sendBeacon(e,s)}catch(e){this.debugConsole({name:"Debug (class Utilites -> sendRequest)",params:[{error:e,data:r}],time:!0})}"function"==typeof n&&o&&n.call(this,o)}},{key:"fetchConfig",value:function(e,t){var n={mode:"cors",method:e,headers:new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"*/*"})};return t&&"get"!==e&&"GET"!==e&&(n.body=t),n}},{key:"fetchApi",value:function(e,t,n,i){var r=this,s=this.parseData(t),o=i&&i.method?i.method:"post",a=new Request(e,this.fetchConfig(o,s));a.url?fetch(a).then(function(e){if("function"==typeof n&&200===e.status)try{return e.text().then(function(e){return r.isJsonString(e)?JSON.parse(e):e})}catch(t){return e.json()}else if(404===e.status)return r.infoConsole(e.statusText+" file "+e.url+" status "+e.status),"false"}).then(function(e){r.fetchErrorApi(e),"function"==typeof n&&e&&n.call(r,e)}):this.ajaxApi(e,t,n,i)}},{key:"fetchErrorApi",value:function(e){if("object"===(void 0===e?"undefined":i(e)))for(var t in e)Object.hasOwnProperty.call(e,t)&&"success"===t&&(e.success||this.infoConsole(e.data))}},{key:"ajaxApi",value:function(e,t,n,i){var r=this,s=this.parseData(t),o=new XMLHttpRequest,a=i&&i.method?i.method:"post";o.onreadystatechange=function(){"function"==typeof n&&200===o.status&&o.responseText&&o.responseText.length&&n.call(r,o.responseText)},o.open(a,e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.setRequestHeader("Accept","*/*"),o.send(s)}},{key:"isJsonString",value:function(e){try{JSON.parse(e)}catch(e){return!1}return!0}},{key:"dateNow",value:function(){return Date.now?Date.now():(new Date).getTime()}},{key:"extends",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";for(var r in t)if(Object.hasOwnProperty.call(t,r))switch(void 0===e?"undefined":i(e)){case"object":e[r]=t[r];break;case"string":e+=r+"="+t[r]+n}return e}},{key:"getApiEndpointBeEventId",value:function(t){var n=null;switch(t){case"subscriber_created":n=e.apiEndpoints.subscriber_created;break;case"subscriber_updated":n=e.apiEndpoints.subscriber_updated;break;case"permission_denied":case"permission_request":case"permission_default":case"widget_allow":case"widget_deny":case"widget_request":n=e.apiEndpoints.stat_widgets;break;case"abcart":case"incomplete_action":case"abandoned_session":case"additional_push":case"customer_events_click":n=e.apiEndpoints.custom_events;break;case"platform_segmentation":n=e.apiEndpoints.subscriber_platform_segment;break;case"system_segmentation":n=e.apiEndpoints.subscriber_system_segment;break;case"purchase":n=e.apiEndpoints.stat_purchase}return n}},{key:"setStataData",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if("object"===(void 0===t?"undefined":i(t))){var r=this.extends(this.extends({},t),e.user),s=this.getApiEndpointBeEventId(t.event_id);if(null===s)return this.debugConsole({name:"Debug (class Utilites -> setStataData) Failed to get api url",params:r,time:!0}),!1;this.sendRequest(s,r,n),this.debugConsole({name:"Debug (class Utilites -> setStataData)",params:r,time:!0})}}},{key:"customEvents",value:function(e,t){var n=new CustomEvent(e,{bubbles:!0,target:document,detail:t});document.dispatchEvent(n)}},{key:"publicEvents",value:function(t,n){var i=this.extends({platform_code:e.platform_code,device_id:e.user?e.user.device_id:null,scheme:e.type,event:t},n);this.customEvents(t,i)}},{key:"sessionViewGet",value:function(t){if(e.isLocal()){var n=this.dateNow(),i=window.localStorage.getItem(t);return!(i&&i>n)}return!0}},{key:"sessionViewSet",value:function(e,t){var n=t.settings.break_timeout;if(n){Date.prototype.addDays=function(e){return this.setDate(this.getDate()+parseInt(e)),this};var i=(new Date).addDays(n).valueOf();window.localStorage.setItem(e,i)}}},{key:"getStorage",value:function(t){if(e.isLocal())return window.localStorage.getItem(t)}},{key:"setStorage",value:function(t,n){e.isLocal()&&window.localStorage.setItem(t,n)}},{key:"delStorage",value:function(t){e.isLocal()&&window.localStorage.removeItem(t)}},{key:"hashCodeEndpoint",value:function(e,t){var n=e+t,i=0,r=void 0;for(r=0;r<n.length;r++)i=(i<<5)-i+n.charCodeAt(r),i|=0;return i}},{key:"getCookie",value:function(e){var t=document.cookie.split("; "),n=!1;return t.forEach(function(t){var i=t.split("=");i[0]===e&&(n=i[1])}),n}},{key:"setCookie",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=encodeURIComponent(t),n.SameSite="None",n.Secure=!0,n.path="/",n.domain=n.domain||"push.world";var i=n.expires,r=e+"="+t;if(!i){var s=new Date;s.setTime(s.getTime()+15768e7),i=n.expires=s}for(var o in i&&i.toUTCString&&(n.expires=i.toUTCString()),n){r+="; "+o;var a=n[o];!0!==a&&(r+="="+a)}document.cookie=r}},{key:"deleteCookie",value:function(e,t){var n=document.cookie.split("; "),i=t.domain=t.domain||"push.world";n.forEach(function(t){var n=t.split("=")[0];e===n&&(document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain="+i+";")})}},{key:"deleteOldCookies",value:function(e){this.debugConsole({name:"Debug (action deleteOldCookies) -> deleteOldCookies start",cookieDomain:e,time:!0});for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].trim().split("=")[0];0===i.indexOf("pw_")&&(this.debugConsole({name:"Debug (action deleteOldCookies) -> found cookie",cookieName:i,time:!0}),document.cookie=i+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; domain="+e+";")}}},{key:"httpNotify",value:function(){var e=this.getStorage("pw-notify-permission");this.isJsonString(e)&&(e=JSON.parse(e),this.debugConsole({name:"Debug (class Utilites -> httpNotify)",params:[{dataLocal:e}],time:!0}),e&&"allow"===e.status&&("number"!=typeof e.attempts&&!1===e.view&&this.httpNotifyEvents(e.trigger),"number"==typeof e.attempts&&e.attempts<3&&this.dateNow()-e.lastview>6e4&&this.getEndpointFromLanding(e)))}},{key:"landingPostMessage",value:function(t,n,i){var r=this.createIframe({src:e.api.landing,id:t});r.addEventListener("load",function(){var t=new MessageChannel;r.contentWindow.postMessage(n,e.api.host,[t.port2]),t.port1.onmessage=function(e){i&&i(e,r)}},!1)}},{key:"sendCookieToLanding",value:function(e,t){var n={pw_set_cookie:{name:e,value:t}};this.landingPostMessage("pw_set_cookie",n,this.handleCookieMessages)}},{key:"getCookieFromLanding",value:function(e,t){var n=this,i={pw_get_cookie:{name:e}};t&&this.landingPostMessage("pw_get_cookie",i,function(e,i){var r=n.handleCookieMessages(e,i);t(r)})}},{key:"handleCookieMessages",value:function(e,t){if("object"===i(e.data)){var n=Object.keys(e.data).find(function(e){return"pw_get_cookie"===e&&(t.remove(),!0)});if(n)return n}t.remove()}},{key:"getEndpointFromLanding",value:function(e){var t=this;this.landingPostMessage("pw_check_endpoint","pw-check-endpoint",function(n,i){t.handleEndPointMessage(n,e,i)})}},{key:"handleEndPointMessage",value:function(e,t,n){switch(e.data){case"pw_endpoint_exists":this.delStorage(this.prefix+"-notify-permission");break;case"pw_endpoint_missed":this.httpNotifyEvents(t.trigger)}n.remove()}},{key:"httpNotifyEvents",value:function(t){var n=this;document.body.addEventListener("click",function i(r){var s=r.target&&(r.target.href||r.target.origin)?"pseudo_selfclose":"pseudo";n.debugConsole({name:"Debug (class Utilites -> httpNotifyEvents)",params:[{event:r}],time:!0}),e.subscription.init({event:r,source:"notify",trigger:t,blur:!0,type:s}),document.body.removeEventListener("click",i)})}},{key:"createIframe",value:function(e){var t=document.createElement("IFRAME");return t.src=""+e.src,t.id=""+e.id,t.style.display="none",t.style.width=0,t.style.height=0,t.style.borderWidth=0,document.body.appendChild(t),t}},{key:"getPWUrl",value:function(t,n){var i={utm_source:encodeURIComponent(""+e.user.host),utm_medium:""+t,utm_campaign:"push-"+e.type,utm_content:""+e.platform_code,utm_term:""+n||""};return this.extends("https://push.world/?",i,"&")}},{key:"getUrlParam",value:function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null==n?null:n[1]}},{key:"cleanWidget",value:function(e){var t=document.getElementById(e);t&&t.remove()}},{key:"destroyWidget",value:function(e){var t=document.getElementById(this.prefix+"-styles");t&&t.remove(),e&&(e.classList.add(this.prefix+"-destroy"),e.remove())}},{key:"showLoader",value:function(){"landing"===e.type&&document.querySelector(".pwl__wrapp").classList.add("pwl__wrapp--loading")}},{key:"hideLoader",value:function(){"landing"===e.type&&document.querySelector(".pwl__wrapp").classList.remove("pwl__wrapp--loading")}},{key:"destroyWidgetAll",value:function(e,t){var n=document.getElementById(this.prefix+"-styles"),i=document.body.querySelectorAll("."+this.prefix+"-widgets"),r=document.body.querySelectorAll("."+this.prefix+"-button"),s=document.getElementById(this.prefix+"-notify-iframe");if(n&&n.remove(),i&&i.length)for(var o=0;o<i.length;o++)i[o].remove();if(s&&s.remove(),r&&r.length)for(var a=0;a<r.length;a++){var u=r[a];u.classList.remove(this.prefix+"-permission--default",this.prefix+"-permission--allow",this.prefix+"-permission--deny"),t=t&&t.length?t:"default",u.classList.add(this.prefix+"-permission--"+t),e&&e.fn&&"function"==typeof e.fn&&u.removeEventListener("click",e.fn,!1)}}},{key:"detectPrivateMode",value:function(e){var t=void 0,n=e.bind(null,!0),i=e.bind(null,!1);window.webkitRequestFileSystem?webkitRequestFileSystem(0,0,i,n):"MozAppearance"in document.documentElement.style?((t=indexedDB.open("test")).onerror=n,t.onsuccess=i):/constructor/i.test(window.HTMLElement)||window.safari?function(){try{localStorage.length?i():(localStorage.x=1,localStorage.removeItem("x"),i())}catch(e){navigator.cookieEnabled?n():i()}}():window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent?i():n()}},{key:"debugConsole",value:function(t){if(this.publicEvents("pw:debug",t),"true"===e.debug){var n=function(e){var n=t.params;n instanceof Array?n.forEach(function(t){console[e](t)}):console[e](n)};if(console.group("PW."+t.name+":"),t.time&&console.time("time"),t.type){0==~t.type.indexOf(["warn","error","info","dir","dirxml","log"])&&n(t.type)}else n("log");t.time&&console.timeEnd("time"),console.groupEnd()}}},{key:"infoConsole",value:function(e){var t=["background: #222","color: #fdd95b","font-size: 12px","line-height: 40px"].join(";");console.log("%c PUSH.WORLD: "+e,t)}},{key:"setEmbedRunning",value:function(e){window.pw_isEmbedRunning=!!e}},{key:"setCustomHandlersRunning",value:function(e){window.pw_customHandlersRunning=!!e}},{key:"checkInitConditions",value:function(e){var t=this;return!e||0===e.length||e.some(function(e){return(!e.black_list||!t.checkURLs(e.black_list))&&(!(e.urls&&!t.checkURLs(e.urls))&&(!e.node_conditions||e.node_conditions.every(function(e){return t.checkNodeContent(e)})))})}},{key:"checkURLs",value:function(e){var t=this;return!1===e||e.some(function(e){var n="";switch(e.select.type){case"param":n=t.getParamURLs(e.select.property);break;case"location":switch(e.select.property){case"href":n=window.location.href;break;case"protocol":n=window.location.protocol.replace(/:$/,"");break;case"host":n=window.location.host;break;case"path":n=window.location.pathname;break;case"params":n=window.location.search;break;case"hash":n=window.location.hash;break;case"port":n=window.location.port;break;default:return!1}break;default:return!1}return"equal"===e.comparing_type?e.search===n:"match"===e.comparing_type&&new RegExp(t.replaceStrReg(e.search),"gi").test(n)})}},{key:"replaceStrReg",value:function(e){var t=e;return["?","/","#","="].forEach(function(e){t=t.replace(e,"\\"+e)}),t}},{key:"getParamURLs",value:function(e){var t={};return window.location.search.replace(/^\?/,"").split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=e[1])}),!!Object.hasOwnProperty.call(t,e)&&t[e]}},{key:"checkNodeContent",value:function(e){var t=e.type,n=e.query,i=e.attribute,r=e.match,s=document.querySelector(n),o=void 0;switch(t){case"not_exists":return!s;case"exists":return!!s;case"content":default:return!!s&&(!!(o=this.getNodeAttribute(s,i))&&new RegExp(""+r,"gi").test(o))}}},{key:"getNodeAttribute",value:function(e,t){var n=!1,i=void 0;switch(t){case"lastNode":n=e.lastChild.textContent;break;case"firstNode":n=e.firstChild.textContent;break;case"innerHTML":n=e.innerHTML;break;case"background-image":n=getComputedStyle(e)["background-image"].slice(4,-1).replace(/"/g,"");break;case"innerText":n=e.innerText;break;case"currentSrc":n=e.currentSrc;break;case"activeOption":n=!!(i=e.querySelector("option[value='"+e.value+"']"))&&i.innerText;break;default:n=e.getAttribute(t)}return n&&(n=n.replace(/[\r\n\t]/g," ").replace(/ {1+}/g," ").trim()),n}},{key:"isEmbedRunning",get:function(){return!!window.pw_isEmbedRunning}},{key:"isCustomHandlersRunning",get:function(){return!!window.pw_customHandlersRunning}}]),t}())}},{}],44:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(t,n){return new(function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.init()}return i(r,[{key:"init",value:function(){this.includeWidgets(),this.createStyles(),this.eventListener()}},{key:"createStyles",value:function(){var e=[],i=[];n.forEach(function(t){var n=t.properties.styles,r=t.properties.type;if(n)switch(n.type){case"link":e.push([n.content,r]);break;case"inline":n.content.length>0&&i.push([n.content,r])}}),e.length?(this.linksStyles(e),t.utilites.debugConsole({name:"Debug (class Elements -> linksStyles)",params:e,time:!0})):i.length&&(this.inlineStyles(i),t.utilites.debugConsole({name:"Debug (class Elements -> inlineStyles)",params:i,time:!0}))}},{key:"linksStyles",value:function(e){var t=document.getElementsByTagName("head")[0],n=void 0;e.forEach(function(e){var i=e[0],r=e[1];(n=document.createElement("link")).type="text/css",n.rel="stylesheet",n.id="pw-styles--"+r,n.href=i,t.appendChild(n)})}},{key:"inlineStyles",value:function(e){var t='<style id="pw-style--inline">'+e.join(" ")+"</style>";document.body.insertAdjacentHTML("beforeEnd",t)}},{key:"eventListener",value:function(){var e=this;n.forEach(function(n){n.events.forEach(function(i){document.addEventListener(i,function(i){e.createWidgets(n),t.utilites.debugConsole({name:"Debug (class Elements -> eventListener)",params:{event:i},time:!0})},!1)})})}},{key:"includeWidgets",value:function(){this.widgets={confirm:e("./modules/confirm/js")(t),label:e("./modules/label/js")(t),button:e("./modules/button/js")(t),popup:e("./modules/popup/js")(t),native:e("./modules/native/js")(t),notify:e("./modules/notify/js")(t),unblock:e("./modules/unblock/js")(t),custom:e("./modules/custom/js")(t)},t.utilites.debugConsole({name:"Debug (class Elements -> includeWidgets)",params:this.widgets,time:!0})}},{key:"createWidgets",value:function(e){var t=""+e.properties.type,n=this.widgets[t],i=this.changeTypeOs(e);n&&i&&n.create(e)}},{key:"changeTypeOs",value:function(e){var n=!0;if(e&&e.settings&&e.settings.os_type){var i=e.settings.os_type;"all"!==i&&(n="mobile"===i&&"Android"===t.user.os||"desktop"===i&&"Android"!==t.user.os)}return n}}]),r}())}},{"./modules/button/js":46,"./modules/confirm/js":47,"./modules/custom/js":49,"./modules/label/js":50,"./modules/native/js":51,"./modules/notify/js":52,"./modules/popup/js":53,"./modules/unblock/js":54}],45:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(t,n){return new(function(){function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.init()}return s(o,[{key:"init",value:function(){if(this.isElementsData()){var e=this.getWidgetsConfigs();pw.widgetsConfigs=e,t.utilites.debugConsole({name:"Debug (class Widgets -> getWidgetsConfigs)",params:e,time:!0}),e.length&&(this.widgetsElements(e),this.widgetsTriggers(e))}t.utilites.publicEvents("pw:init",{permission:n})}},{key:"checkPermissions",value:function(e,t){return"unblock"===e?"deny"===t:"default"===t||"button"===e}},{key:"getWidgetsConfigs",value:function(){var e=this,i=[];return t.elements.widget.forEach(function(s){var o=e.checkPermissions(s.properties.type,n),a=t.utilites.checkInitConditions(s.init_conditions),u=s.triggers;if(o&&a){s.events=[],s.events.push(s.properties.type+"-"+u.type);var l=r({},s,{type:u.type,value:u.content,event:s.properties.type+"-"+u.type});i.push(l)}}),i}},{key:"widgetsTriggers",value:function(n){e("./triggers")(t,n)}},{key:"widgetsElements",value:function(n){e("./elements")(t,n)}},{key:"isElementsData",value:function(){return t.elements&&"object"===i(t.elements)}}]),o}())}},{"./elements":44,"./triggers":55}],46:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.prefix=e.namespace.prefix,this.logo=e.elements.logo,this.name=e.elements.name}return i(t,[{key:"create",value:function(e){e&&(this.data=e,this.render())}},{key:"render",value:function(){var e=this.templates(this.data),t=document.body.querySelectorAll("."+this.prefix+"-buttons");if(this.clean(),e=e.replace(/\n/gi,"").replace(/\s{2,}/gi,""),t&&t.length)for(var n=0;n<t.length;n++)t[n].innerHTML=e;this.eventWidgets(),this.buttonAddRightClass()}},{key:"clean",value:function(){var t=this.prefix+"-"+this.data.properties.type;e.utilites.cleanWidget(t)}},{key:"destroy",value:function(t){e.utilites.destroyWidget(t)}},{key:"eventWidgets",value:function(){var t=this,n=this.data.triggers.type,i=this.data.properties.type,r=document.body.querySelectorAll("."+this.prefix+"-button");if(r&&r.length&&e.utilites.setStataData({event_id:"widget_request",source:i,trigger:n}),r&&r.length&&"default"===e.user.permission)for(var s=function(s){var o=r[s];o.addEventListener("click",function r(s){t.isCopyRightLink(s,o)||(s.preventDefault(),o.classList.contains(t.prefix+"-permission--default")&&(e.utilites.setStataData({event_id:"widget_allow",source:i,trigger:n}),e.subscription.init({event:s,source:i,trigger:n,fn:r})))})},o=0;o<r.length;o++)s(o)}},{key:"isCopyRightLink",value:function(e,t){var n=t.querySelector("."+this.prefix+"-button__copyright");return e.target&&n&&n.contains(e.target)}},{key:"buttonAddRightClass",value:function(){var e=document.body.querySelectorAll("."+this.prefix+"-button");if(e&&e.length)for(var t=0;t<e.length;t++){var n=e[t].offsetLeft,i=e[t].clientWidth;document.body.clientWidth-n-i<300&&n>300&&e[t].classList.add(this.prefix+"-button--right")}}},{key:"templates",value:function(t){var n=e.namespace.prefix;return this.mainTemplates(n,t)}},{key:"mainTemplates",value:function(t,n){var i=e.utilites.getPWUrl(n.properties.type,"widgets"),r='<svg xmlns="http://www.w3.org/2000/svg" class="'+t+'-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"/></svg>',s="circle"===n.settings.button_type?r:"powered by "+r+" Push.World",o="true"===e.IS_WHITE_LABEL?"":'<a id="'+t+'-button__link" class="'+t+'-button__copyright" target="_blank" href="'+i+'">'+s+"</a>";return'<div class="'+t+"-button "+t+"-button--"+n.settings.button_type+" "+t+"-button--"+n.settings.color+" "+t+"-permission--"+e.user.permission+'">\n                <svg version="1.1" class="'+t+'-button__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 525.153 525.153" width="80" xml:space="preserve" enable-background="new 0 0 525.153 525.153"><g><path d="M139.165 51.421l-35.776-35.864C43.413 61.202 3.742 132.185 0 212.402h50.174C53.916 145.992 88.051 87.766 139.165 51.421zM474.979 212.402h50.174c-3.742-80.217-43.413-151.2-103.586-196.845l-35.863 35.864C437.102 87.766 471.237 145.992 474.979 212.402zM425.592 224.984c0-77-53.391-141.463-125.424-158.487V49.408c0-20.787-16.761-37.614-37.592-37.614s-37.592 16.827-37.592 37.614v17.089C152.951 83.521 99.56 148.005 99.56 224.984v137.918l-50.152 50.108v25.076h426.336v-25.076l-50.152-50.108C425.592 362.902 425.592 224.984 425.592 224.984zM262.576 513.358c3.523 0 6.761-0.219 10.065-1.007 16.236-3.238 29.824-14.529 36.06-29.627 2.516-5.952 4.048-12.494 4.048-19.54H212.402C212.402 490.777 234.984 513.358 262.576 513.358z"/></g></svg>\n                <div>'+n.settings.text+'</div>\n                <div class="'+t+'-button__hint">\n                    <div class="'+t+'-button__hint--inner">\n                        <span class="'+t+'-button__hint--allow">Вы уже подписались на уведомления</span>\n                        <span class="'+t+'-button__hint--deny">Вы заблокировали возможность получения уведомлений</span>\n                    </div>\n                </div>\n                '+o+"\n            </div>"}}]),t}())}},{}],47:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.prefix=e.namespace.prefix,this.logo=e.elements.logo,this.name=e.elements.name}return i(t,[{key:"create",value:function(t){t&&(this.data=t,this.content=this.getContentLang(),this.keys=e.namespace.update+"-"+this.data.properties.type,this.render())}},{key:"render",value:function(){var t=this.templates(this.data),n=e.utilites.sessionViewGet(this.keys),i=document.body;n&&(this.clean(),t=t.replace(/\n/gi,"").replace(/\s{2,}/gi," "),i.insertAdjacentHTML("beforeEnd",t),this.eventWidgets())}},{key:"clean",value:function(){var t=this.prefix+"-"+this.data.properties.type;e.utilites.cleanWidget(t)}},{key:"destroy",value:function(t){e.utilites.destroyWidget(t)}},{key:"eventWidgets",value:function(){var t=this,n=this.data.triggers.type,i="notify-widget",r=document.getElementById(this.prefix+"-confirm"),s=document.getElementById(this.prefix+"-confirm__close"),o=document.getElementById(this.prefix+"-confirm__subscribe");e.utilites.setStataData({event_id:"widget_request",source:i,trigger:n}),s&&s.addEventListener("click",function(s){s.preventDefault(),e.utilites.setStataData({event_id:"widget_deny",source:i,trigger:n}),t.destroy(r),e.utilites.sessionViewSet(t.keys,t.data)}),o&&o.addEventListener("click",function(t){t.preventDefault(),e.utilites.setStataData({event_id:"widget_allow",source:i,trigger:n}),e.subscription.init({event:t,source:i,trigger:n})})}},{key:"getContentLang",value:function(){var t=e.user.lang.match(/(?=\S)(-)(?=\S)/)?e.user.lang.split("-")[0]:e.user.lang,n=this.contentTranslate();return n[t]?n[t]:n.ru}},{key:"contentTranslate",value:function(){return{ru:{title:this.data.settings.title||"",text:this.data.settings.text||"",btnClose:"Спасибо, но нет",btnSubscribe:"Подписаться"},en:{title:"Please subscribe to get our notifications <br /> while you’re away",text:"We will send you only relevant and precise <br /> notifications just in time",btnClose:"Thank you but no",btnSubscribe:"Subscribe"}}}},{key:"isHideTemplates",value:function(e){return"link"===e.properties.styles.type?'style="display: none;"':""}},{key:"templates",value:function(t){var n=e.namespace.prefix,i=this.btnTemplates(),r=e.utilites.getPWUrl(t.properties.type,"widgets"),s=this.isHideTemplates(t),o=this.mainTemplates(n,t,i,r,s);return o}},{key:"mainTemplates",value:function(t,n,i,r,s){var o="true"===e.IS_WHITE_LABEL?"":'<a id="'+t+'-confirm__link" target="_blank" href="'+r+'"> powered by <svg xmlns="http://www.w3.org/2000/svg" class="'+t+'-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"/></svg> PUSH.WORLD</a>';return'<div id="'+t+'-confirm" class="'+t+"-confirm "+t+"-confirm--"+n.settings.position+" "+t+'-widgets" '+s+'>\n                  <div class="'+t+'-confirm__wrapp">\n                      <div class="'+t+'-confirm__logo">\n                          <img class="'+t+'-confirm__img" src="'+this.logo+'" alt="'+this.name+'" />\n                      </div>\n                      <div class="'+t+'-confirm__content">\n                          <div class="'+t+'-confirm__title">'+this.content.title+'</div>\n                          <div class="'+t+'-confirm__text">'+this.content.text+'</div>\n                          <div class="'+t+'-confirm__btns">'+i+'</div>\n                      </div>\n                  </div>\n                  <div class="'+t+'-confirm__footer">\n                      '+o+"\n                  </div>\n              </div>"}},{key:"btnTemplates",value:function(){var t='<div id="'+this.prefix+'-confirm__close" class="'+this.prefix+"-confirm__btn "+this.prefix+'-confirm__btn--white">'+this.content.btnClose+"</div>",n='<div id="'+this.prefix+'-confirm__subscribe" class="'+this.prefix+"-confirm__btn "+this.prefix+'-confirm__btn--blue">'+this.content.btnSubscribe+"</div>";return~e.user.os.search(/Windows|windows/gi)?n+t:t+n}}]),t}())}},{}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkCondition=function(e,t,n){switch(t){case"==":return e==n;case"===":return e===n;case"!==":return e!==n;case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;case"&&":return e&&n;case"||":return e||n;default:return!1}}},{}],49:[function(e,t,n){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s=e("handlebars"),o=e("./handlebarsHelpers").checkCondition;s.registerHelper("ifCond",function(e,t,n,i){return o(e,t,n)?i.fn(this):i.inverse(this)}),t.exports=function(e){return new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.prefix=e.namespace.prefix,this.logo=e.elements.logo,this.name=e.elements.name}return r(t,[{key:"create",value:function(t){t&&(this.config=t,this.widget=t.settings,this.keys=e.namespace.update+"-"+t.properties.type,this.config&&this.createCustomWidget())}},{key:"createCustomWidget",value:function(){var t=e.utilites.sessionViewGet(this.keys);e.utilites.debugConsole({name:"Debug (createCustomWidget)",params:{config:this.config,keys:this.keys,isSessionView:t},time:!0}),t&&(this.clean(),this.render(),this.customWidgetEvents())}},{key:"clean",value:function(){var t=this.prefix+"-"+this.config.properties.type;e.utilites.cleanWidget(t)}},{key:"breakTimeoutActivationCheck",value:function(e){return(this.config.settings.activateBreakTimeoutEvents||[]).indexOf(e)>-1}},{key:"customWidgetEvents",value:function(){var t=this,n=this.config.triggers.type,i=this.config.properties.type,r=document.querySelectorAll("[data-pw-action='hide']"),s=document.querySelectorAll("[data-pw-action='close']"),o=document.querySelectorAll("[data-pw-action='subscribe']");e.utilites.setStataData({event_id:"widget_request",source:i,trigger:n}),r.forEach(function(n){n.addEventListener("click",function(n){n.preventDefault(),t.clean(),t.breakTimeoutActivationCheck("hide")&&e.utilites.sessionViewSet(t.keys,t.config)})}),s.forEach(function(r){r.addEventListener("click",function(r){r.preventDefault(),t.clean(),e.utilites.setStataData({event_id:"widget_deny",source:i,trigger:n}),t.breakTimeoutActivationCheck("close")&&e.utilites.sessionViewSet(t.keys,t.config)})}),o.forEach(function(r){r.addEventListener("click",function(r){r.preventDefault(),t.clean(),e.utilites.setStataData({event_id:"widget_allow",source:i,trigger:n}),e.subscription.init({event:r,source:i,trigger:n}),t.breakTimeoutActivationCheck("subscribe")&&e.utilites.sessionViewSet(t.keys,t.config)})})}},{key:"render",value:function(){var t=document.body;if(e.utilites.sessionViewGet(this.keys)){this.appendStyles(this.config.settings.inlineCss);var n=this.getHTML(this.config);t.insertAdjacentHTML("beforeEnd",n)}}},{key:"getHTML",value:function(t){return t.settings.inlineTemplate?s.compile(t.settings.inlineTemplate.replace(/\n/g," "))(i({},t.settings.dataObject,{prefix:this.prefix,showCopyright:"false"===e.IS_WHITE_LABEL})).replace(/\n/gi,"").replace(/ {2}/gi,""):" "}},{key:"appendStyles",value:function(e){var t='<style id="pw-style--custom-inline">'+e+"</style>";document.body.insertAdjacentHTML("beforeEnd",t)}}]),t}())}},{"./handlebarsHelpers":48,handlebars:21}],50:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.prefix=e.namespace.prefix,this.logo=e.elements.logo,this.name=e.elements.name}return i(t,[{key:"create",value:function(e){e&&(this.data=e,this.render())}},{key:"render",value:function(){var e=this.templates(this.data),t=document.body;this.clean(),e=e.replace(/\n/gi,"").replace(/ {2}/gi,""),t.insertAdjacentHTML("beforeEnd",e),this.eventWidgets()}},{key:"clean",value:function(){var t=this.prefix+"-"+this.data.properties.type;e.utilites.cleanWidget(t)}},{key:"destroy",value:function(t){e.utilites.destroyWidget(t)}},{key:"eventWidgets",value:function(){var t=this,n=this.data.triggers.type,i=this.data.properties.type,r=document.getElementById(this.prefix+"-label");e.utilites.setStataData({event_id:"widget_request",source:i,trigger:n}),r&&r.addEventListener("click",function(s){t.isCopyRightLink(s,r)||(s.preventDefault(),e.utilites.setStataData({event_id:"widget_allow",source:i,trigger:n}),e.subscription.init({event:s,source:i,trigger:n}))})}},{key:"isCopyRightLink",value:function(e,t){var n=t.querySelector("."+this.prefix+"-label__copyright");return e.target&&n&&n.contains(e.target)}},{key:"templates",value:function(t){var n=e.namespace.prefix,i=this.mainTemplates(n,t);return i}},{key:"mainTemplates",value:function(t,n){var i=e.utilites.getPWUrl(n.properties.type,"widgets"),r="true"===e.IS_WHITE_LABEL?"":'<div class="'+t+'-label__copyright"><a id="'+t+'-label__link" target="_blank" href="'+i+'"> powered by <br><svg xmlns="http://www.w3.org/2000/svg" class="'+t+'-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"/></svg> Push.World</a>';return'<div id="'+t+'-label" class="'+t+"-label "+t+"-widgets "+t+"-label--"+n.settings.position+" "+t+"-label--"+n.settings.color+'"><svg version="1.1" class="'+t+'-label__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 525.153 525.153" width="80" xml:space="preserve" enable-background="new 0 0 525.153 525.153"><g><path d="M139.165 51.421l-35.776-35.864C43.413 61.202 3.742 132.185 0 212.402h50.174C53.916 145.992 88.051 87.766 139.165 51.421zM474.979 212.402h50.174c-3.742-80.217-43.413-151.2-103.586-196.845l-35.863 35.864C437.102 87.766 471.237 145.992 474.979 212.402zM425.592 224.984c0-77-53.391-141.463-125.424-158.487V49.408c0-20.787-16.761-37.614-37.592-37.614s-37.592 16.827-37.592 37.614v17.089C152.951 83.521 99.56 148.005 99.56 224.984v137.918l-50.152 50.108v25.076h426.336v-25.076l-50.152-50.108C425.592 362.902 425.592 224.984 425.592 224.984zM262.576 513.358c3.523 0 6.761-0.219 10.065-1.007 16.236-3.238 29.824-14.529 36.06-29.627 2.516-5.952 4.048-12.494 4.048-19.54H212.402C212.402 490.777 234.984 513.358 262.576 513.358z"/></g></svg>'+r+"</div>"}}]),t}())}},{}],51:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"create",value:function(t){(this.data=t,"https"===e.type&&t)?(this.keys=e.namespace.update+"-"+this.data.properties.type,e.utilites.sessionViewGet(this.keys)&&this.eventWidgets()):"http"===e.type&&t&&this.eventWidgets()}},{key:"eventWidgets",value:function(){var t=this.data,n=t.triggers.type,i=t.properties.type,r=["widget_request"];e.utilites.debugConsole({name:"Debug (class Native -> eventWidgets)",params:{trigger:n,element:i,events:r},time:!0}),"custome"!==n&&r.forEach(function(t){e.utilites.setStataData({event_id:t,source:i,trigger:n})}),e.subscription.init({source:i,trigger:n,widgetData:this.data})}}]),t}())}},{}],52:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.prefix=e.namespace.prefix,this.name=e.elements.name,this.logo=e.elements.logo}return i(t,[{key:"create",value:function(t){t&&(this.data=t,this.keys=e.namespace.update+"-"+this.data.properties.type,this.isSupportNativePermission()?this.renderNative():this.renderPseudoNative())}},{key:"renderNative",value:function(){e.utilites.sessionViewGet(this.keys)&&(this.clean(),this.addIframe())}},{key:"renderPseudoNative",value:function(){this.keys=e.namespace.update+"-"+this.data.properties.type,this.browser=e.user.browser.replace(" ","-").toLowerCase(),this.os=e.user.os.replace(" ","-").toLowerCase(),this.content=this.getContentLang();var t=this.templates(this.data),n=e.utilites.sessionViewGet(this.keys),i=document.body;n&&(this.clean(),t=t.replace(/\n|\r\n/gi,"").replace(/\s{2,}/gi,""),i.insertAdjacentHTML("beforeEnd",t),this.eventWidgets(),this.addSystemsClasses())}},{key:"isSupportNativePermission",value:function(){var e=window.navigator.userAgent,t=void 0;return!/Chrome/.test(e)||(!(t=e.match(/(Chrome)\/(\d+)\./)[2])||parseInt(t)<60)}},{key:"addIframe",value:function(){var t=this,n=this.data.triggers.type,i=e.utilites.createIframe({src:e.api.landing+"/?source=notify&trigger="+n+"&type=iframe",id:"pw-notify-iframe"});i.addEventListener("load",function(){t.messageListener(i)},!1)}},{key:"messageListener",value:function(t){var n=new MessageChannel;t.contentWindow.postMessage("pw-init",""+e.api.landing,[n.port2]),n.port1.onmessage=this.handleMessage.bind(this)}},{key:"handleMessage",value:function(t){var n=this.data.triggers.type;switch(e.utilites.debugConsole({name:"Debug (class Notify -> messageListener)",params:[{trigger:n,data:t.data}],time:!0}),t.data){case"ready":e.utilites.setStataData({event_id:"widget_request",source:"notify",trigger:n});break;case"granted":e.utilites.setStataData({event_id:"widget_allow",source:"notify",trigger:n}),e.utilites.setStorage("pw-notify-permission",JSON.stringify({status:"allow",date:e.utilites.dateNow(),trigger:n,view:!1,attempts:0,lastview:""})),e.utilites.customEvents("landing-message"),e.utilites.publicEvents("pw:subscribe:allow-notify",{permission:"allow"}),e.utilites.httpNotify(n),e.utilites.destroyWidgetAll({},"allow");break;case"default":e.utilites.setStataData({event_id:"widget_default",source:"notify",trigger:n}),e.utilites.setStataData({event_id:"permission_default",source:"notify",trigger:n}),e.utilites.publicEvents("pw:subscribe:"+t.data,{permission:t.data}),e.utilites.sessionViewSet(this.keys,this.data);break;case"denied":e.utilites.setStataData({event_id:"widget_deny",source:"notify",trigger:n}),e.utilites.setStataData({event_id:"permission_denied",source:"notify",trigger:n}),e.utilites.publicEvents("pw:subscribe:deny",{permission:"deny"}),e.utilites.customEvents("landing-message"),e.utilites.destroyWidgetAll({},"deny");break;case"already_granted":e.utilites.customEvents("landing-message"),e.utilites.destroyWidgetAll({},"allow"),e.utilites.httpNotify(n)}}},{key:"eventWidgets",value:function(){var t=this,n=this.data.triggers.type,i=document.getElementById(this.prefix+"-notify"),r=i.querySelectorAll("."+this.prefix+"-notify__close-js"),s=i.querySelector("#"+this.prefix+"-notify__subscribe");e.utilites.setStataData({event_id:"widget_request",source:"notify",trigger:n}),r&&Array.from(r).forEach(function(r){r.addEventListener("click",function(r){r.preventDefault(),e.utilites.setStataData({event_id:"widget_deny",source:"notify",trigger:n}),t.destroy(i),e.utilites.sessionViewSet(t.keys,t.data)})}),s&&s.addEventListener("click",function(t){t.preventDefault(),e.utilites.setStataData({event_id:"widget_allow",source:"notify",trigger:n}),e.subscription.init({event:t,source:"notify",trigger:n})})}},{key:"getContentLang",value:function(){var t=e.user.lang.match(/(?=\S)(-)(?=\S)/)?e.user.lang.split("-")[0]:e.user.lang,n=this.contentTranslate();return n[t]?n[t]:n.ru}},{key:"contentTranslate",value:function(){var e="yandex"===this.browser||"opera"===this.browser?window.location.origin:window.location.host;return{ru:{title:{chrome:e+" запрашивает разрешение на:",yandex:"Пуш-уведомления",opera:"Запрос привилегий для отображения уведомлений на рабочем столе",android:{chrome:"Сайт "+e+" запрашивает разрешение на отправку уведомлений"}},text:{chrome:"Показывать оповещения",yandex:"Сайт <b>"+e+"</b><br> запрашивает разрешение отправлять вам<br> пуш-уведомления",opera:"Сайт "+e+" запрашивает разрешение на отображение уведомлений на рабочем столе. Разрешить?"},btnClose:{chrome:"Блокировать",yandex:"Блокировать",opera:"Отклонить"},btnSubscribe:{chrome:"Разрешить",yandex:"Разрешить",opera:"Разрешить"}},en:{title:{chrome:e+" wants to:",yandex:e+" wants to: Show notifications",android:{chrome:"Website "+e+" wants to show notification"}},text:{chrome:"Show notifications",yandex:""},btnClose:{chrome:"Block",yandex:"Block"},btnSubscribe:{chrome:"Allow",yandex:"Allow"}}}}},{key:"addSystemsClasses",value:function(){var e="pwl-os--"+this.os,t="pwl-browser--"+this.browser;document.documentElement.classList.add(e),document.documentElement.classList.add(t)}},{key:"templates",value:function(t){var n=e.namespace.prefix,i=this.contentTranslate(),r=e.utilites.getPWUrl(t.properties.type,"widgets");return this.mainTemplates(n,i,r)}},{key:"mainTemplates",value:function(e,t,n){return'<div id="'+e+'-notify" class="'+e+"-notify "+e+'-widgets">\n                <div class="'+e+'-notify__wrapp">\n                    <div class="'+e+'-notify__content">'+this.contentTemplates(e,t,n)+'</div>\n                    <div class="'+e+"-notify__close "+e+'-notify__close-js">'+this.icons().close+"</div>\n                </div>\n            </div>"}},{key:"contentTemplates",value:function(e,t,n){var i=this.browser,r=this.os,s=this.icons(e),o=this.btnTemplates(e),a="android"===r?r:"desktop",u={chrome:{desktop:'<div class="'+e+'-notify__title">'+this.content.title.chrome+"</div>\n                        "+s.bell+'\n                        <div class="'+e+'-notify__text">'+this.content.text.chrome+'</div>\n                        <div class="'+e+'-notify__btns">'+o+"</div>",android:'<div class="'+e+'-notify__title">'+this.content.title.android.chrome+"</div>\n                        "+s.bell+'\n                        <div class="'+e+'-notify__btns">'+o+"</div>"},yandex:{desktop:'<div class="'+e+'-notify__title">'+this.content.title.yandex+"</div>\n                        "+s.chat+'\n                        <div class="'+e+'-notify__text">'+this.content.text.yandex+'</div>\n                        <div class="'+e+'-notify__btns">'+o+'</div>\n                        <a href="'+n+'" target="_blank" class="'+e+'-notify__help">?</a>',android:'<div class="'+e+'-notify__title">'+this.content.title.android.chrome+"</div>\n                            "+s.bell+'\n                        <div class="'+e+'-notify__btns">'+o+"</div>"},opera:{desktop:'<div class="'+e+'-notify__title">'+this.content.title.opera+'</div>\n                        <div class="'+e+'-notify__text">'+this.content.text.opera+'</div>\n                        <div class="'+e+'-notify__btns">'+o+"</div>",android:""}};return u[i]?u[i][a]:u.chrome.desktop}},{key:"btnTemplates",value:function(e){var t=this.browser,n=this.os,i='<div id="'+e+'-notify__close" class="'+e+"-notify__btn "+e+'-notify__close-js">'+this.content.btnClose[t]+"</div>",r='<div id="'+e+'-notify__subscribe" class="'+e+'-notify__btn">'+this.content.btnSubscribe[t]+"</div>";return"windows"===n||"yandex"===t?r+i:i+r}},{key:"icons",value:function(e){return{bell:'<svg version="1.1" class="'+e+'-notify__bell" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 32.409 32.409" style="enable-background:new 0 0 32.409 32.409;" xml:space="preserve">\n<g><path d="M27.568,20.168V13.63c-0.021-5.043-3.48-9.862-8.654-11.088c0,0-0.17-2.542-2.711-2.542c-2.58,0-2.709,2.47-2.709,2.47\n    C8.322,3.69,4.906,8.587,4.876,13.63v6.33c0,3.094-2.033,3.626-4.443,6.146h31.543C29.566,23.586,27.568,23.263,27.568,20.168z\n     M16.203,32.409c2.771,0,5.088-2.212,5.713-5.043H10.492C11.117,30.197,13.435,32.409,16.203,32.409z"/></svg>',chat:'<svg version="1.1" class="'+e+'-notify__chat" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 490 490" style="enable-background:new 0 0 490 490;" xml:space="preserve"><g><path d="M410.103,458.74L281.861,353.511H105.453C47.313,353.511,0,305.166,0,245.755V139.016C0,79.606,47.313,31.26,105.453,31.26\nh279.094C442.687,31.26,490,79.606,490,139.016v106.739c0,49.99-33.511,92.697-79.897,104.511V458.74z M105.453,61.886\nc-41.257,0-74.828,34.603-74.828,77.131v106.739c0,42.528,33.571,77.131,74.828,77.131h187.354l86.671,71.104v-70.043l13.518-1.6\nc37.848-4.456,66.379-37.384,66.379-76.592V139.016c0-42.528-33.571-77.131-74.828-77.131H105.453z"/></g></svg>',close:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="10px" height="10px" viewBox="0 0 357 357" style="enable-background:new 0 0 357 357;" xml:space="preserve"><g><g id="close"><polygon points="357,35.7 321.3,0 178.5,142.8 35.7,0 0,35.7 142.8,178.5 0,321.3 35.7,357 178.5,214.2 321.3,357 357,321.3 214.2,178.5 "/></g></svg>'}}},{key:"clean",value:function(){var t=this.prefix+"-"+this.data.properties.type;e.utilites.cleanWidget(t)}},{key:"destroy",value:function(t){e.utilites.destroyWidget(t)}}]),t}())}},{}],53:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.prefix=e.namespace.prefix,this.logo=e.elements.logo,this.name=e.elements.name}return i(t,[{key:"create",value:function(t){t&&(this.data=t,this.content=this.getContentLang(),this.keys=e.namespace.update+"-"+this.data.properties.type,this.render())}},{key:"render",value:function(){var t=this.templates(this.data),n=e.utilites.sessionViewGet(this.keys),i=document.body;n&&(this.clean(),t=t.replace(/\n/gi,"").replace(/ {2}/gi,""),i.insertAdjacentHTML("beforeEnd",t),this.resize(i),this.eventWidgets())}},{key:"clean",value:function(){var t=this.prefix+"-"+this.data.properties.type;e.utilites.cleanWidget(t)}},{key:"destroy",value:function(t){e.utilites.destroyWidget(t)}},{key:"resize",value:function(e){var t=window.innerHeight||document.getElementsByTagName("html")[0].clientHeight||e.clientHeight;document.getElementsByClassName(this.prefix+"-popup__inner")[0].offsetHeight>t&&!e.classList.contains(this.prefix+"-popup__active")&&e.classList.add("pw-popup__active")}},{key:"eventWidgets",value:function(){var t=this,n=this.data.triggers.type,i=this.data.properties.type,r=document.getElementById(this.prefix+"-popup"),s=document.getElementById(this.prefix+"-popup__close"),o=document.getElementById(this.prefix+"-popup__subscribe");e.utilites.setStataData({event_id:"widget_request",source:i,trigger:n}),s&&s.addEventListener("click",function(s){s.preventDefault(),e.utilites.setStataData({event_id:"widget_deny",source:i,trigger:n}),t.destroy(r),e.utilites.sessionViewSet(t.keys,t.data)}),o&&o.addEventListener("click",function(t){t.preventDefault(),e.utilites.setStataData({event_id:"widget_allow",source:i,trigger:n}),e.subscription.init({event:t,source:i,trigger:n})})}},{key:"getContentLang",value:function(){var t=e.user.lang.match(/(?=\S)(-)(?=\S)/)?e.user.lang.split("-")[0]:e.user.lang,n=this.contentTranslate();return n[t]?n[t]:n.ru}},{key:"contentTranslate",value:function(){return{ru:{title:this.data.settings.title||"",text:this.data.settings.text||"",btnSubscribe:"Подписаться"},en:{title:"Please subscribe to get our notifications <br /> while you’re away",text:"We will send you only relevant and precise <br /> notifications just in time",btnSubscribe:"Subscribe"}}}},{key:"isHideTemplates",value:function(e){return"link"===e.properties.styles.type?'style="display: none;"':""}},{key:"templates",value:function(e){var t=this.prefix,n=this.isHideTemplates(e),i=this.mainTemplates(t,e,n);return i}},{key:"mainTemplates",value:function(t,n,i){var r=e.utilites.getPWUrl(n.properties.type,"widgets"),s="true"===e.IS_WHITE_LABEL?"":'<div class="'+t+'-popup__copyright"><a id="'+t+'-popup__link" target="_blank" href="'+r+'"> powered by <svg xmlns="http://www.w3.org/2000/svg" class="'+t+'-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"/></svg> PUSH.WORLD</a></div>';return'<div id="'+t+'-popup" class="'+t+"-popup "+t+'-widgets">\n                <div class="'+t+'-popup__block">\n                    <div class="'+t+'-popup__pre">\n                        <div class="'+t+'-popup__wrapp">\n                            <div class="'+t+'-popup__inner">\n                                <div class="'+t+'-popup__header">\n                                    <div class="'+t+'-popup__logo">\n                                        <img class="'+t+'-popup__img" src="'+this.logo+'" alt="'+this.name+'" />\n                                    </div>\n                                </div>\n                                <div class="'+t+'-popup__content">\n                                    <div class="'+t+'-popup__title">'+this.content.title+'</div>\n                                    <div class="'+t+'-popup__text">'+this.content.text+'</div>\n                                    <div id="'+t+'-popup__subscribe" class="'+t+'-popup__button">'+this.content.btnSubscribe+'</div>\n                                </div>\n                                <div id="'+t+'-popup__close" class="'+t+'-popup__close"></div>\n                                '+s+'\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="'+t+'-popup__fade"></div>\n            </div>'}}]),t}())}},{}],54:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.prefix=e.namespace.prefix,this.logo=e.elements.logo,this.name=e.elements.name}return i(t,[{key:"create",value:function(t){var n=this;t&&(this.data=t,e.utilites.detectPrivateMode(function(e){e||n.render()}))}},{key:"render",value:function(){var e=this.templates(this.data),t=document.body;this.clean(),e=e.replace(/\r\n|\r|\n/gi,"").replace(/\s{2,}/gi," "),t.insertAdjacentHTML("beforeEnd",e),this.eventWidgets()}},{key:"clean",value:function(){var t=this.prefix+"-unblock";e.utilites.cleanWidget(t)}},{key:"destroy",value:function(t){e.utilites.destroyWidget(t)}},{key:"eventWidgets",value:function(){var t=this,n=document.getElementById(this.prefix+"-unblock"),i=n.querySelector("."+this.prefix+"-unblock__bubble"),r=n.querySelector("."+this.prefix+"-unblock__button"),s=this.data.triggers.type,o=this.data.properties.type,a=void 0;e.utilites.setStataData({event_id:"unblock_widget_view",source:o,trigger:s}),n&&r&&i&&(n.addEventListener("mouseover",function(e){e.preventDefault(),clearTimeout(a),i.classList.add(t.prefix+"-active")}),n.addEventListener("mouseleave",function(e){e.preventDefault(),clearTimeout(a),a=setTimeout(function(){i.classList.remove(t.prefix+"-active")},1e3)}),r.addEventListener("click",function(n){n.preventDefault(),e.utilites.setStataData({event_id:"unblock_widget_click",source:o,trigger:s}),t.showInstruction(n)}))}},{key:"showInstruction",value:function(t){var n=this.data.triggers.type,i=this.data.properties.type;if("https"===e.type){var r=e.namespace.prefix,s=e.getSystems(),o=s.os.toLowerCase().replace(/\s{1,}/gi,""),a=s.browser.toLowerCase().replace(/\s{1,}/gi,"");if(document.body.querySelector("."+r+"-unblock__instruction"))return;var u=this.instructionTemplate(r,o,a);document.body.insertAdjacentHTML("beforeEnd",u),this.closeListener(r),window.localStorage.setItem("pw-unblock_view",Date.now())}else e.subscription.init({event:t,source:i,trigger:n,type:"unblock"});e.utilites.setStataData({event_id:"unblock_manual_view",source:i,trigger:n})}},{key:"closeListener",value:function(e){var t=this,n=document.getElementById(e+"-unblock__close"),i=document.getElementById(e+"-unblock__instruction").querySelector("."+e+"-unblock__overlay");n&&i&&(n.addEventListener("click",function(n){t.closeHandler(n,e)}),i.addEventListener("click",function(n){t.closeHandler(n,e)}))}},{key:"closeHandler",value:function(t,n){var i=this.data.triggers.type,r=this.data.properties.type;t.preventDefault(),this.destroyInstruction(n),e.utilites.setStataData({event_id:"unblock_manual_close",source:r,trigger:i})}},{key:"destroyInstruction",value:function(e){var t=document.getElementById(e+"-unblock__instruction");t&&t.remove()}},{key:"templates",value:function(t){var n=e.namespace.prefix;return this.mainTemplates(n,t)}},{key:"mainTemplates",value:function(t,n){var i=e.utilites.getPWUrl(n.properties.type,"widgets"),r='<svg xmlns="http://www.w3.org/2000/svg" class="'+t+'-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"/></svg>',s="true"===e.IS_WHITE_LABEL?"":'<a id="'+t+'-unblock__link" class="'+t+'-unblock__copyright" target="_blank" href="'+i+'">'+r+"</a>";return'<div id="'+t+'-unblock" class="'+t+"-unblock "+t+"-widgets "+t+"-unblock--"+n.settings.position+'"><svg version="1.1" class="'+t+'-unblock__icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 525.153 525.153" width="80" xml:space="preserve" enable-background="new 0 0 525.153 525.153"><g><path d="M139.165 51.421l-35.776-35.864C43.413 61.202 3.742 132.185 0 212.402h50.174C53.916 145.992 88.051 87.766 139.165 51.421zM474.979 212.402h50.174c-3.742-80.217-43.413-151.2-103.586-196.845l-35.863 35.864C437.102 87.766 471.237 145.992 474.979 212.402zM425.592 224.984c0-77-53.391-141.463-125.424-158.487V49.408c0-20.787-16.761-37.614-37.592-37.614s-37.592 16.827-37.592 37.614v17.089C152.951 83.521 99.56 148.005 99.56 224.984v137.918l-50.152 50.108v25.076h426.336v-25.076l-50.152-50.108C425.592 362.902 425.592 224.984 425.592 224.984zM262.576 513.358c3.523 0 6.761-0.219 10.065-1.007 16.236-3.238 29.824-14.529 36.06-29.627 2.516-5.952 4.048-12.494 4.048-19.54H212.402C212.402 490.777 234.984 513.358 262.576 513.358z"></g></svg>'+this.bubbleTemplate(t)+s+"</div>"}},{key:"bubbleTemplate",value:function(e){return'<div class="'+e+'-unblock__bubble">\n                <div class="'+e+'-unblock__text">Вы заблокировали возможность получать пуш уведомления</div>\n                <div class="'+e+'-unblock__button">Разблокировать</div>\n            </div>'}},{key:"instructionTemplate",value:function(e,t,n){var i={windows:{chrome:"1vt40YgwoBM",firefox:"Djfa2HPWDU8",yandex:"MHbOHXi0qIc"},macos:{chrome:"xEgXiObI8ZE",firefox:"KmxUfYpPZEc",yandex:"nbRoEi_-5PY"},android:{chrome:"tjPSsMcXo0A",firefox:"bySvuP6EJPA",yandex:"TGgGUj9YUpk"}},r=t in i?t:"windows",s=n in i[r]?n:"chrome",o="android"===r?"180%":"yandex"===s?"56%":"74%",a=i[r][s];return'<div id="'+e+'-unblock__instruction" class="'+e+'-unblock__instruction">\n                        <div class="'+e+'-unblock__overlay"></div>\n                        <div class="'+e+'-unblock__video--wrap">\n                            <div class="'+e+'-unblock__video">\n                                <div id="'+e+'-unblock__close" class="'+e+'-unblock__close"></div>\n                                <div style="width:100%;height:0px;position:relative;padding-bottom:'+o+';">\n                                    <iframe src="https://www.youtube.com/embed/'+a+"?loop=1&amp;playlist="+a+'" frameborder="0" width="100%" height="100%" allowfullscreen style="width:100%;height:100%;position:absolute;left:0px;top:0px;overflow:hidden;"></iframe>\n                                </div>\n                                <div class="'+e+'-unblock__text">Чтобы разблокировать подписку, выполните с этим сайтом действия, как на видео</div>\n                            </div>\n                        </div>\n                    </div>'}}]),t}())}},{}],55:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e,t){return new(function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.subscribe=!1,this.init()}return i(n,[{key:"init",value:function(){var e=this,t=this.groups();this.listener(),t.forEach(function(t){var n="trigger_"+t.type;"function"==typeof e[n]&&e[n](t.data)})}},{key:"listener",value:function(){var e=this;document.addEventListener("landing-message",function(){e.subscribe=!0},!1)}},{key:"groups",value:function(){var e=this,n=[],i=[];return t.forEach(function(t){i.length?-1===i.indexOf(t.type)?(n.push(e.createGroup(t,"type")),i.push(t.type)):n.forEach(function(n){n.type===t.type&&n.data.push(e.createGroup(t,"value"))}):(n.push(e.createGroup(t,"type")),i.push(t.type))}),n}},{key:"createGroup",value:function(e,t){var n={};switch(t){case"type":n.type=e.type,n.data=[{value:e.value,event:e.event,status:!1}];break;case"value":n.value=e.value,n.event=e.event,n.status=!1}return n}},{key:"trigger_custom",value:function(e){var t=this;this.documentReady(function(){document.addEventListener("pw:request_permissions",function(n){var i=n.detail;e.forEach(function(e){var n=e.event;if(i){var r=i.type;r&&r===n&&t.fireEvent(e)}else"native-custom"===n&&t.fireEvent(e)})},!1)})}},{key:"trigger_timeout",value:function(e){var t=this,n=[];if(e.forEach(function(e){e.value=1e3*e.value,n.push(e.value)}),n){var i=this.maxCount(n);this.documentReady(function(){t.timer(e,i)})}}},{key:"timer",value:function(e,t){var n=this,i=1,r=t/100;setTimeout(function t(){i<r&&setTimeout(t,100),n.timerEvent(e,i,100),i++},100)}},{key:"timerEvent",value:function(e,t,n){var i=this,r=t*n;e.forEach(function(e){e.value<=r&&!e.status&&(e.status=!0,i.fireEvent(e))})}},{key:"fireEvent",value:function(t){e.utilites.debugConsole({name:"Debug (class Triggers -> fireEvent)",params:{data:t},time:!0});var n=~t.event.search(/button/gi);if(!this.subscribe||n){var i=t.event,r=new CustomEvent(i,{bubbles:!0,target:document,detail:{name:i,value:t.value}});document.dispatchEvent(r)}}},{key:"maxCount",value:function(e){return Math.max.apply(Math,e)}},{key:"minCount",value:function(e){return Math.min.apply(Math,e)}},{key:"trigger_mouseout",value:function(e){var t=this;document.getElementsByTagName("HTML")[0].addEventListener("mouseleave",function(n){"HTML"===n.target.tagName&&e.forEach(function(e){e.status||(e.status=!0,t.fireEvent(e))})},!1)}},{key:"trigger_positionscroll",value:function(e){var t=this;this.documentReady(function(){t.positionScrollInit(e)})}},{key:"documentReady",value:function(e){if("function"==typeof e)return"loading"!==document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})}},{key:"positionScrollInit",value:function(e){var t=this,n=t.getStartPoints();this.popUpInit(n,e),window.addEventListener("scroll",function(){t.popUpInit(n,e)}),window.addEventListener("resize",function(){n=t.getStartPoints(),t.popUpInit(n,e)})}},{key:"popUpInit",value:function(e,t){var n=this,i=e.centerStart,r=e.bottomStart,s=n.getScrollTop(),o={top:s<=i,center:s>=i&&s<=r,bottom:s>=r};t.forEach(function(e){!e.status&&o[e.value]&&(e.status=!0,n.fireEvent(e))})}},{key:"getStartPoints",value:function(){var e=document.body,t=document.documentElement,n=window.innerHeight||t.clientHeight||e.clientHeight,i=0,r=(i=void 0!==document.height?document.height:Math.max(e.scrollHeight,t.scrollHeight,e.offsetHeight,t.offsetHeight,e.clientHeight,t.clientHeight))>n?i-n:0;return{centerStart:Math.round(r/3),bottomStart:Math.round(r/1.5)}}},{key:"getScrollTop",value:function(){if("undefined"!=typeof pageYOffset)return pageYOffset;var e=document.body,t=document.documentElement;return(t=t.clientHeight?t:e).scrollTop}},{key:"trigger_view_depth",value:function(e){var t=window.location.pathname;this.depthSavePath(e,t,"pw-depth")}},{key:"depthSavePath",value:function(e,t,n){var i=this,r=this.depthCheckPath(n),s=void 0;r?(-1===(r=JSON.parse(r)).paths.indexOf(t)&&(r.paths.push(t),this.depthSetPath(n,r)),e.forEach(function(e){s=r.paths.length,Number(e.value)===s&&!e.status&&(r.widget.forEach(function(t){t.event===e.event&&!t.status&&(t.status=e.status=!0,i.fireEvent(e))}),i.depthSetPath(n,r))})):this.depthSetPath(n,{paths:[t],widget:e})}},{key:"depthSetPath",value:function(e,t){window.sessionStorage.setItem(e,JSON.stringify(t))}},{key:"depthCheckPath",value:function(e){return window.sessionStorage.getItem(e)}},{key:"trigger_retention",value:function(e){var t=this,n=localStorage.getItem("pw-retentions")||0;if(sessionStorage.getItem("pw-session"))window.addEventListener("storage",function(e){"pw-session"===e.key&&localStorage.setItem("pw-session",sessionStorage.getItem("pw-session"))});else{window.addEventListener("storage",function(e){"pw-session"===e.key&&sessionStorage.setItem("pw-session",e.oldValue)});var i=t.createSessionId();localStorage.setItem("pw-session",i),setTimeout(function(){sessionStorage.getItem("pw-session")||(sessionStorage.setItem("pw-session",i),localStorage.setItem("pw-retentions",(++n).toString()),e.forEach(function(e){e.status||n%e.value!=0||(e.status=!0,t.fireEvent(e))}),window.addEventListener("storage",function(e){"pw-session"===e.key&&localStorage.setItem("pw-session",sessionStorage.getItem("pw-session"))}))},1e3)}}},{key:"createSessionId",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}]),n}())}},{}],56:[function(e,t,n){"use strict";var i,r,s,o,a,u=window.pw||{};window,document,u.version="2.1.22",u.core=(i=e("core"),r={},s="https",o="false",a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i),t}(),r.init=function(){return new a},r),u.core.init()},{core:36}]},{},[56]);!function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return e[i].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=window.pw||{};!function(e,t){i.custom_handlers=function(){var e=n(1)(),t=JSON.parse('{"code":"e924faaced168336f02f222c66d47f50a81954df26d071f4d30bfad270283120","name":"www.banggood.com","host":"banggood.com","allowSubDomain":true,"allowOtherDomains":false,"scriptVersion":"default","pw_abandoned_session":[{"description":"Смотрел категории, не переходил в карточки товара. Покинул сайт без добавления товара в корзину.","init_event":"pw:custom_handlers:start","event_id":"abandoned_session","trigger_ids":[3722],"min_time":0,"send_longest_view":false,"init_conditions":false,"context":[{"urls":false,"node_conditions":false,"delay":false,"placeholders":[{"text":"category_title","type":"selector","options":{"query":".inhere li:last-child h3","attribute":"innerText"},"functions":false,"default_value":"products"}],"image":false,"image_large":false}],"interrupt_events":[{"event":"pw:customer_events:event","details":[{"event_id":"abcart","cart_is_empty":false}],"stop":true},{"event":"pw:customer_events:abandoned_session","details":[{"event_id":"start","trigger_id":3724}],"stop":true}],"disabled":false},{"description":"Смотрел товары, покинул сайт без добавления товара в корзину и оформления заказа.","init_event":"pw:custom_handlers:start","event_id":"abandoned_session","trigger_ids":[3724],"min_time":0,"send_longest_view":false,"init_conditions":[{"urls":false,"black_list":false,"node_conditions":[{"type":"exists","query":".add_to_cart"}],"storage_conditions":false}],"context":[{"urls":false,"node_conditions":false,"delay":false,"placeholders":[{"text":"product_title","type":"selector","options":{"query":".title_strong","attribute":"innerText"},"functions":false,"default_value":"product"}],"image":false,"image_large":{"type":"selector","options":{"query":"#landingImage","attribute":"src"},"functions":false,"default_value":false}}],"interrupt_events":[{"event":"pw:customer_events:event","details":[{"event_id":"abcart","cart_is_empty":false}],"stop":true}],"disabled":false}],"pw_abandoned_cart":[{"init_event":"pw:custom_handlers:start","event_id":"abcart","trigger_ids":[3726],"init_conditions":[{"urls":[{"type":"href","search":"/shopping_cart.html","comparing_type":"contain","params":false}],"black_list":false,"node_conditions":false,"storage_conditions":false}],"cart_items":{"type":"contentCountLength","nodeParent":"body","nodeChild":".newcart_main ul","emptyWhenAbsent":true,"emptyCartValue":"0","observer":{"properties":["childList","subtree"]}},"context":[{"urls":false,"node_conditions":false,"delay":false,"placeholders":[{"text":"product_title","type":"selector","options":{"query":".newcart_main ul:last-child .title","attribute":"innerText"},"functions":false,"default_value":"Complete your order!"}],"image":false,"image_large":{"type":"selector","options":{"query":".newcart_main ul:last-child img","attribute":"src"},"functions":false,"default_value":false}}],"success_order":false,"disabled":false},{"init_event":"pw:custom_handlers:start","event_id":"abcart","trigger_ids":[3726],"init_conditions":[{"urls":false,"black_list":[{"type":"href","search":"/shopping_cart.html","comparing_type":"contain","params":false}],"node_conditions":false,"storage_conditions":false}],"cart_items":{"type":"contentCount","nodeParent":"#cart_nums_id","emptyWhenAbsent":true,"emptyCartValue":"0","observer":{"properties":["childList","subtree"]}},"context":[{"urls":false,"node_conditions":false,"delay":false,"placeholders":[{"text":"product_title","type":"selector","options":{"query":".title_strong","attribute":"innerText"},"functions":false,"default_value":"Complete your order!"}],"image":false,"image_large":{"type":"selector","options":{"query":"#landingImage","attribute":"src"},"functions":false,"default_value":false}}],"success_order":false,"disabled":false}]}'),s={};return s.init=function(){var s=this,r=!!i.isCustomHandlersRunning;if(t&&!r){if(i.isCustomHandlersRunning=!0,!t.allowOtherDomains&&!e.isHostAllowed(t.host,t.allowSubDomain))return void e.debugConsole("Запуск на этом домене запрещен.");var o=t.pw_custom_widget||null,a=t.pw_widget_initialization||null,c=t.pw_segmentation||null,u=t.pw_node_ready||null,l=t.pw_incomplete_action||null,d=t.pw_abandoned_cart||null,h=t.pw_installment||null,f=t.pw_abandoned_session||null,v=t.pw_context||null,g=t.pw_goals||null;o&&(this.customWidgetHandlers=[],o.forEach(function(e){!0!==e.disabled&&s.customWidgetHandlers.push(n(2)(e))})),a&&(this.widgetInitializationHandlers=[],a.forEach(function(e){!0!==e.disabled&&s.widgetInitializationHandlers.push(n(3)(e))})),c&&(this.segmentationHandlers=[],c.forEach(function(e){!0!==e.disabled&&s.segmentationHandlers.push(n(4)(e))})),l&&(this.incompleteActionHandlers=[],l.forEach(function(e){!0!==e.disabled&&s.incompleteActionHandlers.push(n(5)(e))})),d&&(this.abandonedCartHandlers=[],d.forEach(function(e){!0!==e.disabled&&s.abandonedCartHandlers.push(n(6)(e))})),f&&(this.abandonedSessionHandlers=[],f.forEach(function(e){!0!==e.disabled&&s.abandonedSessionHandlers.push(n(7)(e))})),u&&(this.nodeReadyHandlers=[],u.forEach(function(e){!0!==e.disabled&&s.nodeReadyHandlers.push(n(8)(e))})),h&&(this.installmentHandlers=[],h.forEach(function(e){!0!==e.disabled&&s.installmentHandlers.push(n(9)(e))})),v&&(this.contextHandlers=[],v.forEach(function(e){!0===e.is_enabled&&s.contextHandlers.push(n(10)(e))})),g&&(this.reachGoalsHandlers=[],g.forEach(function(e){!0===e.is_enabled&&s.reachGoalsHandlers.push(n(11)(e))})),e.dispatchEvent("pw:custom_handlers:ready",{custom_handlers:e.isHostAllowed(t.host,t.allowSubDomain)})}},s}(),t.addEventListener("pw:custom_handlers:embed",function(){i.custom_handlers.init()})}(window,document)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e),this.OBSERVER_PROPS=["childList","attributes","characterData","subtree"]}return s(e,[{key:"checkPermissions",value:function(e){return e.some(function(e){return window.pw.permission===e})}},{key:"isHostAllowed",value:function(e,t){var n=document.location.host;if(!0===t){return new RegExp(""+this.replaceStrReg(e),"gi").test(n)}return n===e}},{key:"compareViaComparingType",value:function(e,t,n){var i=new RegExp(this.replaceStrReg(e),"gi");switch(n){case"equal":return e===t;case"notEqual":return e!==t;case"contain":return i.test(t);case"notContain":return!i.test(t);default:return!1}}},{key:"checkURLs",value:function(e){var t=this;return!1===e||e.some(function(e){var n="";switch(e.type){case"href":n=window.location.href;break;case"protocol":n=window.location.protocol.replace(/:$/,"");break;case"host":n=window.location.host;break;case"path":n=window.location.pathname;break;case"params":n=window.location.search;break;case"hash":n=window.location.hash;break;case"port":n=window.location.port;break;default:return!1}if(!t.compareViaComparingType(e.search,n,e.comparing_type))return!1;if(!e.params)return!0;var i=t.getUrlParams(window.location.href);return e.params.every(function(e){return t.compareViaComparingType(e.value,i[e.name],e.comparing_type)})})}},{key:"getUrlParams",value:function(e){var t={};return e.replace(/^.*\?/,"").split("&").forEach(function(e){e=e.split("="),2===e.length&&(t[e[0]]=e[1])}),t}},{key:"getParamURLs",value:function(e){var t=this.getUrlParams(window.location.href);return!!Object.hasOwnProperty.call(t,e)&&t[e]}},{key:"replaceStrReg",value:function(e){var t=["?","/","#","="],n=e;return t.forEach(function(e){n=n.replace(e,"\\"+e)}),n}},{key:"initDomObserver",value:function(e,t,n){var i=function(){n(e)};if(this.isMutationObserver){var s=new MutationObserver(i);return s.observe(e,t),s}}},{key:"disconnectObservers",value:function(e){e.forEach(function(e){e.observer.disconnect()})}},{key:"renewObservers",value:function(e){e.forEach(function(e){e.observer.observe(e.target,e.config)})}},{key:"prepareObserverProperties",value:function(e,t){var n=this,i={};return e.forEach(function(e){i[e]=n.OBSERVER_PROPS.includes(e)}),t&&(i.attributeFilter=t),i}},{key:"cleaningDataParsing",value:function(e,t){if(0===e.length)return 0;var n=e.replace(/[()]/gi,"").replace(/<!--.*?-->/g,"");if(t){var i=new RegExp(t,"gi"),s=i.exec(n);n=null!==s?s[0]:0}return parseInt(n)}},{key:"parseDOMElements",value:function(e){return(new DOMParser).parseFromString(e,"text/html")}},{key:"linksStyles",value:function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t.appendChild(n)}},{key:"dispatchEvent",value:function(e,t){var n=new CustomEvent(e,{bubbles:!0,target:document,detail:t});document.dispatchEvent(n)}},{key:"isHelperHasMethod",value:function(e){try{return e in this&&"function"==typeof this[e]}catch(e){return!1}}},{key:"dateWeekTimestamp",value:function(e){return 86400*e*1e3}},{key:"getContext",value:function(e,t,n,i){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=void 0;switch(e){case"selector":if(t.query&&t.attribute){s=s||document;var o="length"===t.attribute?s.querySelectorAll(t.query):s.querySelector(t.query);o&&(r=this.getNodeAttribute(o,t.attribute))}break;case"storage":if(t.storage)switch(t.storage){case"localStorage":this.isLocalStorage&&(r=localStorage.getItem(t.key));break;case"sessionStorage":this.isSessionStorage&&(r=sessionStorage.getItem(t.key));break;case"cookie":r=this.getCookie(t.key)}break;case"function":t.name&&this.isHelperHasMethod(t.name)&&(r=this[t.name](t.arguments));break;case"location":if(t.location)switch(t.location){case"param":t.param&&(r=this.getParamURLs(t.param));break;case"host":r=window.location.host;break;case"subdomain":r=t.depth?this.getSubdomain(t.depth):this.getSubdomain();break;case"path":r=window.location.pathname}break;case"window":t.property&&(r=this.getObjectProperty(window,t.property),r=r?r.toString():r)}if(r&&!i.leave_symbol&&(r=r.replace(/[%]/g,"")),r&&i){if(i.regMatch)try{var a=new RegExp(i.regMatch,"gi"),c=a.exec(r);r=!!c&&c[1]}catch(e){r=!1}if(i.regRules&&(r=r.replace(new RegExp(atob(i.regRules[0])),i.regRules[1])),!0===i.addDomain&&(r=document.location.origin+r),!0===i.addDomainWithSlash&&(r=document.location.origin+"/"+r),!0===i.cleanTags&&(r=r.replace(/<[^>]+>/g,"")),!0===i.addProtocol){/^((http|https):\/\/)/.test(r)||(r=document.location.protocol+r)}i.normalizeText&&(r=this.normalizeText(r)),!0===i.encodeURIComponent&&(r=encodeURIComponent(r)),i.sliceEncoded&&(r=!0===i.encodeURIComponent?this.sliceEncodedString(r,i.sliceEncoded):this.sliceEncodedString(encodeURIComponent(r),i.sliceEncoded)),i.slice&&i.slice<r.length&&(r=r.slice(0,i.slice)),i.get_json_property&&(r=this.getObjectProperty(JSON.parse(r),i.get_json_property)),i.formatAsNumber&&r&&(r=r.replace(",",".").replace(/([^\d.])/g,""))}return r||n}},{key:"sliceEncodedString",value:function(e,t){if(e.length<=t)return e;var n=decodeURIComponent(e).slice(0,-1);return e=encodeURIComponent(n),this.sliceEncodedString(e,t)}},{key:"getObjectProperty",value:function(e,t){var n=t.split("."),i=!1;switch(n.length){case 1:i=e[n[0]];break;case 2:i=e[n[0]][n[1]];break;case 3:i=e[n[0]][n[1]][n[2]];break;case 4:i=e[n[0]][n[1]][n[2]][n[3]];break;case 5:i=e[n[0]][n[1]][n[2]][n[3]][n[4]];break;case 6:i=e[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]}return i}},{key:"normalizeText",value:function(e){return e.length>1&&(e=e.toLowerCase(),e=e.charAt(0).toUpperCase()+e.slice(1)),e}},{key:"getArgument",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var s=n.find(function(t){return t.name===e});return s?s.value:null}},{key:"getSubdomain",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=document.location.hostname.split(".");return e&&t[e]?t[e]:t[0]}},{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):null}},{key:"setCookie",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i="";if(n){var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3),i="; expires="+s.toUTCString()}document.cookie=e+"="+(t||"")+i+"; path=/"}},{key:"checkNodeContent",value:function(e){var t=this,n=e.type,i=e.query,s=e.attribute,r=e.match,o=document.querySelector(i),a=void 0,c=void 0;switch(n){case"not_exists":return!o;case"exists":return!!o;case"visible":return c=i.split(", "),c.some(function(e){return t.isVisible(document.querySelector(e))});case"content_not_match":return!!o&&(!(a=this.getNodeAttribute(o,s))||!new RegExp(""+r,"gi").test(a));case"content":default:return!!o&&(!!(a=this.getNodeAttribute(o,s))&&new RegExp(""+r,"gi").test(a))}}},{key:"isVisible",value:function(e){return!!e&&"none"!==getComputedStyle(e).display}},{key:"isDelayedContext",value:function(e){return!!e.delay}},{key:"getNodeAttribute",value:function(e,t){var n=void 0,i=void 0,s=void 0;switch(t){case"lastNode":n=e.lastChild.textContent;break;case"firstNode":n=e.firstChild.textContent;break;case"innerHTML":n=e.innerHTML;break;case"background-image":n=getComputedStyle(e)["background-image"].slice(4,-1).replace(/"/g,"");break;case"innerText":n=e.innerText;break;case"currentSrc":n=e.currentSrc;break;case"activeOption":i=e.value,s=e.querySelector("option[value='"+i+"']"),n=!!s&&s.innerText;break;case"textContent":n=e.textContent;break;case"value":n=e.value;break;case"length":n=e.length.toString();break;default:n=e.getAttribute(t)}return n&&(n=n.replace(/[\r\n\t]/g," ").replace(/ {1+}/g," ").trim()),n}},{key:"checkInterruptEventMatch",value:function(e,t){return!!e&&!!e.some(function(e){return Object.keys(e).every(function(n){return Object.hasOwnProperty.call(t.detail,n)&&e[n]===t.detail[n]})})}},{key:"checkInterruptDataInSession",value:function(e,t,n){if(!this.isLocalStorage)return!0;var i=this.getSessionData(e[0],t);return!i||((new Date).getTime()-i.timestamp>n?(e.forEach(function(e){window.localStorage.removeItem("pw_"+t+"_"+e)}),!0):i&&!0===i.stop?(this.debugLog("Отмена запуска для "+e.join(", ")+" из-за настроек в сессии"),!1):i)}},{key:"setSessionData",value:function(e,t,n){if(this.isLocalStorage){var i=this.getSessionData(t,n);if(!i)return void this.storeSessionData(e,t,n);this.storeSessionData(Object.assign(i,e),t,n)}}},{key:"storeSessionData",value:function(e,t,n){if(this.isLocalStorage){var s=(new Date).getTime();window.localStorage.setItem("pw_"+n+"_"+t,JSON.stringify(i({},e,{timestamp:s})))}}},{key:"getSessionData",value:function(e,t){if(!this.isLocalStorage)return!1;var n=window.localStorage.getItem("pw_"+t+"_"+e);return!!n&&JSON.parse(n)}},{key:"changeAttributesCheck",value:function(e,t,n){if("string"==typeof t)return!!Object.hasOwnProperty.call(n,t)&&n[t]===this.getNodeAttribute(e,t);if(Array.isArray(t)){for(var i in t){if(!Object.hasOwnProperty.call(n,i))return!1;if(n[i]!==this.getNodeAttribute(e,i))return!1}return!0}return!1}},{key:"setupDelayedContext",value:function(e,t){var n=this;if(e.delay.timeout&&setTimeout(function(){t()},1e3*e.delay.timeout),e.delay.observers&&e.delay.observers.length&&this.isMutationObserver){var i=[],s=setTimeout(function(){i.forEach(function(e){e.disconnect()}),t()},5e3);e.delay.observers.forEach(function(e){var r=document.querySelector(e.nodeParent);if(r){var o=n.prepareObserverProperties(e.properties),a=n.initDomObserver(r,o,function(){var o=!1,a=[],c=r.outerHTML;if(e.nodeChild){a=n.parseDOMElements(c).querySelectorAll(e.nodeChild)}switch(e.type){case"nodeExists":a.length&&(o=!0);break;case"changeAttributes":if(!e.check)break;a.length?a.forEach(function(t){o||(o=n.changeAttributesCheck(t,e.check,e.expect))}):o=n.changeAttributesCheck(r,e.check,e.expect)}o&&(i.forEach(function(e){e.disconnect()}),clearTimeout(s),t())});i.push(a)}})}return!1}},{key:"checkInitConditions",value:function(e){var t=this;return!e||e.some(function(e){return(!e.black_list||!t.checkURLs(e.black_list))&&(!(e.urls&&!t.checkURLs(e.urls))&&(e.node_conditions?e.node_conditions.every(function(e){return t.checkNodeContent(e)}):!e.storage_conditions||e.storage_conditions.every(function(e){return t.checkStorage(e)})))})}},{key:"checkStorage",value:function(e){var t=e.type,n=e.key,i=e.value,s=e.init_if_not_exists,r=void 0;switch(t){case"cookies":return r=document.cookie.match(new RegExp("(?:^|; )"+n.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")),r?decodeURIComponent(r[1])===i:s;case"local_storage":return r=localStorage.getItem(n),r?r===i:s;case"session_storage":return r=sessionStorage.getItem(n),r?r===i:s;default:return!0}}},{key:"checkContext",value:function(e){var t=this;if(!e)return!1;var n=!0,i=!1;return e.some(function(e,s){var r=e.urls,o=e.node_conditions;return!!t.checkURLs(r)&&(!(o&&!(n=o.some(function(e){return t.checkNodeContent(e)})))&&(i=s,!0))}),i}},{key:"debugLog",value:function(e){this.isLocalStorage&&window.localStorage.getItem("pw-debug")&&console.log(e)}},{key:"isMutationObserver",get:function(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}},{key:"isLocalStorage",get:function(){try{return"localStorage"in window&&"function"==typeof window.localStorage.getItem&&"function"==typeof window.localStorage.setItem}catch(e){return!1}}},{key:"isSessionStorage",get:function(){try{return"sessionStorage"in window&&"function"==typeof window.sessionStorage.getItem&&"function"==typeof window.sessionStorage.setItem}catch(e){return!1}}}]),e}();e.exports=function(){return new r}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e.exports=function(e){var t=n(1)();return new(function(){function e(t){i(this,e),this.config=t,this.widget=t.widget,this.context_index=-1,this.init()}return r(e,[{key:"init",value:function(){if(this.config&&this.checkPermissions&&this.checkInitCondition){this.context_index>-1&&this.setupWidgetContext();var e=this.widget.delay;e>0?this.deferredWidgetIitialization(e):this.createCustomWidget()}}},{key:"setupWidgetContext",value:function(){this.context=this.config.context[this.context_index],this.widget=Object.assign(this.widget,this.context.widget)}},{key:"deferredWidgetIitialization",value:function(e){var t=this,n=1,i=e,s=function e(){n<i?setTimeout(e,1e3):t.createCustomWidget(),n++};setTimeout(s,1e3)}},{key:"createCustomWidget",value:function(){var e=this;this.breakTimeoutCustomWidgets({get:function(n){n&&n>Date.now()||(t.linksStyles(e.widget.css),e.cleanCustomWidget(),document.body.insertAdjacentHTML("beforeEnd",e.templateReplaceData()),e.customWidgetEvents())}})}},{key:"breakTimeoutCustomWidgets",value:function(e){if(t.isLocalStorage){var n="breakTimeoutCustomWidgets",i=e.get,s=e.set;s&&window.localStorage.setItem(n,s),i&&"function"==typeof i&&i(window.localStorage.getItem(n))}}},{key:"cleanCustomWidget",value:function(){var e=document.getElementById(this.config.element_id);e&&e.remove()}},{key:"templateReplaceData",value:function(){var e=this.context,t=this.widget,n=this.customWidgetTemplate(t.template);if(e&&e.placeholders){var i=e.placeholders,s=void 0,r=void 0;i.forEach(function(e){var t=e.query,i=e.text,o=e.attribute,a=e.default_value;r=!1,t&&o&&(s=document.querySelector(t))&&(r="innerHTML"===o?s.innerHTML:s.getAttribute(o)),r=r||a,n=n.replace(new RegExp(""+i,"gi"),r)})}return n.replace(/\n/gi,"").replace(/ {2}/gi," ")}},{key:"customWidgetTemplate",value:function(e){switch(e){case"default.confirm.widget":return this.defaultConfirmWidgetTemplate(this.widget);case"alternative.confirm.widget":return this.alternativeConfirmWidgetTemplate(this.widget);case"default.label.widget":return this.defaultLabelWidgetTemplate(this.widget);case"customizable.confirm.widget":return this.customizableConfirmWidgetTemplate(this.widget);default:return this.defaultConfirmWidgetTemplate(this.widget)}}},{key:"defaultConfirmWidgetTemplate",value:function(e){var t=!0===e.isWhiteLabel?"":'<a id="pw-confirm-custom__link" target="_blank" href="https://push.world/"> powered by <svg xmlns="http://www.w3.org/2000/svg" class="pw-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"/></svg> PUSH.WORLD</a>';return'<div id="pw-confirm-custom" class="pw-confirm-custom pw-confirm-custom--left pw-widgets">\n                    <div class="pw-confirm-custom__wrapp">\n                        '+(!1!==e.image?'<div class="pw-confirm-custom__logo"><img class="pw-confirm-custom__img" src="'+e.image+'" alt="'+e.name+'" /></div>':"")+'\n                        <div class="pw-confirm-custom__content">\n                            <div class="pw-confirm-custom__title">'+e.title+'</div>\n                            <div class="pw-confirm-custom__text">'+e.description+'</div>\n                            <div class="pw-confirm-custom__btns">\n                                <div id="pw-confirm-custom__close" data-pw-action="close" class="pw-confirm-custom__btn pw-confirm-custom__btn--white">'+e.btnClose.text+'</div>\n                                <div id="pw-confirm-custom__subscribe" data-pw-action="subscribe" class="pw-confirm-custom__btn pw-confirm-custom__btn--blue">'+e.btnSubscribe.text+'</div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="pw-confirm-custom__footer">\n                      '+t+"\n                  </div>\n                </div>"}},{key:"alternativeConfirmWidgetTemplate",value:function(e){var t=!0===e.isWhiteLabel?"":'<a id="pw-confirm-custom__link" target="_blank" href="https://push.world/"> powered by <svg xmlns="http://www.w3.org/2000/svg" class="pw-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"/></svg> PUSH.WORLD</a>';return'<div id="pw-confirm-custom" class="pw-confirm-custom pw-confirm-custom--left pw-widgets">\n                    <div class="pw-confirm-custom__wrapp"  style="background-image: url(\''+e.backgroundImage+'\');">\n                        <div id="pw-confirm-custom__close-sign" class="pw-confirm-custom__close-sign" data-pw-action="hide">×</div>\n                        <div class="pw-confirm-custom__content">\n                            <div class="pw-confirm-custom__title">'+e.title+'</div>\n                            <div class="pw-confirm-custom__btns">\n                                <div id="pw-confirm-custom__subscribe" data-pw-action="subscribe" class="pw-confirm-custom__btn pw-confirm-custom__btn--subscribe">'+e.btnSubscribe.text+'</div>\n                                <div id="pw-confirm-custom__close" data-pw-action="close" class="pw-confirm-custom__btn pw-confirm-custom__btn--close">'+e.btnClose.text+'</div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="pw-confirm-custom__footer">\n                      '+t+"\n                  </div>\n                </div>"}},{key:"defaultLabelWidgetTemplate",value:function(e){var t=!0===e.isWhiteLabel?"":'<div class="pw-label__copyright"><a id="pw-label__link" target="_blank" href="https://push.world/?utm_source=local-push-world.firebaseapp.com&amp;utm_medium=label&amp;utm_campaign=push-https&amp;utm_content=e2c05e0946c218e9f096bddf9548d4ec8a6995496849aa0eaf182add44d5ed02&amp;utm_term=widgets&amp;"> powered by <br><svg xmlns="http://www.w3.org/2000/svg" class="pw-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"></path></svg> Push.World</a></div>';return'<div id="pw-label-custom" class="pw-label pw-widgets" data-pw-action=\'subscribe\'>\n                        <img src="'+e.image+'" class="pw-label__icon" alt="">\n                        '+t+"\n                    </div>\n                    "}},{key:"customizableConfirmWidgetTemplate",value:function(e){var t="",n=!0===e.isWhiteLabel?"":'<a id="pw-confirm-custom__link" target="_blank" href="https://push.world/"> powered by <svg xmlns="http://www.w3.org/2000/svg" class="pw-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"/></svg> PUSH.WORLD</a>';return e.btnSubscribe&&!1!==e.btnSubscribe.text&&(t+='<div id="pw-confirm-custom__subscribe" data-pw-action="subscribe" class="pw-confirm-custom__btn pw-confirm-custom__btn--blue">'+e.btnSubscribe.text+"</div>"),e.btnClose&&!1!==e.btnClose.text&&(t+='<div id="pw-confirm-custom__close" data-pw-action="close" class="pw-confirm-custom__btn pw-confirm-custom__btn--white">'+e.btnClose.text+"</div>"),t='<div class="pw-confirm-custom__btns">'+t+"</div>",e.description&&!1!==e.description&&(t='<div class="pw-confirm-custom__text">'+e.description+"</div>"+t),e.title&&!1!==e.title&&(t='<div class="pw-confirm-custom__title">'+e.title+"</div>"+t),t='<div class="pw-confirm-custom__content">'+t+"</div>",e.close_sign&&!1!==e.close_sign&&(t='<div id="pw-confirm-custom__close-sign" class="pw-confirm-custom__close-sign" data-pw-action="hide">×</div>'+t),e.image&&!1!==e.image&&(t='<div class="pw-confirm-custom__logo"><img class="pw-confirm-custom__img" src="'+e.image+'" alt="'+e.name+'" /></div>'+t),t=e.backgroundImage&&!1!==e.backgroundImage?'<div class="pw-confirm-custom__wrapp"  style="background-image: url(\''+e.backgroundImage+"');\">"+t+"</div>":'<div class="pw-confirm-custom__wrapp">'+t+"</div>",t+='<div class="pw-confirm-custom__footer">'+n+"</div>",t='<div id="pw-confirm-custom" class="pw-confirm-custom pw-confirm-custom--left pw-widgets">'+t+"</div>"}},{key:"customWidgetEvents",value:function(){var e=this,n=document.querySelectorAll("[data-pw-action='hide']"),i=document.querySelectorAll("[data-pw-action='close']"),s=document.querySelectorAll("[data-pw-action='subscribe']");this.sendData({event_id:"widget_request"});var r=!!this.context&&this.context.addToCart,o=this.widget.activateBreakTimeout;n.forEach(function(n){n.addEventListener("click",function(n){n.preventDefault(),e.cleanCustomWidget(),o.some(function(e){return"hide"===e})&&e.breakTimeoutCustomWidgets({set:Date.now()+t.dateWeekTimestamp(e.widget.rerun_after)}),r&&e.addToCart("hide",r)})}),i.forEach(function(n){n.addEventListener("click",function(n){n.preventDefault(),e.cleanCustomWidget(),e.sendData({event_id:"widget_deny"}),o&&o.some(function(e){return"close"===e})&&e.breakTimeoutCustomWidgets({set:Date.now()+t.dateWeekTimestamp(e.widget.rerun_after)}),r&&e.addToCart("close",r)})}),s.forEach(function(n){n.addEventListener("click",function(n){n.preventDefault(),e.cleanCustomWidget(),e.sendData({event_id:"widget_allow"}),t.dispatchEvent("pw:request_permissions",{type:e.config.type}),o&&o.some(function(e){return"subscribe"===e})&&e.breakTimeoutCustomWidgets({set:Date.now()+t.dateWeekTimestamp(e.widget.rerun_after)}),r&&e.addToCart("subscribe",r)})})}},{key:"addToCart",value:function(e,t){var n=t.enable,i=t.query,s=t.actions;if(!0===n&&s.some(function(t){return t===e})){var r=document.querySelector(i);r&&r.click()}}},{key:"sendData",value:function(e){var n=this.config,i=n.source,r=n.trigger;t.dispatchEvent("pw:customer_events:widget",s({},e,{source:i},{trigger:r}))}},{key:"checkPermissions",get:function(){var e=window.pw,t=e.permission;return e.isAllowed&&"default"===t}},{key:"checkInitCondition",get:function(){var e=this,n=this.config.context,i=!1;return n&&(i=n.some(function(n,i){var s=n.black_list,r=n.urls,o=n.node_conditions;if(s&&t.checkURLs(s))return!1;var a=!0;r&&(a=t.checkURLs(r));var c=!0;return o&&(c=o.some(function(e){return t.checkNodeContent(e)})),!(!a||!c)&&(e.context_index=i,!0)})),!1===this.config.context_only||i}}]),e}())(e)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e.exports=function(e){var t=n(1)();return new(function(){function e(t){i(this,e),this.config=t,this.init()}return s(e,[{key:"init",value:function(){if(this.config&&this.checkPermissions&&this.checkInitCondition){var e=this.config.delay;e>0?this.deferredWidgetInitialization(e):this.initWidget()}}},{key:"deferredWidgetInitialization",value:function(e){var t=this,n=1,i=e,s=function e(){n<i?setTimeout(e,1e3):t.initWidget(),n++};setTimeout(s,1e3)}},{key:"initWidget",value:function(){t.dispatchEvent("pw:request_permissions",{type:this.config.type+"-custom"})}},{key:"checkPermissions",get:function(){var e=window.pw,t=e.permission;return e.isAllowed&&"default"===t}},{key:"checkInitCondition",get:function(){return t.checkInitConditions(this.config.init_conditions)}}]),e}())(e)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e.exports=function(e,t){var r=n(1)();return new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,e),t&&(this.config=t,this.startEvent=t.init_event||"pw:custom_handlers:start",this.eventId=t.event_id||"platform_segmentation",this.isSPASite=n,this.init())}return s(e,[{key:"init",value:function(){var e=this;if(r.dispatchEvent("pw:customer_events:segmentation",{event_id:"init"}),!1===this.isSPASite){new Promise(function(t){document.addEventListener(e.startEvent,function(){return t()})}).then(function(){return e.start()})}!0===this.isSPASite&&document.addEventListener(this.startEvent,function(){return e.start()})}},{key:"start",value:function(){var e=this;if(this.checkInitCondition){r.dispatchEvent("pw:customer_events:segmentation",{event_id:"start"});var t=this.config.delay||0;setTimeout(function(){e.sendSegmentationEvent()},1e3*t)}}},{key:"sendSegmentationEvent",value:function(){if(r.isLocalStorage){if(window.localStorage.getItem("pw_segmentation_sent_"+this.config.segment_uuid))return;window.localStorage.setItem("pw_segmentation_sent_"+this.config.segment_uuid,"1")}var e={event_id:this.eventId,url:window.location.href,segment_id:this.config.segment_id,segment_uuid:this.config.segment_uuid};r.dispatchEvent("pw:customer_events:event",e)}},{key:"checkInitCondition",get:function(){var e=!0,t=this.config.urls;t&&(e=r.checkURLs(t));var n=!0,i=this.config.node_conditions;return i&&(n=i.some(function(e){return r.checkNodeContent(e)})),e&&n}}]),e}())(e,t)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e.exports=function(e,t){var o=n(1)();return new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,e),t&&(this.config=t,this.triggerIds=t.trigger_ids,this.placeholders={},this.image=!1,this.imageLarge=!1,this.observers=[],this.isDone=!1,this.overriddenTriggerId=!1,this.contextConfig=t.context,this.contextIndex=!1,this.startEvent=t.init_event||"pw:custom_handlers:start",this.eventId=t.event_id||"incomplete_action",this.isSPASite=n,this.session=!1,this.sessionTimeout=108e5,this.cancelStart=!1,this.init())}return r(e,[{key:"init",value:function(){var e=this;if(this.triggerIds.forEach(function(e){o.dispatchEvent("pw:customer_events:incomplete_action",{event_id:"init",trigger_id:e})}),!1===this.isSPASite){this.startInterruptEventListeners();new Promise(function(t){document.addEventListener(e.startEvent,function(){return t()})}).then(function(){return e.start()})}if(!0===this.isSPASite){new Promise(function(t){document.addEventListener(e.startEvent,function(){return t()})}).then(function(){return e.startInterruptEventListeners()}),document.addEventListener(this.startEvent,function(){return e.start()})}}},{key:"start",value:function(){0!==this.observers.length&&this.isSPASite,this.session=o.checkInterruptDataInSession(this.triggerIds,this.eventId,this.sessionTimeout),!1===this.cancelStart&&this.session&&this.checkInitCondition&&(this.triggerIds.forEach(function(e){o.dispatchEvent("pw:customer_events:incomplete_action",{event_id:"start",trigger_id:e})}),this.contextIndex=o.checkContext(this.contextConfig),this.checkState(this.config.finish_conditions,!0),(!1===this.isDone||this.checkUrlInSession)&&this.checkState(this.config.start_conditions,!1))}},{key:"startInterruptEventListeners",value:function(){var e=this,t=this.config.interrupt_events;t&&(this.triggerIds.forEach(function(e){o.dispatchEvent("pw:customer_events:incomplete_action",{event_id:"start_interrupt_listeners",trigger_id:e})}),t.forEach(function(t){var n=t.event,i=t.details,s=t.stop;document.addEventListener(n,function(t){o.checkInterruptEventMatch(i,t)&&(e.incompleteActionSend(!0,!1),!1===e.isSPASite&&(e.cancelStart=!0),!0===s&&o.setSessionData({stop:!0},e.triggerIds[0],e.eventId))})}))}},{key:"setupContext",value:function(e){var t=this,n=this.config.context[e],i=n.placeholders,s=n.image,r=n.image_large,a=n.trigger_id;if(i&&i.forEach(function(e){var n=e.text,i=e.type,s=e.options,r=e.default_value,a=e.functions;t.placeholders[n]=o.getContext(i,s,r,a)}),this.placeholders.abandoned_url=window.location.href.split("?")[0],s){var c=s.type,u=s.options,l=s.default_value,d=s.functions;this.image=o.getContext(c,u,l,d)}if(r){var h=r.type,f=r.options,v=r.default_value,g=r.functions;this.imageLarge=o.getContext(h,f,v,g)}a&&(this.overriddenTriggerId=a)}},{key:"checkState",value:function(e,t){var n=this;e.some(function(e){var i=e.urls,s=e.black_list,r=e.node_conditions,a=e.trigger;if(!1===o.checkInitConditions([{urls:i,black_list:s,node_conditions:r}]))return!1;if(!a||!a.type||!a.query)return n.incompleteActionSend(t),!0;var c=document.querySelector(a.query);if(c&&(n.observerCallbackSwitcher(c,a,t),a.observer)){var u=o.prepareObserverProperties(a.observer.properties,a.observer.attributes),l=o.initDomObserver(c,u,function(e){n.observerCallbackSwitcher(e,a,t)});n.observers.push({observer:l,target:c,config:u})}return!0})}},{key:"observerCallbackSwitcher",value:function(e,t,n){switch(t.type){case"click":this.checkIsClicked(e,t,n);break;case"changeContent":case"changeClass":break;case"changeAttributes":this.checkChangeAttributes(e,t,n);break;case"nodeExists":this.checkNodeExists(e,t,n)}}},{key:"checkIsClicked",value:function(e,t,n){var i=this,s=t.check;new Promise(function(e){document.querySelectorAll(s).forEach(function(t){t.addEventListener("click",function(){e()})})}).then(function(){return i.incompleteActionSend(n)})}},{key:"checkChangeAttributes",value:function(e,t,n){var i=t.expect;Object.keys(i).some(function(t){var n=e.getAttribute(t);return!!n&&n.trim()===i[t]})&&this.incompleteActionSend(n)}},{key:"checkNodeExists",value:function(e,t,n){var i=t.check;e.querySelector(i)&&this.incompleteActionSend(n)}},{key:"incompleteActionSend",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!1!==this.contextIndex&&this.setupContext(this.contextIndex);var i={event_id:this.eventId,url:window.location.href,done:e};if(!0!==e){this.placeholders.abandoned_url=window.location.href.split("?")[0];var r=JSON.stringify(this.placeholders),a=this.image,c=this.imageLarge;a&&(i=s({},i,{image:a})),c&&(i=s({},i,{image_large:c})),r&&(i=s({},i,{placeholders:r}))}this.triggerIds.forEach(function(s){if(e){if(o.isSessionStorage){if(window.sessionStorage.getItem("pw_incomplete_action_done_sent_"+s))return;n&&!1===t.isSPASite&&window.sessionStorage.setItem("pw_incomplete_action_done_sent_"+s,"1")}}else o.isSessionStorage&&window.sessionStorage.removeItem("pw_incomplete_action_done_sent_"+s);i.trigger_id=t.overriddenTriggerId||s,o.dispatchEvent("pw:customer_events:event",i)}),o.setSessionData(i,this.triggerIds[0],this.eventId),this.isDone=e}},{key:"checkInitCondition",get:function(){return o.checkInitConditions(this.config.start_conditions)||o.checkInitConditions(this.config.finish_conditions)}},{key:"checkUrlInSession",get:function(){var e=this;return!this.session||((new Date).getTime()-this.session.timestamp>this.sessionTimeout?(this.triggerIds.forEach(function(t){window.localStorage.removeItem("pw_"+e.eventId+"_"+t)}),!0):this.session.url!==window.location.href||(o.debugLog("Отмена запуска для "+this.triggerIds.join(", ")+" из-за совпадения URL"),!1))}}]),e}())(e,t)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1)(),a=function(){function e(t){var n=this;i(this,e),this.config=t,this.init_event=t.init_event||"pw:custom_handlers:start",this.event_id=t.event_id||"abcart",this.context_config=t.context,this.trigger_ids=t.trigger_ids,this.placeholders={},this.image=!1,this.image_large=!1,this.url=!1,this.count_items=!1,this.observers=[],this.dataSent=[],new Promise(function(e){document.addEventListener(n.init_event,function(){return e()})}).then(function(){return n.init()})}return r(e,[{key:"init",value:function(){if(this.config&&(this.trigger_ids.forEach(function(e){o.dispatchEvent("pw:customer_events:abandoned_cart",{event_id:"init",trigger_id:e})}),this.checkInitCondition)){if(this.trigger_ids.forEach(function(e){o.dispatchEvent("pw:customer_events:abandoned_cart",{event_id:"start",trigger_id:e})}),this.isOrderSuccess)return void this.abandonedCartSend(0,0);this.initCartStateObserver()}}},{key:"orderSuccessPath",value:function(e){var t=e.url;return o.checkURLs([t])}},{key:"orderSuccessNode",value:function(e){var t=this,n=e.url,i=e.nodeParent,s=e.nodeChild,r=e.content,a=e.observer,c=document.querySelector(i),u=o.prepareObserverProperties(a.properties,a.attributeFilter);return n&&o.checkURLs([n])&&c&&(this.orderSuccessNodeCheckout(c,s,r),o.initDomObserver(c,u,function(e){t.orderSuccessNodeCheckout(e,s,r)})),!1}},{key:"orderSuccessNodeCheckout",value:function(e,t,n){var i=e.innerHTML,s=!!n&&new RegExp(n,"gi");if(t){var r=o.parseDOMElements(i),a=r.querySelector(t);a&&!s&&this.abandonedCartSend(0,0),a&&s&&s.test(a.innerHTML)&&this.abandonedCartSend(0,0)}else s&&s.test(i)&&this.abandonedCartSend(0,0)}},{key:"orderSuccessRequest",value:function(e){var t=e.url,n=e.request,i=e.callback,s=new RegExp(""+o.replaceStrReg(t),"gi"),r=new RegExp(""+o.replaceStrReg(n),"gi"),a=!!~href.search(s),c=!1;return a&&this.addXMLRequestCallback(function(e){e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE){if(!!~e.responseURL.search(r)){var t=i;if(t)for(var n in t)Object.hasOwnProperty.call(t,n)&&e[n]===t[n]&&(c=!0);else c=!0}}}}),c}},{key:"addXMLRequestCallback",value:function(e){var t=void 0,n=void 0;XMLHttpRequest.callbacks?XMLHttpRequest.callbacks.push(e):(XMLHttpRequest.callbacks=[e],t=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(){for(n=0;n<XMLHttpRequest.callbacks.length;n++)XMLHttpRequest.callbacks[n](this);t.apply(this,arguments)})}},{key:"initCartStateObserver",value:function(){var e=this,t=this.config.cart_items;if(t){var n=document.querySelector(t.nodeParent),i=o.prepareObserverProperties(t.observer.properties,t.observer.attributeFilter);if(n){var s=this.observerCallbackSwitcher(n,t);this.prepareAndSendData(s,parseInt(t.emptyCartValue,10)),o.initDomObserver(n,i,function(n){var i=e.observerCallbackSwitcher(n,t),s=e.getLastCartItems();!1!==i&&(isNaN(s)||i>s)&&o.dispatchEvent("pw:customer_events:abandoned_cart:add",{productCount:i}),e.prepareAndSendData(i,parseInt(t.emptyCartValue,10))})}}}},{key:"observerCallbackSwitcher",value:function(e,t){switch(t.type){case"contentCount":return this.domChangeContentCount(e,t);case"contentNode":return this.domChangeContentNode(e,t);case"contentCountLength":return this.domChangeContentCountLength(e,t);case"attributeCount":return this.domChangeAttributeCount(e,t)}}},{key:"domChangeContentNode",value:function(e,t){var n=t.nodeChild,i=t.emptyWhenAbsent,s=t.nodeAttribute,r=t.expect,a=e;if(n){a=o.parseDOMElements(e.innerHTML).querySelector(n)}var c=!1;return a?(c=this.getLastCartItems()||0,o.getNodeAttribute(a,s)===r&&c++):i&&(c=0),c}},{key:"domChangeContentCount",value:function(e,t){var n=t.nodeChild,i=t.productCountRegExp,s=t.emptyWhenAbsent,r=e.innerHTML,a=i,c=!1;if(n){var u=o.parseDOMElements(r),l=u.querySelector(n);l?c=o.cleaningDataParsing(l.innerHTML.trim(),a):!0===s&&(c=0)}else c=o.cleaningDataParsing(r,a);return c}},{key:"domChangeContentCountLength",value:function(e,t){var n=t.nodeChild,i=(t.productCountRegExp,t.emptyWhenAbsent),s=e.outerHTML,r=!1;if(n){var a=o.parseDOMElements(s),c=a.querySelectorAll(n);c&&(0===c.length?!0===i&&(r=0):r=parseInt(c.length))}return r}},{key:"domChangeAttributeCount",value:function(e,t){var n=t.nodeChild,i=t.nodeAttribute,s=t.productCountRegExp,r=t.emptyWhenAbsent,a=e,c=!1;if(n&&(a=o.parseDOMElements(e.innerHTML).querySelector(n)),a){var u=o.getNodeAttribute(a,i);u&&(c=o.cleaningDataParsing(u,s))}return!1===c&&r&&(c=0),c}},{key:"setLastCartItems",value:function(e){o.isLocalStorage&&window.localStorage.setItem("pw_abandoned_cart_items",e)}},{key:"getLastCartItems",value:function(){return o.isLocalStorage?parseInt(window.localStorage.getItem("pw_abandoned_cart_items")):0}},{key:"setupContextFromPage",value:function(e){var t=this,n=this.context_config[e],i=n.placeholders,s=n.image,r=n.image_large;if(i&&i.forEach(function(e){var n=e.text,i=e.type,s=e.options,r=e.default_value,a=e.functions;t.placeholders[n]=o.getContext(i,s,r,a)}),this.placeholders.abandoned_url=window.location.href.split("?")[0],s){var a=s.type,c=s.options,u=s.default_value,l=s.functions;this.image=o.getContext(a,c,u,l)}if(r){var d=r.type,h=r.options,f=r.default_value,v=r.functions;this.image_large=o.getContext(d,h,f,v)}else this.image_large=!1;this.storeContextToCache()}},{key:"setupContextFromCache",value:function(){if(o.isLocalStorage){var e=window.localStorage.getItem("pw_abandoned_cart_context");if(e){var t=JSON.parse(e);this.image=t.image,this.image_large=t.image_large,this.placeholders=JSON.parse(t.placeholders)}}}},{key:"storeContextToCache",value:function(){o.isLocalStorage&&window.localStorage.setItem("pw_abandoned_cart_context",JSON.stringify({image:this.image,image_large:this.image_large,placeholders:JSON.stringify(this.placeholders)}))}},{key:"prepareAndSendData",value:function(e,t){var n=this;if(!1!==e){if(this.count_items=e,e!==this.getLastCartItems()){this.dataSent=[];var i=o.checkContext(this.context_config);if(!1!==i){var s=this.context_config[i];if(o.isDelayedContext(s))return void o.setupDelayedContext(s,function(){n.setupContextFromPage(i),n.abandonedCartSend(e,t)});this.setupContextFromPage(i)}}else this.setupContextFromCache();this.abandonedCartSend(e,t)}}},{key:"abandonedCartSend",value:function(e,t){var n=this,i=e<=t,r={event_id:this.event_id,cart_is_empty:i};if(this.setLastCartItems(0),!0!==i){this.setLastCartItems(e);var a=this.image,c=this.image_large,u=JSON.stringify(this.placeholders);r=s({},r,{cart_items:this.count_items,url:window.location.href}),a&&(r=s({},r,{image:a})),c&&(r=s({},r,{image_large:c})),u&&(r=s({},r,{placeholders:u}))}this.trigger_ids.forEach(function(e){if(n.dataSent.includes(e)){if(!0!==i)return;n.dataSent=n.dataSent.filter(function(t){return t!==e})}!0!==i&&n.dataSent.push(e);var t="pw_abcart_empty_sent_"+e;if(!0===i){if(o.isSessionStorage){if(window.sessionStorage.getItem(t))return;window.sessionStorage.setItem(t,"1")}}else o.isSessionStorage&&window.sessionStorage.removeItem(t);r.trigger_id=e,o.dispatchEvent("pw:customer_events:event",r)})}},{key:"checkInitCondition",get:function(){return o.checkInitConditions(this.config.init_conditions)}},{key:"isOrderSuccess",get:function(){var e=this.config.success_order;if(!e||!e.type)return!1;switch(e.type){case"PATH":return this.orderSuccessPath(e.details);case"NODE":return this.orderSuccessNode(e.details);case"REQUEST":return this.orderSuccessRequest(e.details);case"EVENT":default:return!1}}},{key:"checkContext",get:function(){var e=this,t=this.config.context;if(!t)return!1;var n=!0;return t.some(function(t,i){var s=t.urls,r=t.node_conditions;return!!o.checkURLs(s)&&(!(r&&!(n=r.some(function(e){return o.checkNodeContent(e)})))&&(e.context_index=i,!0))})}}]),e}();e.exports=function(e){return new a(e)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1)(),a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,e),t&&(this.config=t,this.startEvent=t.init_event||"pw:custom_handlers:start",this.eventID=t.event_id||"abandoned_session",this.isSPASite=n,this.contextConfig=t.context,this.triggerIds=t.trigger_ids,this.overriddenTriggerId=!1,this.placeholders={},this.image=!1,this.imageLarge=!1,this.url=!1,this.viewMinTime=t.min_time,this.isSendLongestViewEnabled=t.send_longest_view,this.session=!1,this.sessionTimeout=108e5,this.spendingTime=0,this.cancelStart=!1,this.init())}return r(e,[{key:"init",value:function(){var e=this;if(this.triggerIds.forEach(function(t){o.dispatchEvent("pw:customer_events:abandoned_session",{event_id:"init",trigger_id:t,spa_site:e.isSPASite})}),!1===this.isSPASite){this.startInterruptEventListeners();new Promise(function(t){document.addEventListener(e.startEvent,function(){return t()})}).then(function(){return e.start()})}if(!0===this.isSPASite){new Promise(function(t){document.addEventListener(e.startEvent,function(){return t()})}).then(function(){return e.startInterruptEventListeners()}),document.addEventListener(this.startEvent,function(){return e.start()})}}},{key:"start",value:function(){var e=this;if(!1===this.cancelStart&&this.checkSession&&this.checkInitCondition){this.triggerIds.forEach(function(e){o.dispatchEvent("pw:customer_events:abandoned_session",{event_id:"start",trigger_id:e})});var t=o.checkContext(this.contextConfig);!1!==t&&this.setupContext(t),this.placeholders.abandoned_url=window.location.href.split("?")[0],this.viewMinTime>0||this.isSendLongestViewEnabled?this.timer=setInterval(function(){return e.initTimer()},1e3):this.abandonedSessionActionSend()}}},{key:"startInterruptEventListeners",value:function(){var e=this,t=this.config.interrupt_events;t&&(this.triggerIds.forEach(function(e){o.dispatchEvent("pw:customer_events:abandoned_session",{event_id:"start_interrupt_listeners",trigger_id:e})}),t.forEach(function(t){var n=t.event,i=t.details,s=t.stop;document.addEventListener(n,function(t){var n=!0;i&&(n=i.some(function(e){return Object.keys(e).every(function(n){return Object.hasOwnProperty.call(t.detail,n)&&e[n]===t.detail[n]})})),n&&(clearInterval(e.timer),setTimeout(function(){return e.abandonedSessionActionSend(!0)},1e3),!1===e.isSPASite&&(e.cancelStart=!0),!0===s&&o.setSessionData({stop:!0},e.triggerIds[0],e.eventID))})}))}},{key:"setupContext",value:function(e){var t=this,n=this.contextConfig[e],i=n.placeholders,s=n.image,r=n.image_large,a=n.trigger_id;if(i&&i.forEach(function(e){var n=e.text,i=e.type,s=e.options,r=e.default_value,a=e.functions;t.placeholders[n]=o.getContext(i,s,r,a)}),s){var c=s.type,u=s.options,l=s.default_value,d=s.functions;this.image=o.getContext(c,u,l,d)}if(r){var h=r.type,f=r.options,v=r.default_value,g=r.functions;this.imageLarge=o.getContext(h,f,v,g)}a&&(this.overriddenTriggerId=a)}},{key:"initTimer",value:function(){this.spendingTime++;var e=this.session,t=e.timer||0,n=this.viewMinTime;if(this.isSendLongestViewEnabled){if(this.spendingTime===n+1&&0===t)return this.abandonedSessionActionSend(),void o.setSessionData({timer:this.spendingTime},this.triggerIds[0],this.eventID);if(t>=n&&this.spendingTime===t)return this.abandonedSessionActionSend(),void o.setSessionData({timer:this.spendingTime},this.triggerIds[0],this.eventID);if(t<n&&this.spendingTime===n)return this.abandonedSessionActionSend(),void o.setSessionData({timer:this.spendingTime},this.triggerIds[0],this.eventID)}else this.spendingTime===n&&this.abandonedSessionActionSend();this.spendingTime>=t&&o.setSessionData({timer:this.spendingTime},this.triggerIds[0],this.eventID)}},{key:"abandonedSessionActionSend",value:function(e){var t=this,n={event_id:this.eventID,url:window.location.href,cancel:e||!1},i=this.image,r=this.imageLarge,a=JSON.stringify(this.placeholders);i&&(n=s({},n,{image:i})),r&&(n=s({},n,{image_large:r})),a&&(n=s({},n,{placeholders:a})),this.triggerIds.forEach(function(i){if(o.isSessionStorage)if(!0===e){if(window.sessionStorage.getItem("pw_abandonedSession_cancel_sent_"+i))return;window.sessionStorage.setItem("pw_abandonedSession_cancel_sent_"+i,"1")}else window.sessionStorage.removeItem("pw_abandonedSession_cancel_sent_"+i);n.trigger_id=t.overriddenTriggerId||i,o.dispatchEvent("pw:customer_events:event",n)}),o.setSessionData(n,this.triggerIds[0],this.eventID)}},{key:"checkSession",get:function(){if(!o.isLocalStorage)return!0;var e=o.getSessionData(this.triggerIds[0],this.eventID);return(new Date).getTime()-e.timestamp>this.sessionTimeout&&(this.triggerIds.forEach(function(e){window.localStorage.removeItem("pw_abandonedSession_"+e)}),e=!1),this.session=e,!e||!0!==e.stop||(o.debugLog("Отмена запуска для "+this.triggerIds.join(", ")+" из-за настроек в сессии"),!1)}},{key:"checkInitCondition",get:function(){return o.checkInitConditions(this.config.init_conditions)}}]),e}();e.exports=function(e,t){return new a(e,t)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e.exports=function(e,t){var r=n(1)();return new(function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,t),e&&(this.config=e,this.isSPASite=n,this.observers=[],this.eventId=e.event_id||"node_ready",this.startEvent=e.init_event||"pw:custom_handlers:start",this.urlsWhiteList=e.urls||!1,this.urlsBlackList=e.black_list||!1,this.init())}return s(t,[{key:"init",value:function(){var e=this;if(r.dispatchEvent("pw:customer_events:node_ready:init",{event_id:"init",spa_site:this.isSPASite}),!1===this.isSPASite){new Promise(function(t){document.addEventListener(e.startEvent,function(){return t()})}).then(function(){return e.start()})}!0===this.isSPASite&&document.addEventListener(this.startEvent,function(){return e.start()})}},{key:"start",value:function(){0!==this.observers.length&&!0===this.isSPASite&&r.disconnectObservers(this.observers);var t=document.querySelector(e.main_node);if(t&&r.checkInitConditions([{urls:this.urlsWhiteList,black_list:this.urlsBlackList,node_conditions:!1}]))if(r.dispatchEvent("pw:customer_events:node_ready:start",{event_id:"start"}),0===this.observers.length){var n=this.createObservers(t);n&&this.addDisconnectEventListener("pw:customer_events:"+this.eventId,{success:!0})}else!0===this.isSPASite&&r.renewObservers(this.observers)}},{key:"createObservers",value:function(t){var n=this,i=e.expect_nodes,s=r.prepareObserverProperties(e.observer_properties);if(!1===this.observerCallback(t,i,this.config.options)){r.dispatchEvent("pw:customer_events:node_ready:observer",{event_id:"observer_start"});var o=r.initDomObserver(t,s,function(e){n.observerCallback(t,i,n.config.options)});return this.observers.push({observer:o,target:t,config:s}),!0}return!1}},{key:"observerCallback",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.every(function(t){var i=e.querySelector(t);if(n.visible){return t.split(",").some(function(t){return r.isVisible(e.querySelector(t))})}return!!i});return i&&this.nodeReadyEventSend(!0),i}},{key:"addDisconnectEventListener",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};document.addEventListener(e,function(e){if(t.observers){Object.keys(n).every(function(t){return e.detail.hasOwnProperty(t)&&e.detail[t]===n[t]})&&r.disconnectObservers(t.observers)}})}},{key:"nodeReadyEventSend",value:function(e){var t={event_id:this.eventId,success:e};r.dispatchEvent("pw:customer_events:"+this.eventId,t)}}]),t}())(e,t)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1)(),o=function(){function e(t){i(this,e),this.config=t,this.widget=t.widget,this.isDispatched=!1,this.init()}return s(e,[{key:"init",value:function(){r.dispatchEvent("pw:customer_events:installment",{event_id:"init"}),this.config&&this.checkInitCondition&&document.addEventListener("mouseleave",this.eventCallback.bind(this))}},{key:"eventCallback",value:function(e){if(e.preventDefault(),!this.isDispatched){this.isDispatched=!0;var t=this.getItemsData();if(t.length){r.dispatchEvent("pw:customer_events:installment:start",{event_id:"start"});var n=r.getContext(this.widget.totalPrice.type,this.widget.totalPrice.options,0,this.widget.totalPrice.functions).replace(/\s/g,""),i=this.prepareWidget(t);r.linksStyles(this.widget.css),i=i.replace("{{total_price}}",this.widget.totalPriceText.replace("{total_price}",(n/12).toFixed(2))),document.body.insertAdjacentHTML("beforeEnd",i);var s=document.querySelector(".pw-installment-custom__btn-close");s&&s.addEventListener("click",function(e){e.preventDefault(),document.querySelector("#pw-installment-custom").remove()})}}}},{key:"getItemsData",value:function(){var e=[];return this.widget.products.forEach(function(t){document.querySelectorAll(t.parentNode).forEach(function(n){var i=r.getContext(t.title.type,t.title.options,!1,t.title.functions,n),s=r.getContext(t.image.type,t.image.options,!1,t.image.functions,n);s&&i&&e.push({image:s,title:i})})}),e}},{key:"prepareWidget",value:function(e){switch(this.widget.template){case"default.installment.widget":default:return this.renderDefaultTemplate(e)}}},{key:"renderDefaultTemplate",value:function(e){var t=!0===this.widget.isWhiteLabel?"":'<a id="pw-confirm-custom__link" target="_blank" href="https://push.world/"> powered by <svg xmlns="http://www.w3.org/2000/svg" class="pw-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"/></svg> PUSH.WORLD</a>',n='<div id="pw-installment-custom">\n                        <div class="pw-installment-custom__wrapp">\n                            <div class="pw-installment-custom__header">\n                                <a class="pw-installment-custom__btn-close" href="#">&#9747;</a>\n                            </div>\n                            <div class="pw-installment-custom__content">\n                                <div class="pw-installment-custom__title"><h1>'+this.widget.title+'</h1></div>\n                                <div class="pw-installment-custom__products">\n                                    \n        ';return e.forEach(function(e){n+='<div class="pw-installment-custom__item">\n                        <div class="pw-installment-custom__image"><img src="'+e.image+'" alt="'+e.title+'"></div>\n                        <div class="pw-installment-custom__item-title">'+e.title+"</div>\n                    </div>\n            "}),n+='\n        </div>\n        <div class="pw-installment-custom__totalprice">{{total_price}}</div>\n        <div class="pw-installment-custom__buttons"><a class="pw-installment-custom__btn" href="'+this.widget.button.url+'" title="'+this.widget.button.text+'" target="'+this.widget.button.target+'">'+this.widget.button.text+'</a></div>\n        <div class="pw-installment-custom__footer">'+t+"</div>\n        \n        </div></div><div>"}},{key:"checkInitCondition",get:function(){if(this.config.black_list&&r.checkURLs(this.config.black_list))return!1;var e=r.checkURLs(this.config.urls),t=!0;return this.config.node_conditions&&(t=this.config.node_conditions.some(function(e){return r.checkNodeContent(e)})),e&&t}}]),e}();e.exports=function(e){return new o(e)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1)(),o=function(){function e(t){var n=this;i(this,e),this.config=t,this.init_event=t.init_event||"pw:custom_handlers:start",this.event_id=t.event_id||"pw_context",this.config&&(this.startInterruptEventListeners(),document.addEventListener(this.init_event,function(){return n.init()}))}return s(e,[{key:"init",value:function(){var e=this;this.cancelStart||r.checkInitConditions(this.config.init_conditions)&&this.config.context.forEach(function(t){e.setupContext(t)})}},{key:"setupContext",value:function(e){if(!this.checkStoppedState(e.id)){var t={};e.data.forEach(function(e){var n=e.text,i=e.type,s=e.options,o=e.default_value,a=e.functions;t[n]=r.getContext(i,s,o,a)});var n=JSON.stringify(t);switch(e.storage){case"localStorage":if(!r.isLocalStorage)return;localStorage.setItem("pw_context_"+e.id,n);break;case"sessionStorage":if(!r.isSessionStorage)return;sessionStorage.setItem("pw_context_"+e.id,n);break;case"cookie":r.setCookie("pw_context_"+e.id,n,180)}}}},{key:"checkStoppedState",value:function(e){return!!r.isSessionStorage&&"__stopped__"===sessionStorage.getItem("pw_context_"+e+"_stopped")}},{key:"startInterruptEventListeners",value:function(){var e=this,t=this.config.interrupt_events;t&&t.forEach(function(t){var n=t.event,i=t.details,s=t.stop;document.addEventListener(n,function(t){var n=!0;i&&(n=i.some(function(e){return Object.keys(e).every(function(n){return Object.hasOwnProperty.call(t.detail,n)&&e[n]===t.detail[n]})})),n&&(e.cancelStart=!0,!0===s&&r.isSessionStorage&&e.config.context.forEach(function(e){sessionStorage.setItem("pw_context_"+e.id+"_stopped","__stopped__")}))})})}}]),e}();e.exports=function(e){return new o(e)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e.exports=function(e,t){var r=n(1)();return new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,e),t&&(this.config=t,this.isSPASite=n,this.startEvent=t.init_event||"pw:custom_handlers:ready",this.counterType=t.type||"",this.counterId=t.id||"",this.goals=t.goals||[],this.init())}return s(e,[{key:"init",value:function(){var e=this;r.dispatchEvent("pw:customer_events:reach_coals:init",{event_id:"init",spa_site:this.isSPASite}),new Promise(function(t){document.addEventListener(e.startEvent,function(){return t()})}).then(function(){return e.start()})}},{key:"start",value:function(){var e=this;this.goals.forEach(function(t){var n=t.event,i=t.target;document.addEventListener(n,function(){return e.sendData(i)})})}},{key:"sendData",value:function(e){if("metrika"===this.counterType)return window.ym(parseInt(this.counterId),"reachGoal",e),r.debugLog('Событие "'+e+'" отправлено.'),!0;r.debugLog('Тип аналитики "'+this.counterType+'" не поддерживается.')}}]),e}())(e,t)}}]);