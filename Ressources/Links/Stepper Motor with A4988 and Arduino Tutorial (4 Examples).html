<!DOCTYPE html>
<html class="fa-events-icons-failed" lang="en-US"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"> <script src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/osd.js"></script><script type="text/javascript" async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/analytics.js"></script><script src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/cookie.js"></script><script src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/show_ads_impl_fy2019.js" id="google_shimpl"></script><script async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/gtm.js"></script><script type="text/javascript">function ctSetCookie___from_backend(c_name, value) {document.cookie = c_name + "=" + encodeURIComponent(value) + "; path=/; samesite=lax";}ctSetCookie___from_backend('ct_checkjs', '12cb7710d2c62c656ab139c86064a27d1806c2916603d2715bd2becfe82efd55', '0');</script> <title>Stepper Motor with A4988 and Arduino Tutorial (4 Examples)</title><link rel="stylesheet" href="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/css.css"><link rel="stylesheet" href="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/cd773640863d4e6b44a69edd2a106724.css" data-minify="1"><meta name="description" content="In this tutorial you will learn how to control a stepper motor with A4988, AccelStepper and Arduino. Wiring diagram and many example codes included!"><meta name="robots" content="index, follow"><meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><link rel="canonical" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/"> <script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://www.makerguides.com/#website","url":"https://www.makerguides.com/","name":"Makerguides.com","description":"","potentialAction":[{"@type":"SearchAction","target":"https://www.makerguides.com/?s={search_term_string}","query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#primaryimage","inLanguage":"en-US","url":"https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout.jpg","width":1200,"height":646,"caption":"Wiring diagram/schematic for A4988 stepper motor driver with Arduino and stepper motor."},{"@type":"WebPage","@id":"https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#webpage","url":"https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/","name":"Stepper Motor with A4988 and Arduino Tutorial (4 Examples)","isPartOf":{"@id":"https://www.makerguides.com/#website"},"primaryImageOfPage":{"@id":"https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#primaryimage"},"datePublished":"2019-02-11T18:46:14+00:00","dateModified":"2020-05-22T12:28:15+00:00","author":{"@id":"https://www.makerguides.com/#/schema/person/1d39400d84fcdfc3b7913621d40debf9"},"description":"In this tutorial you will learn how to control a stepper motor with A4988, AccelStepper and Arduino. Wiring diagram and many example codes included!","breadcrumb":{"@id":"https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/"]}]},{"@type":"BreadcrumbList","@id":"https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://www.makerguides.com/","url":"https://www.makerguides.com/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://www.makerguides.com/tutorials/","url":"https://www.makerguides.com/tutorials/","name":"Tutorials"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/","url":"https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/","name":"How to control a stepper motor with A4988 driver and Arduino"}}]},{"@type":["Person"],"@id":"https://www.makerguides.com/#/schema/person/1d39400d84fcdfc3b7913621d40debf9","name":"Benne de Bakker"}]}</script> <meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Stepper Motor with A4988 and Arduino Tutorial (4 Examples)"><meta property="og:description" content="In this tutorial you will learn how to control a stepper motor with A4988, AccelStepper and Arduino. Wiring diagram and many example codes included!"><meta property="og:url" content="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/"><meta property="og:site_name" content="Makerguides.com"><meta property="og:updated_time" content="2020-05-22T12:28:15+00:00"><meta property="article:published_time" content="2019-02-11T18:46:14+00:00"><meta property="article:modified_time" content="2020-05-22T12:28:15+00:00"><meta property="og:image" content="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout.jpg"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="646"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Stepper Motor with A4988 and Arduino Tutorial (4 Examples)"><meta name="twitter:description" content="In this tutorial you will learn how to control a stepper motor with A4988, AccelStepper and Arduino. Wiring diagram and many example codes included!"><meta name="twitter:image" content="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout.jpg"><link rel="dns-prefetch" href="https://fonts.googleapis.com/"><link href="https://fonts.gstatic.com/" crossorigin="" rel="preconnect"><link rel="alternate" type="application/rss+xml" title="Makerguides.com » Feed" href="https://www.makerguides.com/feed/"><link rel="alternate" type="application/rss+xml" title="Makerguides.com » Comments Feed" href="https://www.makerguides.com/comments/feed/"><link rel="alternate" type="application/rss+xml" title="Makerguides.com » How to control a stepper motor with A4988 driver and Arduino Comments Feed" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/feed/"><style type="text/css">img.wp-smiley,img.emoji{display:inline!important;border:none!important;box-shadow:none!important;height:1em!important;width:1em!important;margin:0 .07em!important;vertical-align:-0.1em!important;background:none!important;padding:0!important}</style><style id="genesis-sample-gutenberg-inline-css" type="text/css">.ab-block-post-grid .ab-post-grid-items h2 a:hover{color:#0073e5}.site-container .wp-block-button .wp-block-button__link{background-color:#0073e5}.wp-block-button .wp-block-button__link:not(.has-background),.wp-block-button .wp-block-button__link:not(.has-background):focus,.wp-block-button .wp-block-button__link:not(.has-background):hover{color:#fff}.site-container .wp-block-button.is-style-outline .wp-block-button__link{color:#0073e5}.site-container .wp-block-button.is-style-outline .wp-block-button__link:focus,.site-container .wp-block-button.is-style-outline .wp-block-button__link:hover{color:#2396ff}.site-container .has-small-font-size{font-size:12px}.site-container .has-normal-font-size{font-size:18px}.site-container .has-large-font-size{font-size:20px}.site-container .has-larger-font-size{font-size:24px}.site-container .has-theme-primary-color,.site-container .wp-block-button .wp-block-button__link.has-theme-primary-color,.site-container .wp-block-button.is-style-outline .wp-block-button__link.has-theme-primary-color{color:#0073e5}.site-container .has-theme-primary-background-color,.site-container .wp-block-button .wp-block-button__link.has-theme-primary-background-color,.site-container .wp-block-pullquote.is-style-solid-color.has-theme-primary-background-color{background-color:#0073e5}.site-container .has-theme-secondary-color,.site-container .wp-block-button .wp-block-button__link.has-theme-secondary-color,.site-container .wp-block-button.is-style-outline .wp-block-button__link.has-theme-secondary-color{color:#0073e5}.site-container .has-theme-secondary-background-color,.site-container .wp-block-button .wp-block-button__link.has-theme-secondary-background-color,.site-container .wp-block-pullquote.is-style-solid-color.has-theme-secondary-background-color{background-color:#0073e5}</style> <script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/jquery.js"></script> <script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/jquery-migrate.js"></script> <script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/apbct-public.js"></script> <script type="text/javascript">/* <![CDATA[ */ var ctCommon = {"_ajax_nonce":"d193c9f16c","_ajax_url":"https:\/\/www.makerguides.com\/wp-admin\/admin-ajax.php"}; /* ]]> */</script> <script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/apbct-common.js"></script> <script type="text/javascript">/* <![CDATA[ */ var ctNocache = {"ajaxurl":"https:\/\/www.makerguides.com\/wp-admin\/admin-ajax.php","info_flag":"","set_cookies_flag":"","blog_home":"https:\/\/www.makerguides.com\/"}; /* ]]> */</script> <script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/cleantalk_nocache.js"></script> <link rel="https://api.w.org/" href="https://www.makerguides.com/wp-json/"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.makerguides.com/xmlrpc.php?rsd"><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.makerguides.com/wp-includes/wlwmanifest.xml"><meta name="generator" content="WordPress 5.4.2"><link rel="shortlink" href="https://www.makerguides.com/?p=1927"><link rel="alternate" type="application/json+oembed" href="https://www.makerguides.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.makerguides.com%2Fa4988-stepper-motor-driver-arduino-tutorial%2F"><link rel="alternate" type="text/xml+oembed" href="https://www.makerguides.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.makerguides.com%2Fa4988-stepper-motor-driver-arduino-tutorial%2F&amp;format=xml"><style type="text/css" data-source="Grow by Mediavine">@media screen and (max-width :720px){#dpsp-floating-sidebar.dpsp-hide-on-mobile{display:none!important}}@media screen and (max-width :720px){.dpsp-share-text.dpsp-hide-on-mobile{display:none!important}}</style><link rel="pingback" href="https://www.makerguides.com/xmlrpc.php">  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WWJT5ML');</script>   <script async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/js.js"></script> <script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-96114130-3');</script>  <script src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/154986e229.js"></script><link href="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/154986e229.css" media="all" rel="stylesheet"> <link rel="stylesheet" href="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">  <script data-ad-client="ca-pub-9246321331815157" async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/adsbygoogle.js" data-checked-head="true"></script> <link rel="icon" href="https://www.makerguides.com/wp-content/uploads/2019/02/cropped-makerguides-site-icon-1-32x32.png" sizes="32x32"><link rel="icon" href="https://www.makerguides.com/wp-content/uploads/2019/02/cropped-makerguides-site-icon-1-192x192.png" sizes="192x192"><link rel="apple-touch-icon" href="https://www.makerguides.com/wp-content/uploads/2019/02/cropped-makerguides-site-icon-1-180x180.png"><meta name="msapplication-TileImage" content="https://www.makerguides.com/wp-content/uploads/2019/02/cropped-makerguides-site-icon-1-270x270.png"><style type="text/css" id="wp-custom-css">.supplies-table td{vertical-align:middle;height:50px;padding:5px 10px}.supplies-table img{width:40px!important;height:40px!important}.supplies-table td:nth-child(1){width:70px}@media only screen and (max-width:768px){.supplies-table td:nth-child(1){display:none}}.supplies-table td:nth-child(3){width:60px}.supplies-table td:nth-child(4){width:120px}figure{border-bottom:none!important}figcaption{text-align:center;font-style:italic;color:#666;font-size:16px}#proficiency{color:#fff}@media only screen and (min-width:1024px){.content-sidebar-wrap{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.sidebar-primary .widget:last-child{position:-webkit-sticky;position:sticky;top:85px}.admin-bar .sidebar-primary .widget:last-child{top:130px}}.file-download-icon a:after{content:"\f56d";font-family:"Font Awesome 5 Free";font-weight:900;display:inline-block;margin-left:20px}.download-icon a:after{content:"\f019";font-family:"Font Awesome 5 Free";font-weight:900;display:inline-block;margin-left:20px}.entry-image-link{display:inline-block}</style><noscript><style id="rocket-lazyload-nojs-css">.rll-youtube-player,[data-lazy-src]{display:none!important}</style></noscript><link rel="preload" href="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/integrator.js" as="script"><script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/integrator.js"></script><link rel="preload" href="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/integrator_002.js" as="script"><script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/integrator_002.js"></script><link rel="preload" href="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/integrator.js" as="script"><script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/integrator.js"></script><link rel="preload" href="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/integrator_002.js" as="script"><script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/integrator_002.js"></script><script type="application/ld+json">{"@context":"http://schema.org/","@type":"TechArticle","dependencies":"A4988 stepper motor driver\t× 1\tAmazon AliExpress NEMA 17 stepper motor\t× 1\tAmazon Arduino Uno Rev3\t× 1\tAmazon Power supply (8-35 V)\t× 1\tAmazon AliExpress Breadboard\t× 1\tAmazon Capacitor (100 µF)\t× 1\tAmazon Jumper wires\t~ 10\tAmazon AliExpress USB cable type A/B\t× 1\tAmazon","proficiencyLevel":"null","articleBody":"Skip to primary navigation Skip to main content Skip to primary sidebar Skip to footer Makerguides.com Home Tutorials Projects How to control a stepper motor with A4988 driver and Arduino Written by Benne de Bakker 26 Comments This article includes everything you need to know about controlling a stepper motor with the A4988 stepper motor driver and Arduino. I have included a wiring diagram, a tutorial on how to set the current limit and many example codes. Although you can use this driver without an Arduino library, I highly recommend you also take a look at the example code for the AccelStepper library at the end of this tutorial. This library is fairly easy to use and can greatly improve the performance of your hardware. After each example, I break down and explain how the code works, so you should have no problems modifying it to suit your needs. If you would like to learn more about other stepper motor drivers, then the articles below might be useful: How to control a stepper motor with DRV8825 driver and Arduino 28BYJ-48 Stepper Motor with ULN2003 Driver and Arduino Tutorial How to control a Stepper Motor with Arduino Motor Shield Rev3 TB6600 Stepper Motor Driver with Arduino Tutorial Supplies Hardware components A4988 stepper motor driver\t× 1\tAmazon AliExpress NEMA 17 stepper motor\t× 1\tAmazon Arduino Uno Rev3\t× 1\tAmazon Power supply (8-35 V)\t× 1\tAmazon AliExpress Breadboard\t× 1\tAmazon Capacitor (100 µF)\t× 1\tAmazon Jumper wires\t~ 10\tAmazon AliExpress USB cable type A/B\t× 1\tAmazon I like to use this driver in combination with a CNC-shield or expansion board. Such a shield already includes capacitors and offers an easy way to select the microstepping resolution. It makes wiring much easier and is a great option if you need a more permanent solution than a breadboard. Tools Small screwdriver Amazon Multimeter Amazon Alligator test leads (optional) Amazon Software Arduino IDE Makerguides.com is a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for sites to earn advertising fees by advertising and linking to products on Amazon.com. About the driver At the heart of the A4988 driver you will find a chip made by Allegro MicroSystems: the A4988 DMOS Microstepping Driver with Translator and Overcurrent Protection. This integrated motor driver makes interfacing with a microcontroller super easy as you only need two pins to control both the speed and the direction of the stepper motor. The driver has a maximum output capacity of 35 V and ± 2 A which is great for driving small to medium-sized stepper motors like a NEMA 17 bipolar stepper motor. If you need to control larger stepper motors like NEMA 23, take a look at the TB6600 stepper motor driver. This driver can be used with the same code as the A4988 and has a current rating of 3.5 A. TB6600 Stepper Motor Driver with Arduino Tutorial The A4988 driver chip has several safety functions built-in like overcurrent, short circuit, under-voltage lockout, and over-temperature protection. You can find more specifications in the table below. A4988 Specifications Minimum operating voltage\t8 V Maximum operating voltage\t35 V Continuous current per phase\t1 A Maximum current per phase\t2 A Minimum logic voltage\t3 V Maximum logic voltage\t5.5 V Microstep resolution\tfull, 1/2, 1/4, 1/8 and 1/16 Reverse voltage protection?\tNo Dimensions\t15.5 × 20.5 mm (0.6″ × 0.8″) Cost\tCheck price For more information you can check out the datasheet here. A4988 Datasheet Differences between the A4988 and DRV8825 The DRV8825 is quite similar to the A4988 but there are some key differences: The DRV8825 offers 1/32 microstepping, whereas the A4988 only goes down to 1/16-step. Higher microstepping results in smoother, quieter operation but is not always needed. The current limit potentiometer is at a different location The relation between the reference voltage and the current limit is different. The DRV8825 requires a minimum STEP pulse duration of 1.9µs; the A4988 requires 1µs minimum. The DRV8825 can be used with a higher voltage motor power supply (45 V vs 35 V). This means it is less susceptible to damage from LC voltage spikes. The DRV8825 can deliver slightly more current than the A4988 without any additional cooling. Note that the pinout of the DRV8825 is exactly the same as for the A4988, so it can be used as a drop-in replacement! A4899 (left) vs DRV8825 (right) Microstep settings Stepper motors typically have a step size of 1.8° or 200 steps per revolution, this refers to full steps. A microstepping driver such as the A4988 allows higher resolutions by allowing intermediate step locations. This is achieved by energizing the coils with intermediate current levels. For instance, driving a motor in quarter-step mode will give the 200-step-per-revolution motor 800 microsteps per revolution by using four different current levels. A4988 pinout The resolution (step size) selector pins (MS1, MS2, and MS3) allow you to select one of the five step resolutions according to the table below. MS1\tMS2\tMS3\tMicrostep resolution Low\tLow\tLow\tFull step High\tLow\tLow\t1/2 step Low\tHigh\tLow\t1/4 step High\tHigh\tLow\t1/8 step High\tHigh\tHigh\t1/16 step All three inputs have internal 100 kΩ pull-down resistors, so leaving the three microstep selection pins disconnected results in full-step mode. I often use a CNC-shield or expansion board in combination with these drivers. The expansion board has 3 dip switches to set MS1 – MS3 high or low and on the CNC-shield you can install jumpers. If you are using the driver with a breadboard, you can just use jumper wires to connect the selector pins to 5 V (i.e. make them HIGH). Wiring – Connecting A4988 to Arduino and stepper motor Wiring diagram/schematic for A4988 stepper motor driver with Arduino and stepper motor. The wiring diagram/schematic above shows you how to connect the A4899 driver to a stepper motor and the Arduino. The connections are also given in the following table: A4988 Connections A4988\tConnection VMOT\t8-35V GND\tMotor ground SLP\tRESET RST\tSLP VDD\t5V GND\tLogic ground STP\tPin 3 DIR\tPin 2 1A, 1B, 2A, 2B\tStepper motor The motor power supply is connected to GND and VMOT (top right). The two coils of the stepper motor are connected to 1A, 1B and 2A, 2B (see below). The GND pin (lower right) is connected to the ground pin of the microcontroller and VDD is connected to 5V. The STP (step) and DIR (direction) pin are connected to digital pin 3 and 2 respectively. You can choose a different digital pin if you want, but these are the ones I used for this tutorial and the example code. The SLP pin is an active low input. Meaning, pulling this pin low puts the driver in sleep mode, minimizing the power consumption. RST is also an active low input. When pulled low, all STEP inputs are ignored until you pull it high. If you are not using the pin, you can connect it to the adjacent SLP/SLEEP pin to bring it high and enable the driver. The EN (enable) pin can be left disconnected, it is pulled low by default. When this pin is set high the driver is disabled. In the rest of this tutorial I have left MS1, MS2 and MS3 disconnected, so the driver operates in full-step mode. This makes explaining the code a bit easier. Normally I would use 1/8 or 1/16 microstepping and connect the appropriate pins to 5V (see the table in the introduction). Warning The A4988 carrier board uses low-ESR ceramic capacitors, which makes it susceptible to destructive LC voltage spikes, especially when using power leads longer than a few inches. To protect the driver you can connect an electrolytic capacitor between VMOT and GND. Pololu suggests a capacitor of 47 µF or more (I used a 100 µF capacitor). I like these assortment boxes from Amazon, this way I always have some capacitors of the right size on hand. How to determine the correct stepper motor wiring? If you can’t find the datasheet of your stepper motor, it can be difficult to figure out how to wire your motor correctly. I use the following trick to determine how to connect 4 wire bipolar stepper motors: The only thing you need to identify is the two pairs of wires which are connected to the two coils of the motor. The wires from one coil get connected to 1A and 1B and the other to 2A and 2B, the polarity doesn’t matter. To find the two wires from one coil, do the following with the motor disconnected: Try to spin the shaft of the stepper motor by hand and notice how hard it is to turn. Now pick a random pair of wires from the motor and touch the bare ends together. Next, try to spin the shaft of the stepper motor again. If you feel a lot of resistance, you have found a pair of wires from the same coil. If you can spin the shaft freely, try another pair of wires. Now connect the two coils to the pins shown in the wiring diagram above. (If it is still unclear, please leave a comment below, more info can also be found on the RepRap.org wiki) How to set the current limit? Before you start programming your Arduino and start using the driver there is one very important thing you need to do that a lot of people forget: set the current limit! This step is not very complicated but absolutely necessary to protect your stepper motor and the driver. If you do not set an appropriate current limit, your motor can draw more current than it or your driver can handle, this is likely to damage one or both of them. To set the current limit you need to measure a reference voltage and adjust the on-board potentiometer accordingly. You will need a small screwdriver, a multimeter to measure the reference voltage, and alligator test leads (optional but very handy). Current limit wiring diagram for A4988 driver. To measure the reference voltage, the driver needs to be powered. The A4988 only needs power via VDD (5V) and you need to connect RST and SLP together, otherwise the driver won’t turn on. It’s best to disconnect the stepper motor while you do this. If you have already wired up the driver, you can leave everything but the stepper motor connected. You can apply power through the USB port of the Arduino. A4988\tConnection VDD\t5V RST\tSLP SLP\tRESET GND\tGround Required connections to set the current limit Current limit formula The next step is to calculate the current limit with the following formula: Current Limit = Vref ÷ (8 × Rcs) The Rcs is the current sense resistance. If you bought a A4988 driver from Pololu before January 2017, the Rcs will be 0.050 Ω. Drivers sold after that have 0.068 Ω current sense resistors. So this means that for a current limit of 1A for a board with 0.068 Ω current sense resistors, the Vref should be 540 mV. Current sense resistor locations. Picture: www.pololu.com To select the right current limit, take a look at the datasheet of your stepper motor. If you can’t find the current rating of your motor, I recommend starting with a current limit of 1A. You can always increase it later if your motor/driver is missing steps. Bonus info: When using the driver in full-step mode, the current through each coil is limited to approximately 70% of the set current limit. This means that you would need to set the current limit 40% higher or 1.4 A in full-step mode. When using microstepping, the formula above applies. Note that you need to re-calibrate the current limit if you change the motor power supply voltage. If your motor is making a lot of noise, try to lower the current limit. It’s best to set the current limit just high enough so the motor doesn’t miss steps. Measuring Vref Now you will need to measure the reference voltage (Vref) between the two points marked on the picture below (GND and the potentiometer) and adjust it to the value you calculated. Vref probe points (GND and potentiometer). I recommend using alligator test leads clamped to the screwdriver to set the current limit. This allows you to adjust the potentiometer and measure the reference voltage at the same time. Note: There is another way to measure the current limit and that is to directly measure the current draw of the stepper motor. Personally I find the above method a lot easier. Pololu mentions the following on their website: Note: The coil current can be very different from the power supply current, so you should not use the current measured at the power supply to set the current limit. The appropriate place to put your current meter is in series with one of your stepper motor coils. Pololu Current limit FAQ Do I need to have the stepper motor connected or not? No, you don’t need to connect the stepper motor to the driver when setting the current limit. To be on the safe side, disconnect your motor, it sometimes interferes with measuring the Vref voltage. Do I need to turn the motor by running the Arduino motor sketch? No, see question above. Do I need to turn the potentiometer clock- or counterclockwise to raise Vref? This depends on the manufacturer of the driver. If you have a genuine Polulu breakout board of the DRV8825 or A4988 you turn the potentiometer clockwise to raise Vref and counterclockwise to lower it. Cooling the driver The A4988 driver IC has a maximum current rating of 2 A per coil, but without a heat sink it can only supply about 1 A per coil before it starts to overheat. The driver usually comes with a small adhesive-backed heat sink, which I recommend you to install right away. You can also buy a bunch of small heat sinks from Amazon for really cheap. Basic Arduino example code to control a stepper motor Now that you have wired up the driver and set the current limit, it is time to connect the Arduino to the computer and upload some code. You can upload the following example code to your Arduino using the Arduino IDE. For this specific example, you do not need to install any libraries. This sketch controls both the speed, the number of revolutions, and the spinning direction of the stepper motor. You can copy the code by clicking on the button in the top right corner of the code field. /*Example sketch to control a stepper motor with A4988 stepper motor driver and Arduino without a library. More info: https://www.makerguides.com */ // Define stepper motor connections and steps per revolution: #define dirPin 2 #define stepPin 3 #define stepsPerRevolution 200 void setup() { // Declare pins as output: pinMode(stepPin, OUTPUT); pinMode(dirPin, OUTPUT); } void loop() { // Set the spinning direction clockwise: digitalWrite(dirPin, HIGH); // Spin the stepper motor 1 revolution slowly: for (int i = 0; i < stepsPerRevolution; i++) { // These four lines result in 1 step: digitalWrite(stepPin, HIGH); delayMicroseconds(2000); digitalWrite(stepPin, LOW); delayMicroseconds(2000); } delay(1000); // Set the spinning direction counterclockwise: digitalWrite(dirPin, LOW); // Spin the stepper motor 1 revolution quickly: for (int i = 0; i < stepsPerRevolution; i++) { // These four lines result in 1 step: digitalWrite(stepPin, HIGH); delayMicroseconds(1000); digitalWrite(stepPin, LOW); delayMicroseconds(1000); } delay(1000); // Set the spinning direction clockwise: digitalWrite(dirPin, HIGH); // Spin the stepper motor 5 revolutions fast: for (int i = 0; i < 5 * stepsPerRevolution; i++) { // These four lines result in 1 step: digitalWrite(stepPin, HIGH); delayMicroseconds(500); digitalWrite(stepPin, LOW); delayMicroseconds(500); } delay(1000); // Set the spinning direction counterclockwise: digitalWrite(dirPin, LOW); //Spin the stepper motor 5 revolutions fast: for (int i = 0; i < 5 * stepsPerRevolution; i++) { // These four lines result in 1 step: digitalWrite(stepPin, HIGH); delayMicroseconds(500); digitalWrite(stepPin, LOW); delayMicroseconds(500); } delay(1000); } How the code works: The sketch starts with defining the step and direction pins. I connected them to Arduino pin 3 and 2. The statement #define is used to give a name to a constant value. The compiler will replace any references to this constant with the defined value when the program is compiled. So everywhere you mention dirPin, the compiler will replace it with the value 2 when the program is compiled.","articleSection":"null","dateModified":"2020-05-22T12:28:15+00:00","datePublished":"2019-02-11T18:46:14+00:00","author":{"@type":"Person","name":"Benne de Bakker"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/"},"image":{"@type":"imageObject","url":"https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout.jpg"},"headline":"Stepper Motor with A4988 and Arduino Tutorial (4 Examples)","description":"In this tutorial you will learn how to control a stepper motor with A4988, AccelStepper and Arduino. Wiring diagram and many example codes included!","publisher":{"@type":"Organization","name":"makerguides.com","logo":{"@type":"ImageObject","url":"https://www.makerguides.com/wp-content/uploads/2019/08/Publisher-logo.png"}}}</script></head><body class="post-template-default single single-post postid-1927 single-format-standard wp-embed-responsive has-grow-sidebar header-full-width content-sidebar genesis-breadcrumbs-hidden genesis-footer-widgets-visible first-block-core-paragraph"><div class="site-container" style="height: auto !important;"><ul class="genesis-skip-link"><li><a href="#genesis-nav-primary" class="screen-reader-shortcut"> Skip to primary navigation</a></li><li><a href="#genesis-content" class="screen-reader-shortcut"> Skip to main content</a></li><li><a href="#genesis-sidebar-primary" class="screen-reader-shortcut"> Skip to primary sidebar</a></li><li><a href="#genesis-footer-widgets" class="screen-reader-shortcut"> Skip to footer</a></li></ul><header class="site-header"><div class="wrap"><div class="title-area"><p class="site-title"><a href="https://www.makerguides.com/">Makerguides.com</a></p></div><button class="menu-toggle dashicons-before dashicons-menu" aria-expanded="false" aria-pressed="false" id="genesis-mobile-nav-primary">Menu</button><nav class="nav-primary genesis-responsive-menu" aria-label="Main" id="genesis-nav-primary" style=""><div class="wrap"><ul id="menu-home-menu" class="menu genesis-nav-menu menu-primary js-superfish sf-js-enabled sf-arrows" style="touch-action: pan-y;"><li id="menu-item-3778" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-3778"><a href="https://www.makerguides.com/"><span>Home</span></a></li><li id="menu-item-1011" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1011"><a href="https://www.makerguides.com/tutorials/"><span>Tutorials</span></a></li><li id="menu-item-5506" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-5506"><a href="https://www.makerguides.com/projects/"><span>Projects</span></a></li></ul></div></nav></div></header><div class="site-inner" style="height: auto !important; margin-top: 79px;"><div class="content-sidebar-wrap" style="height: auto !important;"><main class="content" id="genesis-content" style="height: auto !important;"><article class="post-1927 post type-post status-publish format-standard has-post-thumbnail category-arduino category-tutorials tag-a4988 tag-accelstepper tag-arduino tag-driver tag-stepper-motor tag-tutorial entry" style="height: auto !important;"><header class="entry-header"><h1 class="entry-title">How to control a stepper motor with A4988 driver and Arduino</h1><p class="entry-meta">Written by <span class="entry-author"><a href="https://www.makerguides.com/author/benne-de-bakker/" class="entry-author-link" rel="author"><span class="entry-author-name">Benne de Bakker</span></a></span> <span class="entry-comments-link"><a href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comments">26 Comments</a></span></p></header><div class="entry-content" style="height: auto !important;"><div class="featured-image"><div class="dpsp-pin-it-wrapper aligncenter"><img src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout.jpg" class="lazyloaded" alt="A4988 Arduino stepper motor wiring schematic diagram pinout" sizes="(max-width: 1200px) 100vw, 1200px" srcset="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout.jpg 1200w, https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout-300x162.jpg 300w, https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout-768x413.jpg 768w, https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout-1024x551.jpg 1024w, https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout-735x396.jpg 735w" data-ll-status="loaded" data-pin-description="A4988 Arduino stepper motor wiring schematic diagram pinout" data-pin-title="Stepper Motor with A4988 and Arduino Tutorial (4 Examples)" style="" data-pin-url="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/" width="1200" height="646"><a class="dpsp-pin-it-button dpsp-pin-it-button-top-left dpsp-pin-it-button-shape-rounded dpsp-pin-it-button-has-label" target="_blank" href="https://pinterest.com/pin/create/bookmarklet/?media=https%3A%2F%2Fwww.makerguides.com%2Fwp-content%2Fuploads%2F2019%2F02%2FA4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout.jpg&amp;url=https%3A%2F%2Fwww.makerguides.com%2Fa4988-stepper-motor-driver-arduino-tutorial%2F&amp;is_video=false&amp;description=A4988%20Arduino%20stepper%20motor%20wiring%20schematic%20diagram%20pinout"><span class="dpsp-network-icon"><svg xmlns="http://www.w3.org/2000/svg" width="23" height="32" viewBox="0 0 23 32"><path d="M0 10.656q0-1.92 0.672-3.616t1.856-2.976 2.72-2.208 3.296-1.408 3.616-0.448q2.816 0 5.248 1.184t3.936 3.456 1.504 5.12q0 1.728-0.32 3.36t-1.088 3.168-1.792 2.656-2.56 1.856-3.392 0.672q-1.216 0-2.4-0.576t-1.728-1.568q-0.16 0.704-0.48 2.016t-0.448 1.696-0.352 1.28-0.48 1.248-0.544 1.12-0.832 1.408-1.12 1.536l-0.224 0.096-0.16-0.192q-0.288-2.816-0.288-3.36 0-1.632 0.384-3.68t1.184-5.152 0.928-3.616q-0.576-1.152-0.576-3.008 0-1.504 0.928-2.784t2.368-1.312q1.088 0 1.696 0.736t0.608 1.824q0 1.184-0.768 3.392t-0.8 3.36q0 1.12 0.8 1.856t1.952 0.736q0.992 0 1.824-0.448t1.408-1.216 0.992-1.696 0.672-1.952 0.352-1.984 0.128-1.792q0-3.072-1.952-4.8t-5.12-1.728q-3.552 0-5.952 2.304t-2.4 5.856q0 0.8 0.224 1.536t0.48 1.152 0.48 0.832 0.224 0.544q0 0.48-0.256 1.28t-0.672 0.8q-0.032 0-0.288-0.032-0.928-0.288-1.632-0.992t-1.088-1.696-0.576-1.92-0.192-1.92z"></path></svg></span>Save</a></div><noscript><img width="1200" height="646" src="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout.jpg" class="aligncenter" alt="A4988 Arduino stepper motor wiring schematic diagram pinout" srcset="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout.jpg 1200w, https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout-300x162.jpg 300w, https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout-768x413.jpg 768w, https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout-1024x551.jpg 1024w, https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout-735x396.jpg 735w" sizes="(max-width: 1200px) 100vw, 1200px" /></noscript></div><span id="dpsp-post-content-markup" data-image-pin-it="true"></span><p>This article includes everything you need to know about controlling a stepper motor with the <a href="https://amzn.to/2MJybwI" target="_blank" rel="noreferrer noopener">A4988 stepper motor driver</a> and Arduino. I have included a wiring diagram, a tutorial on how to set the current limit and many example codes.</p><center <script="" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">  <ins class="adsbygoogle" style="display:block;height:90px;margin-bottom:20px;" data-ad-client="ca-pub-9246321331815157" data-ad-slot="6897273890" data-ad-format="horizontal" data-full-width-responsive="true" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:730px;background-color:transparent;"><ins id="aswift_1_anchor" style="display: block; border: medium none; height: 90px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 730px; background-color: transparent; overflow: visible;"><iframe id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;border:0;width:730px;height:90px;" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/ads.html" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!1" data-google-query-id="CLCL8LyxyOoCFcta4Aod0DcACg" data-load-complete="true" width="730" height="90" frameborder="0"></iframe></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></center><p>Although
 you can use this driver without an Arduino library, I highly recommend 
you also take a look at the example code for the&nbsp;<strong>AccelStepper library</strong>&nbsp;at the end of this tutorial. This library is fairly easy to use and can greatly improve the performance of your hardware.</p><p>After each example, I break down and explain how the code works, so you should have no problems modifying it to suit your needs.</p><p>If you would like to learn more about other stepper motor drivers, then the articles below might be useful:</p><ul><li><a href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/"></a><a href="https://www.makerguides.com/drv8825-stepper-motor-driver-arduino-tutorial/">How to control a stepper motor with DRV8825 driver and Arduino</a></li><li><a href="https://www.makerguides.com/28byj-48-stepper-motor-arduino-tutorial/">28BYJ-48 Stepper Motor with ULN2003 Driver and Arduino Tutorial</a></li><li><a href="https://www.makerguides.com/arduino-motor-shield-stepper-motor-tutorial/">How to control a Stepper Motor with Arduino Motor Shield Rev3</a></li><li><a href="https://www.makerguides.com/tb6600-stepper-motor-driver-arduino-tutorial/">TB6600 Stepper Motor Driver with Arduino Tutorial</a></li></ul><hr class="wp-block-separator is-style-wide"><h2>Supplies</h2><h3>Hardware components</h3><figure class="wp-block-table supplies-table is-style-regular"><table><tbody><tr><td><img class="wp-image-5114 lazyloaded" style="width: 40px;" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/A4988.svg" alt="A4988" data-pin-nopin="true" data-ll-status="loaded"><noscript><img class="wp-image-5114" style="width: 40px;" src="https://www.makerguides.com/wp-content/uploads/2020/05/A4988.svg" alt="A4988"></noscript></td><td><a rel="noreferrer noopener" href="https://amzn.to/2MJybwI" target="_blank">A4988 stepper motor driver</a></td><td>× 1</td><td><a href="https://amzn.to/2MJybwI" target="_blank" rel="noreferrer noopener">Amazon</a><br><a href="http://s.click.aliexpress.com/e/BI1Lr9HQ" target="_blank" rel="noreferrer noopener">AliExpress</a></td></tr><tr><td><img class="wp-image-4851 lazyloaded" style="width: 40px;" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/stepper-motor.svg" alt="Stepper Motor" data-pin-nopin="true" data-ll-status="loaded"><noscript><img class="wp-image-4851" style="width: 40px;" src="https://www.makerguides.com/wp-content/uploads/2020/04/stepper-motor.svg" alt="Stepper Motor"></noscript></td><td><a href="https://www.amazon.com/Adafruit-PID-324-Stepper-motor/dp/B01N30ISYC/ref=as_li_ss_tl?keywords=nema+17&amp;qid=1575555491&amp;s=electronics&amp;sr=1-2&amp;linkCode=ll1&amp;tag=makerguides-20&amp;linkId=e6745e523bbdb6d5ed267fde98509ff5&amp;language=en_US">NEMA 17 stepper motor</a></td><td>× 1</td><td><a href="https://www.amazon.com/Adafruit-PID-324-Stepper-motor/dp/B01N30ISYC/ref=as_li_ss_tl?keywords=nema+17&amp;qid=1575555491&amp;s=electronics&amp;sr=1-2&amp;linkCode=ll1&amp;tag=makerguides-20&amp;linkId=e6745e523bbdb6d5ed267fde98509ff5&amp;language=en_US">Amazon</a></td></tr><tr><td><a href="https://amzn.to/374aJjX" target="_blank" rel="noreferrer noopener"><img class="wp-image-4850 lazyloaded" style="width: 40px;" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/arduino-uno-rev3.svg" alt="Arduino Uno Rev 3" data-pin-nopin="true" data-ll-status="loaded"><noscript><img class="wp-image-4850" style="width: 40px;" src="https://www.makerguides.com/wp-content/uploads/2020/04/arduino-uno-rev3.svg" alt="Arduino Uno Rev 3"></noscript></a></td><td><a rel="noreferrer noopener" href="https://amzn.to/374aJjX" target="_blank">Arduino Uno Rev3</a></td><td>× 1</td><td><a href="https://amzn.to/374aJjX" target="_blank" rel="noreferrer noopener" aria-label=" (opens in a new tab)">Amazon</a></td></tr><tr><td></td><td><a rel="noreferrer noopener" href="https://amzn.to/2PKWwT7" target="_blank">Power supply</a> (8-35 V)</td><td>× 1</td><td><a rel="noreferrer noopener" href="https://amzn.to/2PKWwT7" target="_blank">Amazon</a><br><a rel="noreferrer noopener" href="http://s.click.aliexpress.com/e/2SKoGaog" target="_blank">AliExpress</a></td></tr><tr><td></td><td><a href="https://amzn.to/2sZTxNA" target="_blank" rel="noreferrer noopener">Breadboard</a></td><td>× 1</td><td><a href="https://amzn.to/2sZTxNA" target="_blank" rel="noreferrer noopener">Amazon</a></td></tr><tr><td><img class="wp-image-5017" style="width: 30px;" src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%200%200'%3E%3C/svg%3E" alt="capacitor" data-lazy-src="https://www.makerguides.com/wp-content/uploads/2019/05/capacitor.svg" data-pin-nopin="true"><noscript><img class="wp-image-5017" style="width: 30px;" src="https://www.makerguides.com/wp-content/uploads/2019/05/capacitor.svg" alt="capacitor"></noscript></td><td><a rel="noreferrer noopener" href="https://amzn.to/2tuuuj3" target="_blank">Capacitor</a> (100 µF)</td><td>× 1</td><td><a href="https://amzn.to/2tuuuj3">Amazon</a></td></tr><tr><td></td><td><a rel="noreferrer noopener" href="https://amzn.to/2EG9wDc" target="_blank">Jumper wires</a></td><td>~ 10</td><td><a rel="noreferrer noopener" aria-label="Amazon (opens in a new tab)" href="https://amzn.to/2EG9wDc" target="_blank">Amazon</a><br><a href="http://s.click.aliexpress.com/e/EgrBOhDW" target="_blank" rel="noreferrer noopener">AliExpress</a></td></tr><tr><td></td><td><a rel="noreferrer noopener" href="https://amzn.to/34SBuXf" target="_blank">USB cable type A/B</a></td><td>× 1</td><td><a href="https://amzn.to/34SBuXf" target="_blank" rel="noreferrer noopener" aria-label="Amazon (opens in a new tab)">Amazon</a></td></tr></tbody></table></figure><p>I like to use this driver in combination with a&nbsp;<a rel="noreferrer noopener" href="https://amzn.to/2Ebtdnb" target="_blank">CNC-shield</a>&nbsp;or&nbsp;<a rel="noreferrer noopener" href="https://amzn.to/2SOi1EZ" target="_blank">expansion board</a>.
 Such a shield already includes capacitors and offers an easy way to 
select the microstepping resolution. It makes wiring much easier and is a
 great option if you need a more permanent solution than a breadboard.</p><h3>Tools</h3><figure class="wp-block-table supplies-table is-style-regular"><table><tbody><tr><td></td><td><a href="https://amzn.to/2SkE0ms" target="_blank" rel="noreferrer noopener">Small screwdriver</a></td><td></td><td><a href="https://amzn.to/2SkE0ms" target="_blank" rel="noreferrer noopener">Amazon</a></td></tr><tr><td><img class="wp-image-5045" style="width: 40px;" src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%200%200'%3E%3C/svg%3E" alt="multimeter" data-lazy-src="https://www.makerguides.com/wp-content/uploads/2019/05/multimeter.svg" data-pin-nopin="true"><noscript><img class="wp-image-5045" style="width: 40px;" src="https://www.makerguides.com/wp-content/uploads/2019/05/multimeter.svg" alt="multimeter"></noscript></td><td><a href="https://amzn.to/376RW7G" target="_blank" rel="noreferrer noopener">Multimeter</a></td><td></td><td><a href="https://amzn.to/376RW7G">Amazon</a></td></tr><tr><td></td><td><a href="https://amzn.to/2sVeIRd" target="_blank" rel="noreferrer noopener">Alligator test leads</a> (optional)</td><td></td><td><a href="https://amzn.to/2sVeIRd">Amazon</a></td></tr></tbody></table></figure><h3>Software</h3><figure class="wp-block-table supplies-table is-style-regular"><table><tbody><tr><td><img class="wp-image-4865" style="width: 40px;" src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%200%200'%3E%3C/svg%3E" alt="Arduino IDE" data-lazy-srcset="https://www.makerguides.com/wp-content/uploads//2020/04/arduino-ide.svg 150w, https://www.makerguides.com/wp-content/uploads//2020/04/arduino-ide.svg 300w, https://www.makerguides.com/wp-content/uploads//2020/04/arduino-ide.svg 1024w, https://www.makerguides.com/wp-content/uploads//2020/04/arduino-ide.svg 1536w, https://www.makerguides.com/wp-content/uploads//2020/04/arduino-ide.svg 2048w, https://www.makerguides.com/wp-content/uploads//2020/04/arduino-ide.svg 75w" data-lazy-sizes="(max-width: 2499px) 100vw, 2499px" data-lazy-src="https://www.makerguides.com/wp-content/uploads/2020/04/arduino-ide.svg" data-pin-nopin="true"><noscript><img class="wp-image-4865" style="width: 40px;" src="https://www.makerguides.com/wp-content/uploads/2020/04/arduino-ide.svg" alt="Arduino IDE" srcset="https://www.makerguides.com/wp-content/uploads//2020/04/arduino-ide.svg 150w, https://www.makerguides.com/wp-content/uploads//2020/04/arduino-ide.svg 300w, https://www.makerguides.com/wp-content/uploads//2020/04/arduino-ide.svg 1024w, https://www.makerguides.com/wp-content/uploads//2020/04/arduino-ide.svg 1536w, https://www.makerguides.com/wp-content/uploads//2020/04/arduino-ide.svg 2048w, https://www.makerguides.com/wp-content/uploads//2020/04/arduino-ide.svg 75w" sizes="(max-width: 2499px) 100vw, 2499px" /></noscript></td><td><a rel="noreferrer noopener" href="https://www.arduino.cc/en/Main/Software" target="_blank">Arduino IDE</a></td><td></td><td></td></tr></tbody></table></figure><p class="affiliate-disclaimer">Makerguides.com
 is a participant in the Amazon Services LLC Associates Program, an 
affiliate advertising program designed to provide a means for sites to 
earn advertising fees by advertising and linking to products on 
Amazon.com.</p><hr class="wp-block-separator is-style-wide"><h2>About the driver</h2><p>At
 the heart of the&nbsp;A4988 driver&nbsp;you will find a chip made by 
Allegro MicroSystems: the A4988 DMOS Microstepping Driver with 
Translator and Overcurrent Protection. This integrated motor driver 
makes interfacing with a microcontroller super easy as you only need two
 pins to control both the speed and the direction of the stepper motor.</p><p>The
 driver has a maximum output capacity of 35 V and ± 2 A which is great 
for driving small to medium-sized stepper motors like a&nbsp;<a rel="noreferrer noopener" href="https://amzn.to/2IMe92B" target="_blank">NEMA 17</a>&nbsp;bipolar stepper motor.</p><p>If
 you need to control larger stepper motors like NEMA 23, take a look at 
the TB6600 stepper motor driver. This driver can be used with the same 
code as the A4988 and has a current rating of 3.5 A.</p><ul><li><a href="https://www.makerguides.com/tb6600-stepper-motor-driver-arduino-tutorial/" rel="noreferrer noopener" target="_blank">TB6600 Stepper Motor Driver with Arduino Tutorial</a></li></ul><p>The
 A4988 driver chip has several safety functions built-in like 
overcurrent, short circuit, under-voltage lockout, and over-temperature 
protection. You can find more specifications in the table below.</p><h3>A4988 Specifications</h3><figure class="wp-block-table is-style-stripes"><table class="has-fixed-layout"><tbody><tr><td>Minimum operating voltage</td><td>8 V</td></tr><tr><td>Maximum operating voltage</td><td>35 V</td></tr><tr><td>Continuous current per phase</td><td>1 A</td></tr><tr><td>Maximum current per phase</td><td>2 A</td></tr><tr><td>Minimum logic voltage</td><td>3 V</td></tr><tr><td>Maximum logic voltage</td><td>5.5 V</td></tr><tr><td>Microstep resolution</td><td>full, 1/2, 1/4, 1/8 and 1/16</td></tr><tr><td>Reverse voltage protection?</td><td>No</td></tr><tr><td>Dimensions</td><td>15.5 × 20.5 mm (0.6″ × 0.8″)</td></tr><tr><td>Cost</td><td><a href="https://amzn.to/2MJybwI" rel="noreferrer noopener" target="_blank">Check price</a></td></tr></tbody></table></figure><p>For more information you can check out the datasheet here.</p><div class="wp-block-buttons aligncenter"><div class="wp-block-button file-download-icon"><a class="wp-block-button__link" href="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Datasheet.pdf" target="_blank" rel="noreferrer noopener">A4988 Datasheet</a></div></div><h3>Differences between the A4988 and DRV8825</h3><p>The&nbsp;<a href="https://amzn.to/2TO0gmz" target="_blank" rel="noreferrer noopener">DRV8825</a>&nbsp;is quite similar to the A4988 but there are some key differences:</p><ul><li>The
 DRV8825 offers 1/32 microstepping, whereas the A4988 only goes down to 
1/16-step. Higher microstepping results in smoother, quieter operation 
but is not always needed.</li><li>The current limit potentiometer is at a different location</li><li>The relation between the reference voltage and the current limit is different.</li><li>The DRV8825 requires a minimum STEP pulse duration of 1.9µs; the A4988 requires 1µs minimum.</li><li>&nbsp;The
 DRV8825 can be used with a higher voltage motor power supply (45 V vs 
35 V). This means it is less susceptible to damage from LC voltage 
spikes.</li><li>&nbsp;The DRV8825 can deliver slightly more current than the A4988 without any additional cooling.</li></ul><p>Note that the pinout of the DRV8825 is exactly the same as for the A4988, so it can be used as a drop-in replacement!</p><div class="wp-block-image"><figure class="aligncenter size-full"><img src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%200%200'%3E%3C/svg%3E" alt="A4988 vs DRV8825 stepper motor driver" class="wp-image-2783" data-lazy-src="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-vs-DRV8825-stepper-motor-driver-e1559758299444.jpg" data-pin-nopin="true"><noscript><img src="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-vs-DRV8825-stepper-motor-driver-e1559758299444.jpg" alt="A4988 vs DRV8825 stepper motor driver" class="wp-image-2783"/></noscript><figcaption>A4899 (left) vs DRV8825 (right)</figcaption></figure></div><center><script async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/adsbygoogle.js"></script>  <ins class="adsbygoogle" style="display:block; margin-bottom:20px; background-color:transparant; width:336px; height:280px;" data-ad-client="ca-pub-9246321331815157" data-ad-slot="2873149505" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done"><ins id="aswift_2_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"><ins id="aswift_2_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></center><h3>Microstep settings</h3><p>Stepper
 motors typically have a step size of 1.8° or 200 steps per revolution, 
this refers to full steps. A microstepping driver such as the A4988 
allows higher resolutions by allowing intermediate step locations. This 
is achieved by energizing the coils with intermediate current levels.</p><p>For
 instance, driving a motor in quarter-step mode will give the 
200-step-per-revolution motor 800 microsteps per revolution by using 
four different current levels.</p><div class="wp-block-image"><figure class="aligncenter size-large"><img src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%200%200'%3E%3C/svg%3E" alt="A4988 Connections pinout microstepping pins" class="wp-image-2189" data-lazy-srcset="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Connections-pinout-microstepping-pins.png 368w, https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Connections-pinout-microstepping-pins-300x197.png 300w" data-lazy-sizes="(max-width: 368px) 100vw, 368px" data-lazy-src="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Connections-pinout-microstepping-pins.png" data-pin-nopin="true"><noscript><img src="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Connections-pinout-microstepping-pins.png" alt="A4988 Connections pinout microstepping pins" class="wp-image-2189" srcset="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Connections-pinout-microstepping-pins.png 368w, https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Connections-pinout-microstepping-pins-300x197.png 300w" sizes="(max-width: 368px) 100vw, 368px" /></noscript><figcaption>A4988 pinout</figcaption></figure></div><p>The
 resolution (step size) selector pins (MS1, MS2, and MS3) allow you to 
select one of the five step resolutions according to the table below.</p><figure class="wp-block-table is-style-stripes"><table><thead><tr><th>MS1</th><th>MS2</th><th>MS3</th><th>Microstep resolution</th></tr></thead><tbody><tr><td>Low</td><td>Low</td><td>Low</td><td>Full step</td></tr><tr><td>High</td><td>Low</td><td>Low</td><td>1/2 step</td></tr><tr><td>Low</td><td>High</td><td>Low</td><td>1/4 step</td></tr><tr><td>High</td><td>High</td><td>Low</td><td>1/8 step</td></tr><tr><td>High</td><td>High</td><td>High</td><td>1/16 step</td></tr></tbody></table></figure><p>All
 three inputs have internal 100 kΩ pull-down resistors, so leaving the 
three microstep selection pins disconnected results in full-step mode.</p><p>I often use a&nbsp;<a rel="noreferrer noopener" href="https://amzn.to/2Ebtdnb" target="_blank">CNC-shield</a>&nbsp;or
 expansion board in combination with these drivers. The expansion board 
has 3 dip switches to set MS1 – MS3 high or low and on the CNC-shield 
you can install jumpers. If you are using the driver with a breadboard, 
you can just use jumper wires to connect the selector pins to 5 V (i.e. 
make them HIGH).</p><center><script async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/adsbygoogle.js"></script>  <ins class="adsbygoogle" style="display:block; margin-bottom:20px; background-color:transparant; width:336px; height:280px;" data-ad-client="ca-pub-9246321331815157" data-ad-slot="2873149505" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done"><ins id="aswift_3_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"><ins id="aswift_3_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></center><hr class="wp-block-separator is-style-wide"><h2>Wiring – Connecting A4988 to Arduino and stepper motor</h2><figure class="wp-block-image size-large"><div class="dpsp-pin-it-wrapper wp-image-2866"><img src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%200%200'%3E%3C/svg%3E" alt="A4988 Arduino stepper motor wiring schematic diagram pinout" class="" data-lazy-src="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout-1-1024x551.jpg" data-pin-description="A4988 Arduino stepper motor wiring schematic diagram pinout" data-pin-title="Stepper Motor with A4988 and Arduino Tutorial (4 Examples)" style="" data-pin-url="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/"><a class="dpsp-pin-it-button dpsp-pin-it-button-top-left dpsp-pin-it-button-shape-rounded dpsp-pin-it-button-has-label" target="_blank" href="https://pinterest.com/pin/create/bookmarklet/?media=https%3A%2F%2Fwww.makerguides.com%2Fwp-content%2Fuploads%2F2019%2F02%2FA4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout-1-1024x551.jpg&amp;url=https%3A%2F%2Fwww.makerguides.com%2Fa4988-stepper-motor-driver-arduino-tutorial%2F&amp;is_video=false&amp;description=A4988%20Arduino%20stepper%20motor%20wiring%20schematic%20diagram%20pinout"><span class="dpsp-network-icon"><svg xmlns="http://www.w3.org/2000/svg" width="23" height="32" viewBox="0 0 23 32"><path d="M0 10.656q0-1.92 0.672-3.616t1.856-2.976 2.72-2.208 3.296-1.408 3.616-0.448q2.816 0 5.248 1.184t3.936 3.456 1.504 5.12q0 1.728-0.32 3.36t-1.088 3.168-1.792 2.656-2.56 1.856-3.392 0.672q-1.216 0-2.4-0.576t-1.728-1.568q-0.16 0.704-0.48 2.016t-0.448 1.696-0.352 1.28-0.48 1.248-0.544 1.12-0.832 1.408-1.12 1.536l-0.224 0.096-0.16-0.192q-0.288-2.816-0.288-3.36 0-1.632 0.384-3.68t1.184-5.152 0.928-3.616q-0.576-1.152-0.576-3.008 0-1.504 0.928-2.784t2.368-1.312q1.088 0 1.696 0.736t0.608 1.824q0 1.184-0.768 3.392t-0.8 3.36q0 1.12 0.8 1.856t1.952 0.736q0.992 0 1.824-0.448t1.408-1.216 0.992-1.696 0.672-1.952 0.352-1.984 0.128-1.792q0-3.072-1.952-4.8t-5.12-1.728q-3.552 0-5.952 2.304t-2.4 5.856q0 0.8 0.224 1.536t0.48 1.152 0.48 0.832 0.224 0.544q0 0.48-0.256 1.28t-0.672 0.8q-0.032 0-0.288-0.032-0.928-0.288-1.632-0.992t-1.088-1.696-0.576-1.92-0.192-1.92z"></path></svg></span>Save</a></div><noscript><img src="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout-1-1024x551.jpg" alt="A4988 Arduino stepper motor wiring schematic diagram pinout" class="wp-image-2866"/></noscript><figcaption>Wiring diagram/schematic for A4988 stepper motor driver with Arduino and stepper motor.</figcaption></figure><p>The wiring diagram/schematic above shows you how to connect the A4899 driver to a stepper motor and the Arduino.</p><p>The connections are also given in the following table:</p><h3>A4988 Connections</h3><figure class="wp-block-table is-style-stripes"><table class="has-fixed-layout"><thead><tr><th>A4988</th><th>Connection</th></tr></thead><tbody><tr><td>VMOT</td><td>8-35V</td></tr><tr><td>GND</td><td>Motor ground</td></tr><tr><td>SLP</td><td>RESET</td></tr><tr><td>RST</td><td>SLP</td></tr><tr><td>VDD</td><td>5V</td></tr><tr><td>GND</td><td>Logic ground</td></tr><tr><td>STP</td><td>Pin 3</td></tr><tr><td>DIR</td><td>Pin 2</td></tr><tr><td>1A, 1B, 2A, 2B</td><td>Stepper motor</td></tr></tbody></table></figure><ul><li>The motor power supply is connected to GND and VMOT (top right).</li><li>The two coils of the stepper motor are connected to 1A, 1B and 2A, 2B (see below).</li><li>The GND pin (lower right) is connected to the ground pin of the microcontroller and VDD is connected to 5V.</li><li>The
 STP (step) and DIR (direction) pin are connected to digital pin 3 and 2
 respectively. You can choose a different digital pin if you want, but 
these are the ones I used for this tutorial and the example code.</li><li>The
 SLP pin is an active low input. Meaning, pulling this pin low puts the 
driver in sleep mode, minimizing the power consumption. RST is also an 
active low input. When pulled low, all STEP inputs are ignored until you
 pull it high. If you are not using the pin, you can connect it to the 
adjacent SLP/SLEEP pin to bring it high and enable the driver.</li><li>The EN (enable) pin can be left disconnected, it is pulled low by default. When this pin is set high the driver is disabled.</li></ul><p>In the rest of this tutorial&nbsp;<strong>I have left MS1, MS2 and MS3 disconnected</strong>, so the driver operates in&nbsp;<strong>full-step mode</strong>.
 This makes explaining the code a bit easier. Normally I would use 1/8 
or 1/16 microstepping and connect the appropriate pins to 5V (see the 
table in the introduction).</p><center><script async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/adsbygoogle.js"></script>  <ins class="adsbygoogle" style="display:block; margin-bottom:20px; background-color:transparant; width:336px; height:280px;" data-ad-client="ca-pub-9246321331815157" data-ad-slot="2873149505" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done"><ins id="aswift_4_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"><ins id="aswift_4_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></center><h3>Warning</h3><p>The
 A4988 carrier board uses low-ESR ceramic capacitors, which makes it 
susceptible to destructive LC voltage spikes, especially when using 
power leads longer than a few inches.</p><p>To protect the driver you 
can connect an electrolytic capacitor between VMOT and GND. Pololu 
suggests a capacitor of 47 µF or more (I used a 100 µF capacitor). I 
like these&nbsp;<a rel="noreferrer noopener" href="https://amzn.to/2LXWTKk" target="_blank">assortment boxes</a>&nbsp;from Amazon, this way I always have some capacitors of the right size on hand.</p><h3>How to determine the correct stepper motor wiring?</h3><p>If
 you can’t find the datasheet of your stepper motor, it can be difficult
 to figure out how to wire your motor correctly. I use the following 
trick to determine how to connect 4 wire bipolar stepper motors:</p><p>The only thing you need to identify is the&nbsp;<strong>two pairs of wires</strong>&nbsp;which
 are connected to the two coils of the motor. The wires from one coil 
get connected to 1A and 1B and the other to 2A and 2B, the polarity 
doesn’t matter.</p><p>To find the two wires from one coil, do the following with the motor disconnected:</p><ol><li>Try to spin the shaft of the stepper motor by hand and notice how hard it is to turn.</li><li>Now pick a random pair of wires from the motor and touch the bare ends together.</li><li>Next, try to spin the shaft of the stepper motor again.</li></ol><p><strong>If you feel a lot of resistance, you have found a pair of wires from the same coil.</strong>&nbsp;If
 you can spin the shaft freely, try another pair of wires. Now connect 
the two coils to the pins shown in the wiring diagram above.</p><p><em>(If it is still unclear, please leave a comment below, more info can also be found on the&nbsp;<a href="https://reprap.org/wiki/Stepper_wiring" target="_blank" rel="noreferrer noopener">RepRap.org wiki</a>)</em></p><hr class="wp-block-separator is-style-wide"><h2 id="current-limit">How to set the current limit?</h2><p>Before you start programming your Arduino and start using the driver there is one very&nbsp;<strong>important&nbsp;</strong>thing you need to do that&nbsp;<strong>a lot of people forget</strong>: set the current limit!</p><p>This
 step is not very complicated but absolutely necessary to protect your 
stepper motor and the driver. If you do not set an appropriate current 
limit, your motor can draw more current than it or your driver can 
handle, this is likely to damage one or both of them.</p><p>To set the 
current limit you need to measure a reference voltage and adjust the 
on-board potentiometer accordingly. You will need a&nbsp;<a href="https://www.makerguides.com/tools/">small screwdriver</a>, a&nbsp;<a href="https://www.makerguides.com/tools/">multimeter</a>&nbsp;to measure the reference voltage, and alligator test leads (optional but very handy).</p><div class="wp-block-image"><figure class="aligncenter size-large"><img src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%200%200'%3E%3C/svg%3E" alt="A4988 current limit wiring diagram schematic" class="wp-image-2191" data-lazy-src="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-current-limit-wiring-diagram-schematic-e1560009202882.png" data-pin-nopin="true"><noscript><img src="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-current-limit-wiring-diagram-schematic-e1560009202882.png" alt="A4988 current limit wiring diagram schematic" class="wp-image-2191"/></noscript><figcaption>Current limit wiring diagram for A4988 driver.</figcaption></figure></div><p>To
 measure the reference voltage, the driver needs to be powered. The 
A4988 only needs power via VDD (5V) and you need to connect RST and SLP 
together, otherwise the driver won’t turn on. It’s best to disconnect 
the stepper motor while you do this.</p><center><script async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/adsbygoogle.js"></script>  <ins class="adsbygoogle" style="display:block; margin-bottom:20px; background-color:transparant; width:336px; height:280px;" data-ad-client="ca-pub-9246321331815157" data-ad-slot="2873149505" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done"><ins id="aswift_5_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"><ins id="aswift_5_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></center><p>If
 you have already wired up the driver, you can leave everything but the 
stepper motor connected. You can apply power through the USB port of the
 Arduino.</p><figure class="wp-block-table is-style-stripes"><table class="has-fixed-layout"><thead><tr><th>A4988</th><th>Connection</th></tr></thead><tbody><tr><td>VDD</td><td>5V</td></tr><tr><td>RST</td><td>SLP</td></tr><tr><td>SLP</td><td>RESET</td></tr><tr><td>GND</td><td>Ground</td></tr></tbody></table><figcaption>Required connections to set the current limit</figcaption></figure><h3>Current limit formula</h3><p>The next step is to calculate the current limit with the following formula:</p><p class="has-text-align-center has-large-font-size"><strong>Current Limit = Vref ÷ (8 × Rcs)</strong></p><p>The Rcs is the current sense resistance. If you bought a A4988 driver from Pololu before January 2017, the Rcs will be&nbsp;<strong>0.050 Ω</strong>. Drivers sold after that have&nbsp;<strong>0.068 Ω</strong>&nbsp;current sense resistors.</p><p>So this means that for a current limit of 1A for a board with 0.068 Ω current sense resistors, the Vref should be 540 mV.</p><div class="wp-block-image"><figure class="aligncenter size-large"><img src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%200%200'%3E%3C/svg%3E" alt="Current-sense-resistor-locations-for-A4988-stepper-motor-driver-Pololu" class="wp-image-2348" data-lazy-src="https://www.makerguides.com/wp-content/uploads/2019/02/Current-sense-resistor-locations-for-A4988-stepper-motor-driver-Pololu-1-e1560162103689.jpg" data-pin-nopin="true"><noscript><img src="https://www.makerguides.com/wp-content/uploads/2019/02/Current-sense-resistor-locations-for-A4988-stepper-motor-driver-Pololu-1-e1560162103689.jpg" alt="Current-sense-resistor-locations-for-A4988-stepper-motor-driver-Pololu" class="wp-image-2348"/></noscript><figcaption>Current sense resistor locations. Picture: www.pololu.com</figcaption></figure></div><p>To
 select the right current limit, take a look at the datasheet of your 
stepper motor. If you can’t find the current rating of your motor, I 
recommend starting with a current limit of 1A. You can always increase 
it later if your motor/driver is missing steps.</p><p><em>Bonus info: 
When using the driver in full-step mode, the current through each coil 
is limited to approximately 70% of the set current limit. This means 
that you would need to set the current limit 40% higher or 1.4 A in 
full-step mode. When using microstepping, the formula above applies.</em></p><p>Note that you need to re-calibrate the current limit if you change the motor power supply voltage.&nbsp;<strong>If your motor is making a lot of noise, try to lower the current limit.</strong>&nbsp;It’s best to set the current limit just high enough so the motor doesn’t miss steps.</p><h3>Measuring Vref</h3><p>Now
 you will need to measure the reference voltage (Vref) between the two 
points marked on the picture below (GND and the potentiometer) and 
adjust it to the value you calculated.</p><div class="wp-block-image"><figure class="aligncenter size-large"><img src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%200%200'%3E%3C/svg%3E" alt="A4988 Current limit probe points" class="wp-image-2190" data-lazy-srcset="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Current-limit-probe-points.png 369w, https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Current-limit-probe-points-300x259.png 300w" data-lazy-sizes="(max-width: 369px) 100vw, 369px" data-lazy-src="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Current-limit-probe-points.png" data-pin-nopin="true"><noscript><img src="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Current-limit-probe-points.png" alt="A4988 Current limit probe points" class="wp-image-2190" srcset="https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Current-limit-probe-points.png 369w, https://www.makerguides.com/wp-content/uploads/2019/02/A4988-Current-limit-probe-points-300x259.png 300w" sizes="(max-width: 369px) 100vw, 369px" /></noscript><figcaption>Vref probe points (GND and potentiometer).</figcaption></figure></div><p>I recommend using&nbsp;<a href="https://amzn.to/2E9uj2F" target="_blank" rel="noreferrer noopener">alligator test leads</a>&nbsp;clamped
 to the screwdriver to set the current limit. This allows you to adjust 
the potentiometer and measure the reference voltage at the same time.</p><p>Note:
 There is another way to measure the current limit and that is to 
directly measure the current draw of the stepper motor. Personally I 
find the above method a lot easier.</p><p>Pololu&nbsp;mentions the following on their website:</p><blockquote class="wp-block-quote"><p><em>Note:
 The coil current can be very different from the power supply current, 
so you should not use the current measured at the power supply to set 
the current limit. The appropriate place to put your current meter is in
 series with one of your stepper motor coils.</em></p><cite><a rel="noreferrer noopener" href="https://www.pololu.com/" target="_blank">Pololu</a></cite></blockquote><h3>Current limit FAQ</h3><p><strong>Do I need to have the stepper motor connected or not?</strong><br>No,
 you don’t need to connect the stepper motor to the driver when setting 
the current limit. To be on the safe side, disconnect your motor, it 
sometimes interferes with measuring the Vref voltage.</p><p><strong>Do I need to turn the motor by running the Arduino motor sketch?</strong><br>No, see question above.</p><p><strong>Do I need to turn the potentiometer clock- or counterclockwise to raise Vref?</strong><br>This
 depends on the manufacturer of the driver. If you have a genuine Polulu
 breakout board of the DRV8825 or A4988 you turn the potentiometer 
clockwise to raise Vref and counterclockwise to lower it.</p><center><script async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/adsbygoogle.js"></script>  <ins class="adsbygoogle" style="display:block; margin-bottom:20px; background-color:transparant; width:336px; height:280px;" data-ad-client="ca-pub-9246321331815157" data-ad-slot="2873149505" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done"><ins id="aswift_6_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"><ins id="aswift_6_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></center><hr class="wp-block-separator is-style-wide"><h2>Cooling the driver</h2><p>The
 A4988 driver IC has a maximum current rating of 2 A per coil, but 
without a heat sink it can only supply about 1 A per coil before it 
starts to overheat.</p><p>The driver usually comes with a small 
adhesive-backed heat sink, which I recommend you to install right away. 
You can also buy&nbsp;<a href="https://amzn.to/2VPaLLx" target="_blank" rel="noreferrer noopener">a bunch of small heat sinks</a>&nbsp;from Amazon for really cheap.</p><hr class="wp-block-separator is-style-wide"><h2>Basic Arduino example code to control a stepper motor</h2><p>Now
 that you have wired up the driver and set the current limit, it is time
 to connect the Arduino to the computer and upload some code. You can 
upload the following example code to your Arduino using the&nbsp;<a href="https://www.arduino.cc/en/main/software" target="_blank" rel="noreferrer noopener">Arduino IDE</a>. For this specific example, you do not need to install any libraries.</p><p>This sketch controls both the speed, the number of revolutions, and the spinning direction of the stepper motor.</p><p>You can copy the code by clicking on the button in the top right corner of the code field.</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c1">/*Example sketch to control a stepper motor with A4988 stepper motor driver and Arduino without a library. More info: https://www.makerguides.com */</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Define stepper motor connections and steps per revolution:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define dirPin 2</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define stepPin 3</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define stepsPerRevolution 200</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">setup</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Declare pins as output:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">pinMode</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepPin, OUTPUT</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">pinMode</span><span class="enlighter-g1">(</span><span class="enlighter-text">dirPin, OUTPUT</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">loop</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the spinning direction clockwise:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">dirPin, HIGH</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Spin the stepper motor 1 revolution slowly:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k1">for</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k5">int</span><span class="enlighter-text"> i = 0; i </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text"> stepsPerRevolution; i++</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">   </span><span class="enlighter-c0"> // These four lines result in 1 step:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepPin, HIGH</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">delayMicroseconds</span><span class="enlighter-g1">(</span><span class="enlighter-text">2000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepPin, LOW</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">delayMicroseconds</span><span class="enlighter-g1">(</span><span class="enlighter-text">2000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">delay</span><span class="enlighter-g1">(</span><span class="enlighter-text">1000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the spinning direction counterclockwise:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">dirPin, LOW</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Spin the stepper motor 1 revolution quickly:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k1">for</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k5">int</span><span class="enlighter-text"> i = 0; i </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text"> stepsPerRevolution; i++</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">   </span><span class="enlighter-c0"> // These four lines result in 1 step:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepPin, HIGH</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">delayMicroseconds</span><span class="enlighter-g1">(</span><span class="enlighter-text">1000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepPin, LOW</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">delayMicroseconds</span><span class="enlighter-g1">(</span><span class="enlighter-text">1000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">delay</span><span class="enlighter-g1">(</span><span class="enlighter-text">1000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the spinning direction clockwise:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">dirPin, HIGH</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Spin the stepper motor 5 revolutions fast:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k1">for</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k5">int</span><span class="enlighter-text"> i = 0; i </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text"> 5 * stepsPerRevolution; i++</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">   </span><span class="enlighter-c0"> // These four lines result in 1 step:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepPin, HIGH</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">delayMicroseconds</span><span class="enlighter-g1">(</span><span class="enlighter-text">500</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepPin, LOW</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">delayMicroseconds</span><span class="enlighter-g1">(</span><span class="enlighter-text">500</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">delay</span><span class="enlighter-g1">(</span><span class="enlighter-text">1000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the spinning direction counterclockwise:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">dirPin, LOW</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> //Spin the stepper motor 5 revolutions fast:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k1">for</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k5">int</span><span class="enlighter-text"> i = 0; i </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text"> 5 * stepsPerRevolution; i++</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">   </span><span class="enlighter-c0"> // These four lines result in 1 step:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepPin, HIGH</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">delayMicroseconds</span><span class="enlighter-g1">(</span><span class="enlighter-text">500</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepPin, LOW</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">delayMicroseconds</span><span class="enlighter-g1">(</span><span class="enlighter-text">500</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">delay</span><span class="enlighter-g1">(</span><span class="enlighter-text">1000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">/*Example sketch to control a stepper motor with A4988 stepper motor driver and Arduino without a library. More info: https://www.makerguides.com */

// Define stepper motor connections and steps per revolution:
#define dirPin 2
#define stepPin 3
#define stepsPerRevolution 200

void setup() {
  // Declare pins as output:
  pinMode(stepPin, OUTPUT);
  pinMode(dirPin, OUTPUT);
}

void loop() {
  // Set the spinning direction clockwise:
  digitalWrite(dirPin, HIGH);

  // Spin the stepper motor 1 revolution slowly:
  for (int i = 0; i &lt; stepsPerRevolution; i++) {
    // These four lines result in 1 step:
    digitalWrite(stepPin, HIGH);
    delayMicroseconds(2000);
    digitalWrite(stepPin, LOW);
    delayMicroseconds(2000);
  }

  delay(1000);

  // Set the spinning direction counterclockwise:
  digitalWrite(dirPin, LOW);

  // Spin the stepper motor 1 revolution quickly:
  for (int i = 0; i &lt; stepsPerRevolution; i++) {
    // These four lines result in 1 step:
    digitalWrite(stepPin, HIGH);
    delayMicroseconds(1000);
    digitalWrite(stepPin, LOW);
    delayMicroseconds(1000);
  }

  delay(1000);

  // Set the spinning direction clockwise:
  digitalWrite(dirPin, HIGH);

  // Spin the stepper motor 5 revolutions fast:
  for (int i = 0; i &lt; 5 * stepsPerRevolution; i++) {
    // These four lines result in 1 step:
    digitalWrite(stepPin, HIGH);
    delayMicroseconds(500);
    digitalWrite(stepPin, LOW);
    delayMicroseconds(500);
  }

  delay(1000);

  // Set the spinning direction counterclockwise:
  digitalWrite(dirPin, LOW);

  //Spin the stepper motor 5 revolutions fast:
  for (int i = 0; i &lt; 5 * stepsPerRevolution; i++) {
    // These four lines result in 1 step:
    digitalWrite(stepPin, HIGH);
    delayMicroseconds(500);
    digitalWrite(stepPin, LOW);
    delayMicroseconds(500);
  }

  delay(1000);
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">/*Example sketch to control a stepper motor with A4988 stepper motor driver and Arduino without a library. More info: https://www.makerguides.com */

// Define stepper motor connections and steps per revolution:
#define dirPin 2
#define stepPin 3
#define stepsPerRevolution 200

void setup() {
  // Declare pins as output:
  pinMode(stepPin, OUTPUT);
  pinMode(dirPin, OUTPUT);
}

void loop() {
  // Set the spinning direction clockwise:
  digitalWrite(dirPin, HIGH);

  // Spin the stepper motor 1 revolution slowly:
  for (int i = 0; i &lt; stepsPerRevolution; i++) {
    // These four lines result in 1 step:
    digitalWrite(stepPin, HIGH);
    delayMicroseconds(2000);
    digitalWrite(stepPin, LOW);
    delayMicroseconds(2000);
  }

  delay(1000);

  // Set the spinning direction counterclockwise:
  digitalWrite(dirPin, LOW);

  // Spin the stepper motor 1 revolution quickly:
  for (int i = 0; i &lt; stepsPerRevolution; i++) {
    // These four lines result in 1 step:
    digitalWrite(stepPin, HIGH);
    delayMicroseconds(1000);
    digitalWrite(stepPin, LOW);
    delayMicroseconds(1000);
  }

  delay(1000);

  // Set the spinning direction clockwise:
  digitalWrite(dirPin, HIGH);

  // Spin the stepper motor 5 revolutions fast:
  for (int i = 0; i &lt; 5 * stepsPerRevolution; i++) {
    // These four lines result in 1 step:
    digitalWrite(stepPin, HIGH);
    delayMicroseconds(500);
    digitalWrite(stepPin, LOW);
    delayMicroseconds(500);
  }

  delay(1000);

  // Set the spinning direction counterclockwise:
  digitalWrite(dirPin, LOW);

  //Spin the stepper motor 5 revolutions fast:
  for (int i = 0; i &lt; 5 * stepsPerRevolution; i++) {
    // These four lines result in 1 step:
    digitalWrite(stepPin, HIGH);
    delayMicroseconds(500);
    digitalWrite(stepPin, LOW);
    delayMicroseconds(500);
  }

  delay(1000);
}</pre><h3>How the code works:</h3><p>The sketch starts with defining the step and direction pins. I connected them to Arduino pin 3 and 2.</p><p>The statement&nbsp;<code>#define</code>&nbsp;is
 used to give a name to a constant value. The compiler will replace any 
references to this constant with the defined value when the program is 
compiled. So everywhere you mention&nbsp;<code>dirPin</code>, the compiler will replace it with the value 2 when the program is compiled.</p><center><script async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/adsbygoogle.js"></script>  <ins class="adsbygoogle" style="display:block; margin-bottom:20px; background-color:transparant; width:336px; height:280px;" data-ad-client="ca-pub-9246321331815157" data-ad-slot="2873149505" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done"><ins id="aswift_7_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"><ins id="aswift_7_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></center><p>I also defined a&nbsp;<code>stepsPerRevolution</code>&nbsp;constant.
 Because I set the driver to full step mode I set it to 200 steps per 
revolution. Change this value if your setup is different.</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style="counter-reset: enlighter 2"><div class=""><div><span class="enlighter-c0">// Define stepper motor connections and steps per revolution:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define dirPin 2</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define stepPin 3</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define stepsPerRevolution 200</span></div></div></div><div class="enlighter-raw">// Define stepper motor connections and steps per revolution:
#define dirPin 2
#define stepPin 3
#define stepsPerRevolution 200</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="3" data-enlighter-title="" data-enlighter-group="">// Define stepper motor connections and steps per revolution:
#define dirPin 2
#define stepPin 3
#define stepsPerRevolution 200</pre><p>In the&nbsp;<code>setup()</code>&nbsp;section of the code, all the motor control pins are declared as digital OUTPUT with the function&nbsp;<code>pinMode()</code>.</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style="counter-reset: enlighter 7"><div class=""><div><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">setup</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Declare pins as output:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">pinMode</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepPin, OUTPUT</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">pinMode</span><span class="enlighter-g1">(</span><span class="enlighter-text">dirPin, OUTPUT</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">void setup() {
  // Declare pins as output:
  pinMode(stepPin, OUTPUT);
  pinMode(dirPin, OUTPUT);
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="8" data-enlighter-title="" data-enlighter-group="">void setup() {
  // Declare pins as output:
  pinMode(stepPin, OUTPUT);
  pinMode(dirPin, OUTPUT);
}</pre><p>In the&nbsp;<code>loop()</code>&nbsp;section of the code, we 
let the motor spin one revolution slowly in the CW direction and one 
revolution quickly in the CCW direction. Next, we let the motor spin 5 
revolutions in each direction with a high speed. So how do you control 
the speed, spinning direction, and number of revolutions?</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style="counter-reset: enlighter 14"><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the spinning direction clockwise:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">dirPin, HIGH</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Spin the stepper motor 1 revolution slowly:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k1">for</span><span class="enlighter-g1">(</span><span class="enlighter-k5">int</span><span class="enlighter-text"> i = 0; i </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text"> stepsPerRevolution; i++</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">   </span><span class="enlighter-c0"> // These four lines result in 1 step:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepPin, HIGH</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">delayMicroseconds</span><span class="enlighter-g1">(</span><span class="enlighter-text">2000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">digitalWrite</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepPin, LOW</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">delayMicroseconds</span><span class="enlighter-g1">(</span><span class="enlighter-text">2000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">  // Set the spinning direction clockwise:
  digitalWrite(dirPin, HIGH);

  // Spin the stepper motor 1 revolution slowly:
  for(int i = 0; i &lt; stepsPerRevolution; i++)
  {
    // These four lines result in 1 step:
    digitalWrite(stepPin, HIGH);
    delayMicroseconds(2000);
    digitalWrite(stepPin, LOW);
    delayMicroseconds(2000);
  }</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="15" data-enlighter-title="" data-enlighter-group="">  // Set the spinning direction clockwise:
  digitalWrite(dirPin, HIGH);

  // Spin the stepper motor 1 revolution slowly:
  for(int i = 0; i &lt; stepsPerRevolution; i++)
  {
    // These four lines result in 1 step:
    digitalWrite(stepPin, HIGH);
    delayMicroseconds(2000);
    digitalWrite(stepPin, LOW);
    delayMicroseconds(2000);
  }</pre><h4>Control spinning direction:</h4><p>To control the spinning 
direction of the stepper motor we set the DIR (direction) pin either 
HIGH or LOW. For this we use the function&nbsp;<code>digitalWrite()</code>. Depending on how you connected the stepper motor, setting the DIR pin high will let the motor turn CW or CCW.</p><h4>Control number of steps or revolutions:</h4><p>In this example sketch, the&nbsp;<a href="https://www.arduino.cc/reference/en/language/structure/control-structure/for/" target="_blank" rel="noreferrer noopener">for loops</a>&nbsp;control
 the number of steps the stepper motor will take. The code within the 
for loop results in 1 step of the stepper motor. Because the code in the
 loop is executed 200 times (stepsPerRevolution), this results in 1 
revolution. In the last two loops, the code within the for loop is 
executed 1000 times, which results in 1000 steps or 5 revolutions.</p><p>Note that you can change the second term in the for loop to whatever number of steps you want.&nbsp;<code>for(int i = 0; i &lt; 100; i++)</code>&nbsp;would result in 100 steps, or half a revolution.</p><h4>Control speed:</h4><p>The
 speed of the stepper motor is determined by the frequency of the pulses
 we send to the STEP pin. The higher the frequency, the faster the motor
 runs. You can control the frequency of the pulses by changing&nbsp;<code>delayMicroseconds()</code>&nbsp;in the code. The shorter the delay, the higher the frequency, the faster the motor runs.</p><center><script async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/adsbygoogle.js"></script>  <ins class="adsbygoogle" style="display:block; margin-bottom:20px; background-color:transparant; width:336px; height:280px;" data-ad-client="ca-pub-9246321331815157" data-ad-slot="2873149505" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done"><ins id="aswift_8_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"><ins id="aswift_8_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></center><hr class="wp-block-separator is-style-wide"><h2>AccelStepper library tutorial</h2><p>The
 AccelStepper library written by Mike McCauley is an awesome library to 
use for your project. One of the advantages is that it supports 
acceleration and deceleration, but it has a lot of other nice functions 
too.</p><p>You can download the latest version of this library&nbsp;<a rel="noreferrer noopener" href="https://www.airspayce.com/mikem/arduino/AccelStepper/index.html" target="_blank">here</a>&nbsp;or click the button below.</p><div class="wp-block-buttons aligncenter"><div class="wp-block-button download-icon"><a class="wp-block-button__link" href="https://www.makerguides.com/wp-content/uploads/2019/02/AccelStepper-1.59.zip" target="_blank" rel="noreferrer noopener">AccelStepper-1.59.zip</a></div></div><p>You can install the library by going to<strong>&nbsp;Sketch &gt; Include Library &gt; Add .ZIP Library…&nbsp;</strong>in the Arduino IDE.</p><p>Another option is to navigate to&nbsp;<strong>Tools &gt; Manage Libraries…</strong>&nbsp;or type Ctrl + Shift + I on Windows. The Library Manager will open and update the list of installed libraries.</p><div class="wp-block-image"><figure class="aligncenter size-large"><img src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%200%200'%3E%3C/svg%3E" alt="Installing an Arduino library step 1 open Library Manager" class="wp-image-2919" data-lazy-srcset="https://www.makerguides.com/wp-content/uploads/2019/02/Installing-an-Arduino-library-step-1-open-Library-Manager.png 486w, https://www.makerguides.com/wp-content/uploads/2019/02/Installing-an-Arduino-library-step-1-open-Library-Manager-300x254.png 300w" data-lazy-sizes="(max-width: 486px) 100vw, 486px" data-lazy-src="https://www.makerguides.com/wp-content/uploads/2019/02/Installing-an-Arduino-library-step-1-open-Library-Manager.png" data-pin-nopin="true"><noscript><img src="https://www.makerguides.com/wp-content/uploads/2019/02/Installing-an-Arduino-library-step-1-open-Library-Manager.png" alt="Installing an Arduino library step 1 open Library Manager" class="wp-image-2919" srcset="https://www.makerguides.com/wp-content/uploads/2019/02/Installing-an-Arduino-library-step-1-open-Library-Manager.png 486w, https://www.makerguides.com/wp-content/uploads/2019/02/Installing-an-Arduino-library-step-1-open-Library-Manager-300x254.png 300w" sizes="(max-width: 486px) 100vw, 486px" /></noscript></figure></div><p>You can search for&nbsp;<strong>‘accelstepper’</strong>&nbsp;and look for the library by Mike McCauley. Select the latest version and then click Install.</p><div class="wp-block-image"><figure class="aligncenter size-large"><img src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%200%200'%3E%3C/svg%3E" alt="Installing an Arduino library step 2 AccelStepper" class="wp-image-2930" data-lazy-src="https://www.makerguides.com/wp-content/uploads/2019/02/Installing-an-Arduino-library-step-2-AccelStepper-e1559041995880.png" data-pin-nopin="true"><noscript><img src="https://www.makerguides.com/wp-content/uploads/2019/02/Installing-an-Arduino-library-step-2-AccelStepper-e1559041995880.png" alt="Installing an Arduino library step 2 AccelStepper" class="wp-image-2930"/></noscript></figure></div><hr class="wp-block-separator is-style-wide"><h2>1. Continuous rotation example code</h2><p>The
 following sketch can be used to run one or more stepper motors 
continuously at a constant speed. (No acceleration or deceleration is 
used).</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c1">/*Example sketch to control a stepper motor with A4988 stepper motor driver, AccelStepper library and Arduino: continuous rotation. More info: https://www.makerguides.com */</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Include the AccelStepper library:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#include &lt;AccelStepper.h&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Define stepper motor connections and motor interface type. Motor interface type must be set to 1 when using a driver:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define dirPin 2</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define stepPin 3</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define motorInterfaceType 1</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Create a new instance of the AccelStepper class:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">AccelStepper stepper = </span><span class="enlighter-m0">AccelStepper</span><span class="enlighter-g1">(</span><span class="enlighter-text">motorInterfaceType, stepPin, dirPin</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">setup</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the maximum speed in steps per second:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">setMaxSpeed</span><span class="enlighter-g1">(</span><span class="enlighter-text">1000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">loop</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the speed in steps per second:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">setSpeed</span><span class="enlighter-g1">(</span><span class="enlighter-text">400</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Step the motor with a constant speed as set by setSpeed():</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">runSpeed</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">/*Example sketch to control a stepper motor with A4988 stepper motor driver, AccelStepper library and Arduino: continuous rotation. More info: https://www.makerguides.com */

// Include the AccelStepper library:
#include &lt;AccelStepper.h&gt;

// Define stepper motor connections and motor interface type. Motor interface type must be set to 1 when using a driver:
#define dirPin 2
#define stepPin 3
#define motorInterfaceType 1

// Create a new instance of the AccelStepper class:
AccelStepper stepper = AccelStepper(motorInterfaceType, stepPin, dirPin);

void setup() {
  // Set the maximum speed in steps per second:
  stepper.setMaxSpeed(1000);
}

void loop() {
  // Set the speed in steps per second:
  stepper.setSpeed(400);
  // Step the motor with a constant speed as set by setSpeed():
  stepper.runSpeed();
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">/*Example sketch to control a stepper motor with A4988 stepper motor driver, AccelStepper library and Arduino: continuous rotation. More info: https://www.makerguides.com */

// Include the AccelStepper library:
#include &lt;AccelStepper.h&gt;

// Define stepper motor connections and motor interface type. Motor interface type must be set to 1 when using a driver:
#define dirPin 2
#define stepPin 3
#define motorInterfaceType 1

// Create a new instance of the AccelStepper class:
AccelStepper stepper = AccelStepper(motorInterfaceType, stepPin, dirPin);

void setup() {
  // Set the maximum speed in steps per second:
  stepper.setMaxSpeed(1000);
}

void loop() {
  // Set the speed in steps per second:
  stepper.setSpeed(400);
  // Step the motor with a constant speed as set by setSpeed():
  stepper.runSpeed();
}</pre><h3>How the code works:</h3><p>The first step is to include the library with&nbsp;<code>#include &lt;AccelStepper.h&gt;</code>.</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style="counter-reset: enlighter 2"><div class=""><div><span class="enlighter-c0">// Include the AccelStepper library:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#include &lt;AccelStepper.h&gt;</span></div></div></div><div class="enlighter-raw">// Include the AccelStepper library:
#include &lt;AccelStepper.h&gt;</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="3" data-enlighter-title="" data-enlighter-group="">// Include the AccelStepper library:
#include &lt;AccelStepper.h&gt;</pre><p>The next step is to define the 
A4988 to Arduino connections and the motor interface type. The motor 
interface type must be set to 1 when using a step and direction driver. 
You can find the other interface types&nbsp;<a rel="noreferrer noopener" href="https://www.airspayce.com/mikem/arduino/AccelStepper/classAccelStepper.html#a608b2395b64ac15451d16d0371fe13ce" target="_blank">here</a>.</p><p>The statement&nbsp;<code>#define</code>&nbsp;is
 used to give a name to a constant value. The compiler will replace any 
references to this constant with the defined value when the program is 
compiled. So everywhere you mention&nbsp;<code>dirPin</code>, the compiler will replace it with the value 2 when the program is compiled.</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style="counter-reset: enlighter 5"><div class=""><div><span class="enlighter-c0">// Define stepper motor connections and motor interface type. Motor interface type must be set to 1 when using a driver:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define dirPin 2</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define stepPin 3</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define motorInterfaceType 1</span></div></div></div><div class="enlighter-raw">// Define stepper motor connections and motor interface type. Motor interface type must be set to 1 when using a driver:
#define dirPin 2
#define stepPin 3
#define motorInterfaceType 1</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="6" data-enlighter-title="" data-enlighter-group="">// Define stepper motor connections and motor interface type. Motor interface type must be set to 1 when using a driver:
#define dirPin 2
#define stepPin 3
#define motorInterfaceType 1</pre><p>Next, you need to create a new instance of the AccelStepper class with the appropriate motor interface type and connections.</p><p>In this case, I called the stepper motor ‘stepper’ but you can use other names as well, like ‘z_motor’ or ‘liftmotor’ etc.&nbsp;<code>AccelStepper liftmotor = AccelStepper(motorInterfaceType, stepPin, dirPin);</code>.
 The name that you give to the stepper motor will be used later to set 
the speed, position, and acceleration for that particular motor. You can
 create multiple instances of the AccelStepper class with different 
names and pins. This allows you to easily control 2 or more stepper 
motors at the same time.</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style="counter-reset: enlighter 10"><div class=""><div><span class="enlighter-c0">// Create a new instance of the AccelStepper class:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">AccelStepper stepper = </span><span class="enlighter-m0">AccelStepper</span><span class="enlighter-g1">(</span><span class="enlighter-text">motorInterfaceType, stepPin, dirPin</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">// Create a new instance of the AccelStepper class:
AccelStepper stepper = AccelStepper(motorInterfaceType, stepPin, dirPin);</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="11" data-enlighter-title="" data-enlighter-group="">// Create a new instance of the AccelStepper class:
AccelStepper stepper = AccelStepper(motorInterfaceType, stepPin, dirPin);</pre><p>In the&nbsp;<code>setup()</code>&nbsp;section
 of the code we define the maximum speed in steps/second. Speeds of more
 than 1000 steps per second can be unreliable, so I set this as the 
maximum. Note that I specify the name of the stepper motor (‘stepper’), 
for which I want to define the maximum speed. If you have multiple 
stepper motors connected, you can specify a different speed for each 
motor:</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style="counter-reset: enlighter 13"><div class=""><div><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">setup</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the maximum speed in steps per second:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">setMaxSpeed</span><span class="enlighter-g1">(</span><span class="enlighter-text">1000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  stepper2.</span><span class="enlighter-m3">setMaxSpeed</span><span class="enlighter-g1">(</span><span class="enlighter-text">500</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">void setup() {
  // Set the maximum speed in steps per second:
  stepper.setMaxSpeed(1000);
  stepper2.setMaxSpeed(500);
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="14" data-enlighter-title="" data-enlighter-group="">void setup() {
  // Set the maximum speed in steps per second:
  stepper.setMaxSpeed(1000);
  stepper2.setMaxSpeed(500);
}</pre><p>In the&nbsp;<code>loop()</code>&nbsp;we first set the speed that we want the motor to run at. For this, we use the function&nbsp;<code>setSpeed()</code>. (you can also place this in the setup section of the code).</p><p><code>stepper.runSpeed()</code>&nbsp;polls
 the motor and when a step is due, executes 1 step. This depends on the 
set speed and the time since the last step. If you want to change the 
direction of the motor, you can set a negative speed:&nbsp;<code>stepper.setSpeed(-400);</code>&nbsp;turns the motor the other way.</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style="counter-reset: enlighter 18"><div class=""><div><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">loop</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the speed in steps per second:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">setSpeed</span><span class="enlighter-g1">(</span><span class="enlighter-text">400</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Step the motor with a constant speed as set by setSpeed():</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">runSpeed</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">void loop() {
  // Set the speed in steps per second:
  stepper.setSpeed(400);
  // Step the motor with a constant speed as set by setSpeed():
  stepper.runSpeed();
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="19" data-enlighter-title="" data-enlighter-group="">void loop() {
  // Set the speed in steps per second:
  stepper.setSpeed(400);
  // Step the motor with a constant speed as set by setSpeed():
  stepper.runSpeed();
}</pre><center><script async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/adsbygoogle.js"></script>  <ins class="adsbygoogle" style="display:block; margin-bottom:20px; background-color:transparant; width:336px; height:280px;" data-ad-client="ca-pub-9246321331815157" data-ad-slot="2873149505" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done"><ins id="aswift_9_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"><ins id="aswift_9_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></center><hr class="wp-block-separator is-style-wide"><h2>2. Example code to control number of steps or revolutions</h2><p>To let the motor rotate a specific number of steps I prefer to use a&nbsp;<a rel="noreferrer noopener" href="https://www.arduino.cc/reference/en/language/structure/control-structure/while/" target="_blank">while loop</a>&nbsp;in combination with&nbsp;<code>stepper.currentPosition()</code>. You can use the following example code, to let the motor run back and forth.</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c1">/*Example sketch to control a stepper motor with A4988 stepper motor driver, AccelStepper library and Arduino: number of steps or revolutions. More info: https://www.makerguides.com */</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Include the AccelStepper library:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#include &lt;AccelStepper.h&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Define stepper motor connections and motor interface type. Motor interface type must be set to 1 when using a driver:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define dirPin 2</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define stepPin 3</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define motorInterfaceType 1</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Create a new instance of the AccelStepper class:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">AccelStepper stepper = </span><span class="enlighter-m0">AccelStepper</span><span class="enlighter-g1">(</span><span class="enlighter-text">motorInterfaceType, stepPin, dirPin</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">setup</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the maximum speed in steps per second:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">setMaxSpeed</span><span class="enlighter-g1">(</span><span class="enlighter-text">1000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">loop</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> </span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the current position to 0:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">setCurrentPosition</span><span class="enlighter-g1">(</span><span class="enlighter-text">0</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Run the motor forward at 200 steps/second until the motor reaches 400 steps (2 revolutions):</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k1">while</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepper.</span><span class="enlighter-m3">currentPosition</span><span class="enlighter-g1">()</span><span class="enlighter-text"> != 400</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    stepper.</span><span class="enlighter-m3">setSpeed</span><span class="enlighter-g1">(</span><span class="enlighter-text">200</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    stepper.</span><span class="enlighter-m3">runSpeed</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">delay</span><span class="enlighter-g1">(</span><span class="enlighter-text">1000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Reset the position to 0:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">setCurrentPosition</span><span class="enlighter-g1">(</span><span class="enlighter-text">0</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Run the motor backwards at 600 steps/second until the motor reaches -200 steps (1 revolution):</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k1">while</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepper.</span><span class="enlighter-m3">currentPosition</span><span class="enlighter-g1">()</span><span class="enlighter-text"> != -200</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    stepper.</span><span class="enlighter-m3">setSpeed</span><span class="enlighter-g1">(</span><span class="enlighter-text">-600</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    stepper.</span><span class="enlighter-m3">runSpeed</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">delay</span><span class="enlighter-g1">(</span><span class="enlighter-text">1000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Reset the position to 0:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">setCurrentPosition</span><span class="enlighter-g1">(</span><span class="enlighter-text">0</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Run the motor forward at 400 steps/second until the motor reaches 600 steps (3 revolutions):</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k1">while</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepper.</span><span class="enlighter-m3">currentPosition</span><span class="enlighter-g1">()</span><span class="enlighter-text"> != 600</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    stepper.</span><span class="enlighter-m3">setSpeed</span><span class="enlighter-g1">(</span><span class="enlighter-text">400</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    stepper.</span><span class="enlighter-m3">runSpeed</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">delay</span><span class="enlighter-g1">(</span><span class="enlighter-text">3000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">/*Example sketch to control a stepper motor with A4988 stepper motor driver, AccelStepper library and Arduino: number of steps or revolutions. More info: https://www.makerguides.com */

// Include the AccelStepper library:
#include &lt;AccelStepper.h&gt;

// Define stepper motor connections and motor interface type. Motor interface type must be set to 1 when using a driver:
#define dirPin 2
#define stepPin 3
#define motorInterfaceType 1

// Create a new instance of the AccelStepper class:
AccelStepper stepper = AccelStepper(motorInterfaceType, stepPin, dirPin);

void setup() {
  // Set the maximum speed in steps per second:
  stepper.setMaxSpeed(1000);
}

void loop() { 
  // Set the current position to 0:
  stepper.setCurrentPosition(0);

  // Run the motor forward at 200 steps/second until the motor reaches 400 steps (2 revolutions):
  while(stepper.currentPosition() != 400)
  {
    stepper.setSpeed(200);
    stepper.runSpeed();
  }

  delay(1000);

  // Reset the position to 0:
  stepper.setCurrentPosition(0);

  // Run the motor backwards at 600 steps/second until the motor reaches -200 steps (1 revolution):
  while(stepper.currentPosition() != -200) 
  {
    stepper.setSpeed(-600);
    stepper.runSpeed();
  }

  delay(1000);

  // Reset the position to 0:
  stepper.setCurrentPosition(0);

  // Run the motor forward at 400 steps/second until the motor reaches 600 steps (3 revolutions):
  while(stepper.currentPosition() != 600)
  {
    stepper.setSpeed(400);
    stepper.runSpeed();
  }

  delay(3000);
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">/*Example sketch to control a stepper motor with A4988 stepper motor driver, AccelStepper library and Arduino: number of steps or revolutions. More info: https://www.makerguides.com */

// Include the AccelStepper library:
#include &lt;AccelStepper.h&gt;

// Define stepper motor connections and motor interface type. Motor interface type must be set to 1 when using a driver:
#define dirPin 2
#define stepPin 3
#define motorInterfaceType 1

// Create a new instance of the AccelStepper class:
AccelStepper stepper = AccelStepper(motorInterfaceType, stepPin, dirPin);

void setup() {
  // Set the maximum speed in steps per second:
  stepper.setMaxSpeed(1000);
}

void loop() { 
  // Set the current position to 0:
  stepper.setCurrentPosition(0);

  // Run the motor forward at 200 steps/second until the motor reaches 400 steps (2 revolutions):
  while(stepper.currentPosition() != 400)
  {
    stepper.setSpeed(200);
    stepper.runSpeed();
  }

  delay(1000);

  // Reset the position to 0:
  stepper.setCurrentPosition(0);

  // Run the motor backwards at 600 steps/second until the motor reaches -200 steps (1 revolution):
  while(stepper.currentPosition() != -200) 
  {
    stepper.setSpeed(-600);
    stepper.runSpeed();
  }

  delay(1000);

  // Reset the position to 0:
  stepper.setCurrentPosition(0);

  // Run the motor forward at 400 steps/second until the motor reaches 600 steps (3 revolutions):
  while(stepper.currentPosition() != 600)
  {
    stepper.setSpeed(400);
    stepper.runSpeed();
  }

  delay(3000);
}</pre><h3>Code explanation:</h3><p>The first part of the code up to the loop() section is exactly the same as in the previous example.</p><p>In the loop I make use of a while loop in combination with the&nbsp;<code>currentPosition()</code>&nbsp;function. First, I set the current position of the stepper motor to zero with&nbsp;<code>stepper.setCurrentPosition(0)</code>.</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style="counter-reset: enlighter 19"><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the current position to 0:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">setCurrentPosition</span><span class="enlighter-g1">(</span><span class="enlighter-text">0</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">  // Set the current position to 0:
  stepper.setCurrentPosition(0);</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="20" data-enlighter-title="" data-enlighter-group="">  // Set the current position to 0:
  stepper.setCurrentPosition(0);</pre><p>Next we make use of the while 
loop. A while loop will loop continuously, and infinitely, until the 
expression inside the parenthesis, () becomes false. So, in this case, I
 check if the current position of the stepper motor is not equal to 400 
steps (!= means: is not equal to). While this is not the case, we run 
the stepper motor at a constant speed as set by&nbsp;<code>setSpeed()</code>.</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style="counter-reset: enlighter 21"><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Run the motor forward at 200 steps/second until the motor reaches 400 steps (2 revolutions):</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k1">while</span><span class="enlighter-g1">(</span><span class="enlighter-text">stepper.</span><span class="enlighter-m3">currentPosition</span><span class="enlighter-g1">()</span><span class="enlighter-text"> != 400</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    stepper.</span><span class="enlighter-m3">setSpeed</span><span class="enlighter-g1">(</span><span class="enlighter-text">200</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    stepper.</span><span class="enlighter-m3">runSpeed</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">  // Run the motor forward at 200 steps/second until the motor reaches 400 steps (2 revolutions):
  while(stepper.currentPosition() != 400)
  {
    stepper.setSpeed(200);
    stepper.runSpeed();
  }</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="22" data-enlighter-title="" data-enlighter-group="">  // Run the motor forward at 200 steps/second until the motor reaches 400 steps (2 revolutions):
  while(stepper.currentPosition() != 400)
  {
    stepper.setSpeed(200);
    stepper.runSpeed();
  }</pre><p>In the rest of the loop, we do exactly the same, just with a different speed and target position.</p><center><script async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/adsbygoogle.js"></script>  <ins class="adsbygoogle" style="display:block; margin-bottom:20px; background-color:transparant; width:336px; height:280px;" data-ad-client="ca-pub-9246321331815157" data-ad-slot="2873149505" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done"><ins id="aswift_10_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"><ins id="aswift_10_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></center><hr class="wp-block-separator is-style-wide"><h2>3. Acceleration and deceleration example code</h2><p>With
 the following sketch, you can add acceleration and deceleration to the 
movements of the stepper motor,&nbsp; without any complicated coding. In
 the following example, the motor will run back and forth with a speed 
of 200 steps per second and an acceleration of 30 steps per second per 
second.</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c1">/*Example sketch to control a stepper motor with A4988 stepper motor driver, AccelStepper library and Arduino: acceleration and deceleration. More info: https://www.makerguides.com */</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Include the AccelStepper library:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#include &lt;AccelStepper.h&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Define stepper motor connections and motor interface type. Motor interface type must be set to 1 when using a driver:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define dirPin 2</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define stepPin 3</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k4">#define motorInterfaceType 1</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0">// Create a new instance of the AccelStepper class:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">AccelStepper stepper = </span><span class="enlighter-m0">AccelStepper</span><span class="enlighter-g1">(</span><span class="enlighter-text">motorInterfaceType, stepPin, dirPin</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">setup</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the maximum speed and acceleration:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">setMaxSpeed</span><span class="enlighter-g1">(</span><span class="enlighter-text">200</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">setAcceleration</span><span class="enlighter-g1">(</span><span class="enlighter-text">30</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">loop</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the target position:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">moveTo</span><span class="enlighter-g1">(</span><span class="enlighter-text">600</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Run to target position with set speed and acceleration/deceleration:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">runToPosition</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">delay</span><span class="enlighter-g1">(</span><span class="enlighter-text">1000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Move back to zero:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">moveTo</span><span class="enlighter-g1">(</span><span class="enlighter-text">0</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">runToPosition</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-m0">delay</span><span class="enlighter-g1">(</span><span class="enlighter-text">1000</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">/*Example sketch to control a stepper motor with A4988 stepper motor driver, AccelStepper library and Arduino: acceleration and deceleration. More info: https://www.makerguides.com */

// Include the AccelStepper library:
#include &lt;AccelStepper.h&gt;

// Define stepper motor connections and motor interface type. Motor interface type must be set to 1 when using a driver:
#define dirPin 2
#define stepPin 3
#define motorInterfaceType 1

// Create a new instance of the AccelStepper class:
AccelStepper stepper = AccelStepper(motorInterfaceType, stepPin, dirPin);

void setup() {
  // Set the maximum speed and acceleration:
  stepper.setMaxSpeed(200);
  stepper.setAcceleration(30);
}

void loop() {
  // Set the target position:
  stepper.moveTo(600);
  // Run to target position with set speed and acceleration/deceleration:
  stepper.runToPosition();

  delay(1000);

  // Move back to zero:
  stepper.moveTo(0);
  stepper.runToPosition();

  delay(1000);
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">/*Example sketch to control a stepper motor with A4988 stepper motor driver, AccelStepper library and Arduino: acceleration and deceleration. More info: https://www.makerguides.com */

// Include the AccelStepper library:
#include &lt;AccelStepper.h&gt;

// Define stepper motor connections and motor interface type. Motor interface type must be set to 1 when using a driver:
#define dirPin 2
#define stepPin 3
#define motorInterfaceType 1

// Create a new instance of the AccelStepper class:
AccelStepper stepper = AccelStepper(motorInterfaceType, stepPin, dirPin);

void setup() {
  // Set the maximum speed and acceleration:
  stepper.setMaxSpeed(200);
  stepper.setAcceleration(30);
}

void loop() {
  // Set the target position:
  stepper.moveTo(600);
  // Run to target position with set speed and acceleration/deceleration:
  stepper.runToPosition();

  delay(1000);

  // Move back to zero:
  stepper.moveTo(0);
  stepper.runToPosition();

  delay(1000);
}</pre><center><script async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/adsbygoogle.js"></script>  <ins class="adsbygoogle" style="display:block; margin-bottom:20px; background-color:transparant; width:336px; height:280px;" data-ad-client="ca-pub-9246321331815157" data-ad-slot="2873149505" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done"><ins id="aswift_11_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"><ins id="aswift_11_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent;"></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></center><h3>Code explanation:</h3><p>In the setup(), besides the maximum speed, we need to define the acceleration/deceleration. For this we use the function&nbsp;<code>setAcceleration()</code>.</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style="counter-reset: enlighter 13"><div class=""><div><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">setup</span><span class="enlighter-g1">()</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the maximum speed and acceleration:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">setMaxSpeed</span><span class="enlighter-g1">(</span><span class="enlighter-text">200</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">setAcceleration</span><span class="enlighter-g1">(</span><span class="enlighter-text">30</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">void setup() {
  // Set the maximum speed and acceleration:
  stepper.setMaxSpeed(200);
  stepper.setAcceleration(30);
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="14" data-enlighter-title="" data-enlighter-group="">void setup() {
  // Set the maximum speed and acceleration:
  stepper.setMaxSpeed(200);
  stepper.setAcceleration(30);
}</pre><p>In the loop section of the code, I used a different way to let the motor rotate a predefined number of steps. The function&nbsp;<code>stepper.moveTo()</code>&nbsp;is used to set the target position. The function&nbsp;<code>stepper.runToPostion()</code>&nbsp;moves
 the motor (with acceleration/deceleration) to the target position and 
blocks until it is at the target position. Because this function is 
blocking, you shouldn’t use this when you need to control other things 
at the same time.</p><div class="enlighter-default enlighter-v-standard enlighter-t-enlighter enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Toggle RAW code"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style="counter-reset: enlighter 20"><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Set the target position:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">moveTo</span><span class="enlighter-g1">(</span><span class="enlighter-text">600</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"> </span><span class="enlighter-c0"> // Run to target position with set speed and acceleration/deceleration:</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  stepper.</span><span class="enlighter-m3">runToPosition</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">  // Set the target position:
  stepper.moveTo(600);
  // Run to target position with set speed and acceleration/deceleration:
  stepper.runToPosition();</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="21" data-enlighter-title="" data-enlighter-group="">  // Set the target position:
  stepper.moveTo(600);
  // Run to target position with set speed and acceleration/deceleration:
  stepper.runToPosition();</pre><hr class="wp-block-separator is-style-wide"><h2>Conclusion</h2><p>In
 this article I have shown you how to control a stepper motor with the 
A4988 stepper motor driver and Arduino. I hope you found it useful and 
informative. If you did, please&nbsp;<strong>share it with a friend</strong>&nbsp;who also likes electronics and making things!</p><p>I
 have personally used this driver a lot for a bunch of 3D printers and 
other CNC related projects but I would love to know what projects you 
plan on building (or have already built) with this driver. If you have 
any questions, suggestions, or if you think that things are missing in 
this tutorial,&nbsp;<strong>please leave a comment down below</strong>.</p><p>Note that comments are held for moderation to prevent spam.</p><div id="proficiency">Beginner</div><div id="dpsp-content-bottom" class="dpsp-content-wrapper dpsp-shape-rounded dpsp-size-small dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-show-total-share-count dpsp-show-total-share-count-after dpsp-button-style-1"><div class="dpsp-total-share-wrapper"><span class="dpsp-icon-total-share"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="26" height="32" viewBox="0 0 26 32"><path d="M20.8 20.8q1.984 0 3.392 1.376t1.408 3.424q0 1.984-1.408 3.392t-3.392 1.408-3.392-1.408-1.408-3.392q0-0.192 0.032-0.448t0.032-0.384l-8.32-4.992q-1.344 1.024-2.944 1.024-1.984 0-3.392-1.408t-1.408-3.392 1.408-3.392 3.392-1.408q1.728 0 2.944 0.96l8.32-4.992q0-0.128-0.032-0.384t-0.032-0.384q0-1.984 1.408-3.392t3.392-1.408 3.392 1.376 1.408 3.424q0 1.984-1.408 3.392t-3.392 1.408q-1.664 0-2.88-1.024l-8.384 4.992q0.064 0.256 0.064 0.832 0 0.512-0.064 0.768l8.384 4.992q1.152-0.96 2.88-0.96z"></path></svg></span><span class="dpsp-total-share-count">15</span><span>shares</span></div><ul class="dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-networks-btns-share dpsp-column-4 "><li><a rel="nofollow noopener noreferrer" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.makerguides.com%2Fa4988-stepper-motor-driver-arduino-tutorial%2F&amp;t=How%20to%20control%20a%20stepper%20motor%20with%20A4988%20driver%20and%20Arduino" class="dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first" target="_blank" title="Share on Facebook"><span class="dpsp-network-icon"><span class="dpsp-network-icon-before"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="18" height="32" viewBox="0 0 18 32"><path d="M17.12 0.224v4.704h-2.784q-1.536 0-2.080 0.64t-0.544 1.92v3.392h5.248l-0.704 5.28h-4.544v13.568h-5.472v-13.568h-4.544v-5.28h4.544v-3.904q0-3.328 1.856-5.152t4.96-1.824q2.624 0 4.064 0.224z"></path></svg></span><span class="dpsp-network-icon-after"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="18" height="32" viewBox="0 0 18 32"><path d="M17.12 0.224v4.704h-2.784q-1.536 0-2.080 0.64t-0.544 1.92v3.392h5.248l-0.704 5.28h-4.544v13.568h-5.472v-13.568h-4.544v-5.28h4.544v-3.904q0-3.328 1.856-5.152t4.96-1.824q2.624 0 4.064 0.224z"></path></svg></span></span><span class="dpsp-network-label-wrapper"></span></a></li><li><a rel="nofollow noopener noreferrer" href="https://twitter.com/intent/tweet?text=How%20to%20control%20a%20stepper%20motor%20with%20A4988%20driver%20and%20Arduino&amp;url=https%3A%2F%2Fwww.makerguides.com%2Fa4988-stepper-motor-driver-arduino-tutorial%2F" class="dpsp-network-btn dpsp-twitter dpsp-no-label" target="_blank" title="Share on Twitter"><span class="dpsp-network-icon"><span class="dpsp-network-icon-before"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="30" height="32" viewBox="0 0 30 32"><path d="M28.928 7.296q-1.184 1.728-2.88 2.976 0 0.256 0 0.736 0 2.336-0.672 4.64t-2.048 4.448-3.296 3.744-4.608 2.624-5.792 0.96q-4.832 0-8.832-2.592 0.608 0.064 1.376 0.064 4.032 0 7.168-2.464-1.888-0.032-3.36-1.152t-2.048-2.848q0.608 0.096 1.088 0.096 0.768 0 1.536-0.192-2.016-0.416-3.328-1.984t-1.312-3.68v-0.064q1.216 0.672 2.624 0.736-1.184-0.8-1.888-2.048t-0.704-2.752q0-1.568 0.8-2.912 2.176 2.656 5.248 4.256t6.656 1.76q-0.16-0.672-0.16-1.312 0-2.4 1.696-4.064t4.064-1.696q2.528 0 4.224 1.824 1.952-0.384 3.68-1.408-0.672 2.048-2.56 3.2 1.664-0.192 3.328-0.896z"></path></svg></span><span class="dpsp-network-icon-after"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="30" height="32" viewBox="0 0 30 32"><path d="M28.928 7.296q-1.184 1.728-2.88 2.976 0 0.256 0 0.736 0 2.336-0.672 4.64t-2.048 4.448-3.296 3.744-4.608 2.624-5.792 0.96q-4.832 0-8.832-2.592 0.608 0.064 1.376 0.064 4.032 0 7.168-2.464-1.888-0.032-3.36-1.152t-2.048-2.848q0.608 0.096 1.088 0.096 0.768 0 1.536-0.192-2.016-0.416-3.328-1.984t-1.312-3.68v-0.064q1.216 0.672 2.624 0.736-1.184-0.8-1.888-2.048t-0.704-2.752q0-1.568 0.8-2.912 2.176 2.656 5.248 4.256t6.656 1.76q-0.16-0.672-0.16-1.312 0-2.4 1.696-4.064t4.064-1.696q2.528 0 4.224 1.824 1.952-0.384 3.68-1.408-0.672 2.048-2.56 3.2 1.664-0.192 3.328-0.896z"></path></svg></span></span><span class="dpsp-network-label-wrapper"></span></a></li><li><button rel="nofollow noopener noreferrer" data-href="#" class="dpsp-network-btn dpsp-pinterest dpsp-no-label" target="_blank" title="Save to Pinterest"><span class="dpsp-network-icon"><span class="dpsp-network-icon-before"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="23" height="32" viewBox="0 0 23 32"><path d="M0 10.656q0-1.92 0.672-3.616t1.856-2.976 2.72-2.208 3.296-1.408 3.616-0.448q2.816 0 5.248 1.184t3.936 3.456 1.504 5.12q0 1.728-0.32 3.36t-1.088 3.168-1.792 2.656-2.56 1.856-3.392 0.672q-1.216 0-2.4-0.576t-1.728-1.568q-0.16 0.704-0.48 2.016t-0.448 1.696-0.352 1.28-0.48 1.248-0.544 1.12-0.832 1.408-1.12 1.536l-0.224 0.096-0.16-0.192q-0.288-2.816-0.288-3.36 0-1.632 0.384-3.68t1.184-5.152 0.928-3.616q-0.576-1.152-0.576-3.008 0-1.504 0.928-2.784t2.368-1.312q1.088 0 1.696 0.736t0.608 1.824q0 1.184-0.768 3.392t-0.8 3.36q0 1.12 0.8 1.856t1.952 0.736q0.992 0 1.824-0.448t1.408-1.216 0.992-1.696 0.672-1.952 0.352-1.984 0.128-1.792q0-3.072-1.952-4.8t-5.12-1.728q-3.552 0-5.952 2.304t-2.4 5.856q0 0.8 0.224 1.536t0.48 1.152 0.48 0.832 0.224 0.544q0 0.48-0.256 1.28t-0.672 0.8q-0.032 0-0.288-0.032-0.928-0.288-1.632-0.992t-1.088-1.696-0.576-1.92-0.192-1.92z"></path></svg></span><span class="dpsp-network-icon-after"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="23" height="32" viewBox="0 0 23 32"><path d="M0 10.656q0-1.92 0.672-3.616t1.856-2.976 2.72-2.208 3.296-1.408 3.616-0.448q2.816 0 5.248 1.184t3.936 3.456 1.504 5.12q0 1.728-0.32 3.36t-1.088 3.168-1.792 2.656-2.56 1.856-3.392 0.672q-1.216 0-2.4-0.576t-1.728-1.568q-0.16 0.704-0.48 2.016t-0.448 1.696-0.352 1.28-0.48 1.248-0.544 1.12-0.832 1.408-1.12 1.536l-0.224 0.096-0.16-0.192q-0.288-2.816-0.288-3.36 0-1.632 0.384-3.68t1.184-5.152 0.928-3.616q-0.576-1.152-0.576-3.008 0-1.504 0.928-2.784t2.368-1.312q1.088 0 1.696 0.736t0.608 1.824q0 1.184-0.768 3.392t-0.8 3.36q0 1.12 0.8 1.856t1.952 0.736q0.992 0 1.824-0.448t1.408-1.216 0.992-1.696 0.672-1.952 0.352-1.984 0.128-1.792q0-3.072-1.952-4.8t-5.12-1.728q-3.552 0-5.952 2.304t-2.4 5.856q0 0.8 0.224 1.536t0.48 1.152 0.48 0.832 0.224 0.544q0 0.48-0.256 1.28t-0.672 0.8q-0.032 0-0.288-0.032-0.928-0.288-1.632-0.992t-1.088-1.696-0.576-1.92-0.192-1.92z"></path></svg></span></span><span class="dpsp-network-label-wrapper"></span></button></li><li><a rel="nofollow noopener noreferrer" href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fwww.makerguides.com%2Fa4988-stepper-motor-driver-arduino-tutorial%2F&amp;title=How%20to%20control%20a%20stepper%20motor%20with%20A4988%20driver%20and%20Arduino&amp;summary=This%20article%20includes%20everything%20you%20need%20to%20know%20about%20controlling%20a%20stepper%20motor%20with%20the%20A4988%20stepper%20motor%20driver%20and%20Arduino.%20I%20have%20included%20a%20wiring%20diagram%2C%20a%20tutorial%20on%20how%20to%20set%20the%20current%20limit%20and%20many%20example%20codes.&amp;mini=true" class="dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last" target="_blank" title="Share on LinkedIn"><span class="dpsp-network-icon"><span class="dpsp-network-icon-before"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="27" height="32" viewBox="0 0 27 32"><path d="M6.24 11.168v17.696h-5.888v-17.696h5.888zM6.624 5.696q0 1.312-0.928 2.176t-2.4 0.864h-0.032q-1.472 0-2.368-0.864t-0.896-2.176 0.928-2.176 2.4-0.864 2.368 0.864 0.928 2.176zM27.424 18.72v10.144h-5.856v-9.472q0-1.888-0.736-2.944t-2.272-1.056q-1.12 0-1.856 0.608t-1.152 1.536q-0.192 0.544-0.192 1.44v9.888h-5.888q0.032-7.136 0.032-11.552t0-5.28l-0.032-0.864h5.888v2.56h-0.032q0.352-0.576 0.736-0.992t0.992-0.928 1.568-0.768 2.048-0.288q3.040 0 4.896 2.016t1.856 5.952z"></path></svg></span><span class="dpsp-network-icon-after"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="27" height="32" viewBox="0 0 27 32"><path d="M6.24 11.168v17.696h-5.888v-17.696h5.888zM6.624 5.696q0 1.312-0.928 2.176t-2.4 0.864h-0.032q-1.472 0-2.368-0.864t-0.896-2.176 0.928-2.176 2.4-0.864 2.368 0.864 0.928 2.176zM27.424 18.72v10.144h-5.856v-9.472q0-1.888-0.736-2.944t-2.272-1.056q-1.12 0-1.856 0.608t-1.152 1.536q-0.192 0.544-0.192 1.44v9.888h-5.888q0.032-7.136 0.032-11.552t0-5.28l-0.032-0.864h5.888v2.56h-0.032q0.352-0.576 0.736-0.992t0.992-0.928 1.568-0.768 2.048-0.288q3.040 0 4.896 2.016t1.856 5.952z"></path></svg></span></span><span class="dpsp-network-label-wrapper"></span></a></li></ul></div></div><footer class="entry-footer"><p class="entry-meta"><span class="entry-categories">Filed Under: <a href="https://www.makerguides.com/tutorials/arduino/" rel="category tag">Arduino</a>, <a href="https://www.makerguides.com/tutorials/" rel="category tag">Tutorials</a></span> <span class="entry-tags">Tagged With: <a href="https://www.makerguides.com/tag/a4988/" rel="tag">A4988</a>, <a href="https://www.makerguides.com/tag/accelstepper/" rel="tag">AccelStepper</a>, <a href="https://www.makerguides.com/tag/arduino/" rel="tag">Arduino</a>, <a href="https://www.makerguides.com/tag/driver/" rel="tag">Driver</a>, <a href="https://www.makerguides.com/tag/stepper-motor/" rel="tag">Stepper Motor</a>, <a href="https://www.makerguides.com/tag/tutorial/" rel="tag">Tutorial</a></span></p></footer></article><div class="after-entry widget-area"><section id="recent-posts-2" class="widget widget_recent_entries"><div class="widget-wrap"><h3 class="widgettitle widget-title">What to read next?</h3><ul><li> <a href="https://www.makerguides.com/automatic-plant-watering-system-with-arduino-iot-cloud/">Automatic plant watering system with Arduino IoT Cloud</a></li><li> <a href="https://www.makerguides.com/max7219-led-dot-matrix-display-arduino-tutorial/">MAX7219 LED dot matrix display Arduino tutorial</a></li><li> <a href="https://www.makerguides.com/tb6600-stepper-motor-driver-arduino-tutorial/">TB6600 Stepper Motor Driver with Arduino Tutorial</a></li><li> <a href="https://www.makerguides.com/tm1637-arduino-tutorial/">TM1637 4-digit 7-segment LED display Arduino tutorial</a></li><li> <a href="https://www.makerguides.com/tb6560-stepper-motor-driver-arduino-tutorial/">TB6560 Stepper Motor Driver with Arduino Tutorial</a></li></ul></div></section></div><h2 class="screen-reader-text">Reader Interactions</h2><div class="entry-comments" id="comments"><h3>Comments</h3><ol class="comment-list"><li class="comment even thread-even depth-1" id="comment-3164"><article id="article-comment-3164"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Thomas Clune</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-3164">July 7, 2020 at 12:17 pm</a></time></p></header><div class="comment-content"><p>I
 am planning to use the program to position the traverser on which 
trains are stored on my model railway before entering the sceniced part 
of the railway. The storage area consists of 5 tracks on a rolling stage
 which slides on drawer guides and it is imperative that the selected 
track aligns accurately with the track leading out on to the layout 
proper. I plan to select the positioning of the storage tracks with five
 corresponding push buttons.</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-3164" data-commentid="3164" data-postid="1927" data-belowelement="article-comment-3164" data-respondelement="respond" aria-label="Reply to Thomas Clune">Reply</a></div></article><ul class="children"><li class="comment byuser comment-author-benne-de-bakker bypostauthor odd alt depth-2" id="comment-3165"><article id="article-comment-3165"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Benne de Bakker</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-3165">July 7, 2020 at 2:14 pm</a></time></p></header><div class="comment-content"><p>That sounds like a cool project!</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-3165" data-commentid="3165" data-postid="1927" data-belowelement="article-comment-3165" data-respondelement="respond" aria-label="Reply to Benne de Bakker">Reply</a></div></article></li></ul></li><li class="comment even thread-odd thread-alt depth-1" id="comment-2945"><article id="article-comment-2945"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Tomy</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-2945">June 16, 2020 at 2:41 am</a></time></p></header><div class="comment-content"><p>Great introduction and practical recommendation. Cool man!</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-2945" data-commentid="2945" data-postid="1927" data-belowelement="article-comment-2945" data-respondelement="respond" aria-label="Reply to Tomy">Reply</a></div></article></li><li class="comment odd alt thread-even depth-1" id="comment-2864"><article id="article-comment-2864"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">CD</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-2864">June 5, 2020 at 2:21 am</a></time></p></header><div class="comment-content"><p>Thank you, very informative.<br>
 Can this be used with an arduino nano? (the one I have is an old 
BootLoader) I would suspect yes but just wanted to ask. Also, does the 
version mater if I’m just using the Basic Example code and not the 
accelStepper.</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-2864" data-commentid="2864" data-postid="1927" data-belowelement="article-comment-2864" data-respondelement="respond" aria-label="Reply to CD">Reply</a></div></article><ul class="children"><li class="comment byuser comment-author-benne-de-bakker bypostauthor even depth-2" id="comment-2867"><article id="article-comment-2867"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Benne de Bakker</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-2867">June 5, 2020 at 8:15 am</a></time></p></header><div class="comment-content"><p>Yes,
 you can definitely use this code with the Arduino Nano. Just make sure 
that you select the right bootloader when uploading the code.</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-2867" data-commentid="2867" data-postid="1927" data-belowelement="article-comment-2867" data-respondelement="respond" aria-label="Reply to Benne de Bakker">Reply</a></div></article></li></ul></li><li class="comment odd alt thread-odd thread-alt depth-1" id="comment-2850"><article id="article-comment-2850"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Kurt</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-2850">June 3, 2020 at 1:26 pm</a></time></p></header><div class="comment-content"><p>Perfect introduction, with very precise instructions. This gets me started right away! Thanks!</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-2850" data-commentid="2850" data-postid="1927" data-belowelement="article-comment-2850" data-respondelement="respond" aria-label="Reply to Kurt">Reply</a></div></article><ul class="children"><li class="comment byuser comment-author-benne-de-bakker bypostauthor even depth-2" id="comment-2851"><article id="article-comment-2851"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Benne de Bakker</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-2851">June 3, 2020 at 1:57 pm</a></time></p></header><div class="comment-content"><p>I’m glad you found this tutorial useful, thanks!</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-2851" data-commentid="2851" data-postid="1927" data-belowelement="article-comment-2851" data-respondelement="respond" aria-label="Reply to Benne de Bakker">Reply</a></div></article></li></ul></li><li class="comment odd alt thread-even depth-1" id="comment-2653"><article id="article-comment-2653"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Ivor Parsons</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-2653">May 8, 2020 at 1:07 pm</a></time></p></header><div class="comment-content"><p>Great
 tutorials – thanks very much. One question! I’ve just bought one of 
these A4988 drivers as the stepper I was using (a 0.9 degree/400 step 
motor) was very jerky. I need to run it at about 1 RPM – so this was 7 
steps/sec. If I’m using the A4988 at 1/16, do I just multiply the number
 of steps per revolution by 16 (so 6400)?</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-2653" data-commentid="2653" data-postid="1927" data-belowelement="article-comment-2653" data-respondelement="respond" aria-label="Reply to Ivor Parsons">Reply</a></div></article><ul class="children"><li class="comment byuser comment-author-benne-de-bakker bypostauthor even depth-2" id="comment-2668"><article id="article-comment-2668"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Benne de Bakker</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-2668">May 12, 2020 at 3:57 pm</a></time></p></header><div class="comment-content"><p>Thanks!
 That is correct, you simply multiply the number of microsteps with the 
full step resolution (400 steps/rev in this case).</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-2668" data-commentid="2668" data-postid="1927" data-belowelement="article-comment-2668" data-respondelement="respond" aria-label="Reply to Benne de Bakker">Reply</a></div></article></li></ul></li><li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1780"><article id="article-comment-1780"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">vav</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-1780">February 6, 2020 at 11:06 am</a></time></p></header><div class="comment-content"><p>im working on a robot<br> this looks like it will be super useful<br> thanks !</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-1780" data-commentid="1780" data-postid="1927" data-belowelement="article-comment-1780" data-respondelement="respond" aria-label="Reply to vav">Reply</a></div></article></li><li class="comment even thread-even depth-1" id="comment-1265"><article id="article-comment-1265"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">barath</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-1265">December 6, 2019 at 12:46 pm</a></time></p></header><div class="comment-content"><p>thanks a lott..for the person who made it.<br> it is really helpful to understand the library and ur examples are awesome.</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-1265" data-commentid="1265" data-postid="1927" data-belowelement="article-comment-1265" data-respondelement="respond" aria-label="Reply to barath">Reply</a></div></article></li><li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1021"><article id="article-comment-1021"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Yogesh Patil</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-1021">November 8, 2019 at 9:01 am</a></time></p></header><div class="comment-content"><p>Best tutorial…<br> Thank u very much.</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-1021" data-commentid="1021" data-postid="1927" data-belowelement="article-comment-1021" data-respondelement="respond" aria-label="Reply to Yogesh Patil">Reply</a></div></article></li><li class="comment even thread-even depth-1" id="comment-1013"><article id="article-comment-1013"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Ignasi</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-1013">November 7, 2019 at 11:52 pm</a></time></p></header><div class="comment-content"><p>Brilliant, I have learnt a lot with this tutorial, thanks man!<br> Cheers!</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-1013" data-commentid="1013" data-postid="1927" data-belowelement="article-comment-1013" data-respondelement="respond" aria-label="Reply to Ignasi">Reply</a></div></article></li><li class="comment odd alt thread-odd thread-alt depth-1" id="comment-928"><article id="article-comment-928"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">tms</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-928">October 27, 2019 at 8:07 am</a></time></p></header><div class="comment-content"><p>Great, thank you!</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-928" data-commentid="928" data-postid="1927" data-belowelement="article-comment-928" data-respondelement="respond" aria-label="Reply to tms">Reply</a></div></article></li><li class="comment even thread-even depth-1" id="comment-830"><article id="article-comment-830"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">David</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-830">October 13, 2019 at 1:16 am</a></time></p></header><div class="comment-content"><p>Awesome tutorials! I’ve learned a lot. Could you do tutorials incorporating limit switches?</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-830" data-commentid="830" data-postid="1927" data-belowelement="article-comment-830" data-respondelement="respond" aria-label="Reply to David">Reply</a></div></article><ul class="children"><li class="comment byuser comment-author-benne-de-bakker bypostauthor odd alt depth-2" id="comment-834"><article id="article-comment-834"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Benne de Bakker</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-834">October 13, 2019 at 9:28 am</a></time></p></header><div class="comment-content"><p>Hi David,</p><p>Thanks, that’s a great idea. I will put it on the list for new tutorials!</p><p>Benne</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-834" data-commentid="834" data-postid="1927" data-belowelement="article-comment-834" data-respondelement="respond" aria-label="Reply to Benne de Bakker">Reply</a></div></article></li></ul></li><li class="comment even thread-odd thread-alt depth-1" id="comment-465"><article id="article-comment-465"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Patrick</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-465">August 29, 2019 at 2:28 pm</a></time></p></header><div class="comment-content"><p>This tutorial is ore detailed. I really like it.</p><p>How would you do with six wires stepper motor with arduino?</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-465" data-commentid="465" data-postid="1927" data-belowelement="article-comment-465" data-respondelement="respond" aria-label="Reply to Patrick">Reply</a></div></article><ul class="children"><li class="comment byuser comment-author-benne-de-bakker bypostauthor odd alt depth-2" id="comment-466"><article id="article-comment-466"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Benne de Bakker</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-466">August 29, 2019 at 3:25 pm</a></time></p></header><div class="comment-content"><p>Most
 6-wire stepper motors can be used in unipolar or in bipolar 
configuration. Wiring the motor in bipolar configuration is probably the
 easiest.</p><p>In a 6-wire motor, you have to find the outer leads and 
skip the center common leads of the coil. The outer leads will have the 
most resistance, so just measure the resistance of different wire pairs 
with a multimeter until you find the ones with the highest resistance. 
Then you can just connect the two pairs, just like a 4 wire stepper 
motor as shown in the wiring diagram of this tutorial. See the 
reprap.org wiki for more information: <a href="https://reprap.org/wiki/Stepper_wiring" rel="nofollow ugc">https://reprap.org/wiki/Stepper_wiring</a>.</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-466" data-commentid="466" data-postid="1927" data-belowelement="article-comment-466" data-respondelement="respond" aria-label="Reply to Benne de Bakker">Reply</a></div></article></li></ul></li><li class="comment even thread-even depth-1" id="comment-447"><article id="article-comment-447"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Oskar</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-447">August 27, 2019 at 3:02 pm</a></time></p></header><div class="comment-content"><p>I really love this tutorial 😀</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-447" data-commentid="447" data-postid="1927" data-belowelement="article-comment-447" data-respondelement="respond" aria-label="Reply to Oskar">Reply</a></div></article><ul class="children"><li class="comment byuser comment-author-benne-de-bakker bypostauthor odd alt depth-2" id="comment-448"><article id="article-comment-448"><header class="comment-header"><p class="comment-author"> <span class="comment-author-name">Benne de Bakker</span> <span class="says">says:</span></p><p class="comment-meta"><time class="comment-time"><a class="comment-time-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-448">August 27, 2019 at 3:41 pm</a></time></p></header><div class="comment-content"><p>Thanks for letting me know, I am glad you liked it!</p></div><div class="comment-reply"><a rel="nofollow" class="comment-reply-link" href="#comment-448" data-commentid="448" data-postid="1927" data-belowelement="article-comment-448" data-respondelement="respond" aria-label="Reply to Benne de Bakker">Reply</a></div></article></li></ul></li></ol></div><div class="entry-pings"><h3>Trackbacks</h3><ol class="ping-list"><li id="comment-733" class="pingback even thread-even depth-1"><article id="div-comment-733" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <b class="fn"><a href="https://www.makerguides.com/tb6600-stepper-motor-driver-arduino-tutorial/" rel="external nofollow ugc" class="url">TB6600 Stepper Motor Driver with Arduino Tutorial | Makerguides.com</a></b> <span class="says">says:</span></div><div class="comment-metadata"> <a href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-733"> <time datetime="2019-10-04T18:44:00+00:00"> October 4, 2019 at 6:44 pm </time> </a></div></footer><div class="comment-content"><p>[…] How to control a stepper motor with A4988 driver and Arduino […]</p></div><div class="reply"><a rel="nofollow" class="comment-reply-link" href="#comment-733" data-commentid="733" data-postid="1927" data-belowelement="div-comment-733" data-respondelement="respond" aria-label="Reply to TB6600 Stepper Motor Driver with Arduino Tutorial | Makerguides.com">Reply</a></div></article></li><li id="comment-658" class="pingback odd alt thread-odd thread-alt depth-1"><article id="div-comment-658" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <b class="fn"><a href="https://www.makerguides.com/tb6560-stepper-motor-driver-with-arduino-tutorial/" rel="external nofollow ugc" class="url">TB6560 Stepper Motor Driver with Arduino Tutorial | Makerguides.com</a></b> <span class="says">says:</span></div><div class="comment-metadata"> <a href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-658"> <time datetime="2019-09-26T18:39:11+00:00"> September 26, 2019 at 6:39 pm </time> </a></div></footer><div class="comment-content"><p>[…] How to control a stepper motor with A4988 driver and Arduino […]</p></div><div class="reply"><a rel="nofollow" class="comment-reply-link" href="#comment-658" data-commentid="658" data-postid="1927" data-belowelement="div-comment-658" data-respondelement="respond" aria-label="Reply to TB6560 Stepper Motor Driver with Arduino Tutorial | Makerguides.com">Reply</a></div></article></li><li id="comment-521" class="pingback even thread-even depth-1"><article id="div-comment-521" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <b class="fn"><a href="https://www.makerguides.com/28byj-48-stepper-motor-arduino-tutorial/" rel="external nofollow ugc" class="url">28BYJ-48 Stepper Motor with ULN2003 + Arduino (4 Examples)</a></b> <span class="says">says:</span></div><div class="comment-metadata"> <a href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-521"> <time datetime="2019-09-08T19:27:40+00:00"> September 8, 2019 at 7:27 pm </time> </a></div></footer><div class="comment-content"><p>[…] How to control a stepper motor with A4988 driver and Arduino […]</p></div><div class="reply"><a rel="nofollow" class="comment-reply-link" href="#comment-521" data-commentid="521" data-postid="1927" data-belowelement="div-comment-521" data-respondelement="respond" aria-label="Reply to 28BYJ-48 Stepper Motor with ULN2003 + Arduino (4 Examples)">Reply</a></div></article></li><li id="comment-228" class="pingback odd alt thread-odd thread-alt depth-1"><article id="div-comment-228" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <b class="fn"><a href="https://www.makerguides.com/l298n-stepper-motor-arduino-tutorial/" rel="external nofollow ugc" class="url">How to Control a Stepper Motor with L298N and Arduino (4 Examples)</a></b> <span class="says">says:</span></div><div class="comment-metadata"> <a href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-228"> <time datetime="2019-07-10T15:01:15+00:00"> July 10, 2019 at 3:01 pm </time> </a></div></footer><div class="comment-content"><p>[…] How to control a stepper motor with A4988 driver and Arduino […]</p></div><div class="reply"><a rel="nofollow" class="comment-reply-link" href="#comment-228" data-commentid="228" data-postid="1927" data-belowelement="div-comment-228" data-respondelement="respond" aria-label="Reply to How to Control a Stepper Motor with L298N and Arduino (4 Examples)">Reply</a></div></article></li><li id="comment-65" class="pingback even thread-even depth-1"><article id="div-comment-65" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <b class="fn"><a href="https://www.makerguides.com/drv8825-stepper-motor-driver-arduino-tutorial/" rel="external nofollow ugc" class="url">How to Control Stepper Motor with DRV8825 and Arduino (4 Examples)</a></b> <span class="says">says:</span></div><div class="comment-metadata"> <a href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-65"> <time datetime="2019-05-20T20:18:33+00:00"> May 20, 2019 at 8:18 pm </time> </a></div></footer><div class="comment-content"><p>[…] […]</p></div><div class="reply"><a rel="nofollow" class="comment-reply-link" href="#comment-65" data-commentid="65" data-postid="1927" data-belowelement="div-comment-65" data-respondelement="respond" aria-label="Reply to How to Control Stepper Motor with DRV8825 and Arduino (4 Examples)">Reply</a></div></article></li><li id="comment-33" class="pingback odd alt thread-odd thread-alt depth-1"><article id="div-comment-33" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <b class="fn"><a href="https://www.makerguides.com/tutorials/arduino-motor-shield-stepper-motor/" rel="external nofollow ugc" class="url">How to Control a Stepper Motor with Arduino Motor Shield (Rev 3)</a></b> <span class="says">says:</span></div><div class="comment-metadata"> <a href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#comment-33"> <time datetime="2019-05-08T11:04:20+00:00"> May 8, 2019 at 11:04 am </time> </a></div></footer><div class="comment-content"><p>[…] […]</p></div><div class="reply"><a rel="nofollow" class="comment-reply-link" href="#comment-33" data-commentid="33" data-postid="1927" data-belowelement="div-comment-33" data-respondelement="respond" aria-label="Reply to How to Control a Stepper Motor with Arduino Motor Shield (Rev 3)">Reply</a></div></article></li></ol></div><div id="respond" class="comment-respond"><h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://www.makerguides.com/a4988-stepper-motor-driver-arduino-tutorial/#respond" style="display:none;">Cancel reply</a></small></h3><form action="https://www.makerguides.com/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate=""><p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label><textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" size="30" maxlength="245" required="required"></p><p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" size="30" maxlength="100" aria-describedby="email-notes" required="required"></p><p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" size="30" maxlength="200"></p><p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="1927" id="comment_post_ID"> <input type="hidden" name="comment_parent" id="comment_parent" value="0"></p><input type="hidden" id="ct_checkjs_a97da629b098b75c294dffdc3e463904" name="ct_checkjs" value="12cb7710d2c62c656ab139c86064a27d1806c2916603d2715bd2becfe82efd55"><script type="text/javascript">window.addEventListener('load', function () {setTimeout(function(){                    apbct_sendAJAX(                        {action: 'apbct_js_keys__get'},                        {callback: apbct_js_keys__set_input_value, input_name: 'ct_checkjs_a97da629b098b75c294dffdc3e463904'}                    );                }, 1000);});</script></form></div></main><aside class="sidebar sidebar-primary widget-area" role="complementary" aria-label="Primary Sidebar" id="genesis-sidebar-primary"><h2 class="genesis-sidebar-title screen-reader-text">Primary Sidebar</h2><section id="search-6" class="widget widget_search"><div class="widget-wrap"><form class="search-form" method="get" action="https://www.makerguides.com/" role="search"><label class="search-form-label screen-reader-text" for="searchform-1">Search this website</label><input class="search-form-input" type="search" name="s" id="searchform-1" placeholder="Search this website"><input class="search-form-submit" type="submit" value="Search"><meta content="https://www.makerguides.com/?s={s}"></form></div></section><section id="media_image-3" class="widget widget_media_image"><div class="widget-wrap"><a href="https://www.pcbway.com/QuickOrderOnline.aspx?from=makerguides.com" target="_blank" rel="noopener noreferrer"><img src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/PCBWay-300x600-1.png" class="image wp-image-4940 aligncenter attachment-300x600 size-300x600 lazyloaded" alt="PCBWay 300x600" style="max-width: 100%; height: auto;" data-pin-nopin="true" sizes="(max-width: 300px) 100vw, 300px" srcset="https://www.makerguides.com/wp-content/uploads/2020/05/PCBWay-300x600-1.png 300w, https://www.makerguides.com/wp-content/uploads/2020/05/PCBWay-300x600-1-150x300.png 150w" data-ll-status="loaded" width="300" height="600"><noscript><img width="300" height="600" src="https://www.makerguides.com/wp-content/uploads/2020/05/PCBWay-300x600-1.png" class="image wp-image-4940 aligncenter attachment-300x600 size-300x600" alt="PCBWay 300x600" style="max-width: 100%; height: auto;" srcset="https://www.makerguides.com/wp-content/uploads/2020/05/PCBWay-300x600-1.png 300w, https://www.makerguides.com/wp-content/uploads/2020/05/PCBWay-300x600-1-150x300.png 150w" sizes="(max-width: 300px) 100vw, 300px" /></noscript></a></div></section><section id="custom_html-15" class="widget_text widget widget_custom_html"><div class="widget_text widget-wrap"><div class="textwidget custom-html-widget"><center><script async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/adsbygoogle.js"></script>  <ins class="adsbygoogle" style="display:block; width:300px; height:600px;" data-ad-client="ca-pub-9246321331815157" data-ad-slot="9938307228" data-adsbygoogle-status="done"><ins id="aswift_12_expand" style="display:inline-table;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent;"><ins id="aswift_12_anchor" style="display:block;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent;"><iframe id="aswift_12" name="aswift_12" style="left:0;position:absolute;top:0;border:0;width:300px;height:600px;" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/ads.html" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!c" data-google-query-id="CMea87yxyOoCFWSEOAodcZIDbA" data-load-complete="true" width="300" height="600" frameborder="0"></iframe></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></center></div></div></section></aside></div></div><div class="footer-widgets" id="genesis-footer-widgets"><h2 class="genesis-sidebar-title screen-reader-text">Footer</h2><div class="wrap"><div class="widget-area footer-widgets-1 footer-widget-area"><section id="featured-post-10" class="widget featured-content featuredpost"><div class="widget-wrap"><article class="post-1374 post type-post status-publish format-standard has-post-thumbnail category-arduino category-tutorials tag-arduino tag-distance tag-gp2y0a21yk0f tag-ir tag-sensor tag-sharp tag-tutorial entry"><a href="https://www.makerguides.com/sharp-gp2y0a21yk0f-ir-distance-sensor-arduino-tutorial/" class="alignnone" aria-hidden="true" tabindex="-1"><img src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20768%20512'%3E%3C/svg%3E" class="entry-image attachment-post" alt="SHARP GP2Y0A21YK0F IR distance sensor" data-lazy-srcset="https://www.makerguides.com/wp-content/uploads/2019/02/SHARP-GP2Y0A21YK0F-768x512.jpg 768w, https://www.makerguides.com/wp-content/uploads/2019/02/SHARP-GP2Y0A21YK0F-300x200.jpg 300w, https://www.makerguides.com/wp-content/uploads/2019/02/SHARP-GP2Y0A21YK0F-1024x683.jpg 1024w, https://www.makerguides.com/wp-content/uploads/2019/02/SHARP-GP2Y0A21YK0F.jpg 1200w" data-lazy-sizes="(max-width: 768px) 100vw, 768px" data-lazy-src="https://www.makerguides.com/wp-content/uploads/2019/02/SHARP-GP2Y0A21YK0F-768x512.jpg" data-pin-nopin="true" width="768" height="512"><noscript><img width="768" height="512" src="https://www.makerguides.com/wp-content/uploads/2019/02/SHARP-GP2Y0A21YK0F-768x512.jpg" class="entry-image attachment-post" alt="SHARP GP2Y0A21YK0F IR distance sensor" srcset="https://www.makerguides.com/wp-content/uploads/2019/02/SHARP-GP2Y0A21YK0F-768x512.jpg 768w, https://www.makerguides.com/wp-content/uploads/2019/02/SHARP-GP2Y0A21YK0F-300x200.jpg 300w, https://www.makerguides.com/wp-content/uploads/2019/02/SHARP-GP2Y0A21YK0F-1024x683.jpg 1024w, https://www.makerguides.com/wp-content/uploads/2019/02/SHARP-GP2Y0A21YK0F.jpg 1200w" sizes="(max-width: 768px) 100vw, 768px" /></noscript></a><header class="entry-header"><h4 class="entry-title"><a href="https://www.makerguides.com/sharp-gp2y0a21yk0f-ir-distance-sensor-arduino-tutorial/">How to use a SHARP GP2Y0A21YK0F IR Distance Sensor with Arduino</a></h4></header></article></div></section></div><div class="widget-area footer-widgets-2 footer-widget-area"><section id="featured-post-11" class="widget featured-content featuredpost"><div class="widget-wrap"><article class="post-4020 post type-post status-publish format-standard has-post-thumbnail category-arduino category-tutorials tag-arduino tag-distance tag-ez4 tag-maxbotix tag-maxsonar tag-mb1240 tag-proximity tag-sensor tag-sonar tag-tutorial tag-ultrasonic entry"><a href="https://www.makerguides.com/maxbotix-mb1240-arduino-tutorial/" class="alignnone" aria-hidden="true" tabindex="-1"><img src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20768%20512'%3E%3C/svg%3E" class="entry-image attachment-post" alt="MB1240 Ultrasonic Distance sensor with Arduino Featured Image" data-lazy-srcset="https://www.makerguides.com/wp-content/uploads/2019/09/IMG_0323-768x512.jpg 768w, https://www.makerguides.com/wp-content/uploads/2019/09/IMG_0323-300x200.jpg 300w, https://www.makerguides.com/wp-content/uploads/2019/09/IMG_0323-1024x683.jpg 1024w, https://www.makerguides.com/wp-content/uploads/2019/09/IMG_0323.jpg 1400w" data-lazy-sizes="(max-width: 768px) 100vw, 768px" data-lazy-src="https://www.makerguides.com/wp-content/uploads/2019/09/IMG_0323-768x512.jpg" data-pin-nopin="true" width="768" height="512"><noscript><img width="768" height="512" src="https://www.makerguides.com/wp-content/uploads/2019/09/IMG_0323-768x512.jpg" class="entry-image attachment-post" alt="MB1240 Ultrasonic Distance sensor with Arduino Featured Image" srcset="https://www.makerguides.com/wp-content/uploads/2019/09/IMG_0323-768x512.jpg 768w, https://www.makerguides.com/wp-content/uploads/2019/09/IMG_0323-300x200.jpg 300w, https://www.makerguides.com/wp-content/uploads/2019/09/IMG_0323-1024x683.jpg 1024w, https://www.makerguides.com/wp-content/uploads/2019/09/IMG_0323.jpg 1400w" sizes="(max-width: 768px) 100vw, 768px" /></noscript></a><header class="entry-header"><h4 class="entry-title"><a href="https://www.makerguides.com/maxbotix-mb1240-arduino-tutorial/">MaxBotix MB1240 ultrasonic distance sensor Arduino tutorial</a></h4></header></article></div></section></div><div class="widget-area footer-widgets-3 footer-widget-area"><section id="featured-post-12" class="widget featured-content featuredpost"><div class="widget-wrap"><article class="post-1356 post type-post status-publish format-standard has-post-thumbnail category-arduino category-tutorials tag-arduino tag-distance tag-jsn-sr04t tag-sensor tag-tutorial tag-ultrasonic tag-waterproof entry"><a href="https://www.makerguides.com/jsn-sr04t-arduino-tutorial/" class="alignnone" aria-hidden="true" tabindex="-1"><img src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20768%20512'%3E%3C/svg%3E" class="entry-image attachment-post" alt="JSN-SR04T" data-lazy-srcset="https://www.makerguides.com/wp-content/uploads/2019/02/JSN-SR04T-768x512.jpg 768w, https://www.makerguides.com/wp-content/uploads/2019/02/JSN-SR04T-300x200.jpg 300w, https://www.makerguides.com/wp-content/uploads/2019/02/JSN-SR04T-1024x683.jpg 1024w, https://www.makerguides.com/wp-content/uploads/2019/02/JSN-SR04T.jpg 1200w" data-lazy-sizes="(max-width: 768px) 100vw, 768px" data-lazy-src="https://www.makerguides.com/wp-content/uploads/2019/02/JSN-SR04T-768x512.jpg" data-pin-nopin="true" width="768" height="512"><noscript><img width="768" height="512" src="https://www.makerguides.com/wp-content/uploads/2019/02/JSN-SR04T-768x512.jpg" class="entry-image attachment-post" alt="JSN-SR04T" srcset="https://www.makerguides.com/wp-content/uploads/2019/02/JSN-SR04T-768x512.jpg 768w, https://www.makerguides.com/wp-content/uploads/2019/02/JSN-SR04T-300x200.jpg 300w, https://www.makerguides.com/wp-content/uploads/2019/02/JSN-SR04T-1024x683.jpg 1024w, https://www.makerguides.com/wp-content/uploads/2019/02/JSN-SR04T.jpg 1200w" sizes="(max-width: 768px) 100vw, 768px" /></noscript></a><header class="entry-header"><h4 class="entry-title"><a href="https://www.makerguides.com/jsn-sr04t-arduino-tutorial/">Waterproof JSN-SR04T Ultrasonic Distance Sensor with Arduino Tutorial</a></h4></header></article></div></section></div></div></div><footer class="site-footer"><div class="wrap"><p>©&nbsp;2020 Makerguides.com - All Rights Reserved</p><nav class="nav-secondary" aria-label="Secondary"><div class="wrap"><ul id="menu-footer-menu" class="menu genesis-nav-menu menu-secondary js-superfish sf-js-enabled sf-arrows" style="touch-action: pan-y;"><li id="menu-item-3429" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3429"><a href="https://www.makerguides.com/affiliate-disclaimer/"><span>Affiliate Disclaimer</span></a></li><li id="menu-item-3430" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3430"><a href="https://www.makerguides.com/privacy-policy/"><span>Privacy Policy</span></a></li><li id="menu-item-3431" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3431"><a href="https://www.makerguides.com/contact/"><span>Contact</span></a></li><li id="menu-item-3432" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3432"><a href="https://www.makerguides.com/terms-and-conditions/"><span>Terms and Conditions</span></a></li></ul></div></nav></div></footer></div><ins class="adsbygoogle adsbygoogle-noablate" style="display: none !important;" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;"><ins id="aswift_0_anchor" style="display:block;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;"><iframe id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;border:0;width:undefinedpx;height:undefinedpx;" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/ads_003.html" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!0" data-load-complete="true" frameborder="0"></iframe></ins></ins></ins><div id="mv-grow-data" data-settings="{&quot;general&quot;:{&quot;contentSelector&quot;:false},&quot;shareCounts&quot;:{&quot;pinterest&quot;:15},&quot;shouldRun&quot;:true,&quot;utmParams&quot;:[],&quot;pinterest&quot;:{&quot;pinDescriptionSource&quot;:&quot;image_alt_tag&quot;,&quot;pinDescription&quot;:null,&quot;pinTitle&quot;:null,&quot;pinImageURL&quot;:null,&quot;pinnableImages&quot;:&quot;post_images&quot;,&quot;postImageHidden&quot;:null,&quot;postImageHiddenMultiple&quot;:null,&quot;lazyLoadCompatibility&quot;:null,&quot;buttonPosition&quot;:&quot;top-left&quot;,&quot;buttonShape&quot;:&quot;rounded&quot;,&quot;showButtonLabel&quot;:&quot;yes&quot;,&quot;buttonLabelText&quot;:&quot;Save&quot;,&quot;buttonShareBehavior&quot;:&quot;all_images&quot;,&quot;hoverButtonShareBehavior&quot;:&quot;hover_image&quot;,&quot;minimumImageWidth&quot;:&quot;300&quot;,&quot;minimumImageHeight&quot;:&quot;&quot;,&quot;showImageOverlay&quot;:null,&quot;postTypeDisplay&quot;:[&quot;post&quot;],&quot;imagePinIt&quot;:&quot;1&quot;,&quot;hasContent&quot;:&quot;1&quot;,&quot;shareURL&quot;:&quot;https:\/\/www.makerguides.com\/a4988-stepper-motor-driver-arduino-tutorial\/&quot;,&quot;bypassClasses&quot;:[&quot;mv-grow-bypass&quot;],&quot;ignoreSelectors&quot;:[]},&quot;buttonSVG&quot;:{&quot;facebook&quot;:{&quot;path&quot;:&quot;M17.12 0.224v4.704h-2.784q-1.536 0-2.080 0.64t-0.544 1.92v3.392h5.248l-0.704 5.28h-4.544v13.568h-5.472v-13.568h-4.544v-5.28h4.544v-3.904q0-3.328 1.856-5.152t4.96-1.824q2.624 0 4.064 0.224z&quot;,&quot;width&quot;:18,&quot;height&quot;:32},&quot;twitter&quot;:{&quot;path&quot;:&quot;M28.928 7.296q-1.184 1.728-2.88 2.976 0 0.256 0 0.736 0 2.336-0.672 4.64t-2.048 4.448-3.296 3.744-4.608 2.624-5.792 0.96q-4.832 0-8.832-2.592 0.608 0.064 1.376 0.064 4.032 0 7.168-2.464-1.888-0.032-3.36-1.152t-2.048-2.848q0.608 0.096 1.088 0.096 0.768 0 1.536-0.192-2.016-0.416-3.328-1.984t-1.312-3.68v-0.064q1.216 0.672 2.624 0.736-1.184-0.8-1.888-2.048t-0.704-2.752q0-1.568 0.8-2.912 2.176 2.656 5.248 4.256t6.656 1.76q-0.16-0.672-0.16-1.312 0-2.4 1.696-4.064t4.064-1.696q2.528 0 4.224 1.824 1.952-0.384 3.68-1.408-0.672 2.048-2.56 3.2 1.664-0.192 3.328-0.896z&quot;,&quot;width&quot;:30,&quot;height&quot;:32},&quot;pinterest&quot;:{&quot;path&quot;:&quot;M0 10.656q0-1.92 0.672-3.616t1.856-2.976 2.72-2.208 3.296-1.408 3.616-0.448q2.816 0 5.248 1.184t3.936 3.456 1.504 5.12q0 1.728-0.32 3.36t-1.088 3.168-1.792 2.656-2.56 1.856-3.392 0.672q-1.216 0-2.4-0.576t-1.728-1.568q-0.16 0.704-0.48 2.016t-0.448 1.696-0.352 1.28-0.48 1.248-0.544 1.12-0.832 1.408-1.12 1.536l-0.224 0.096-0.16-0.192q-0.288-2.816-0.288-3.36 0-1.632 0.384-3.68t1.184-5.152 0.928-3.616q-0.576-1.152-0.576-3.008 0-1.504 0.928-2.784t2.368-1.312q1.088 0 1.696 0.736t0.608 1.824q0 1.184-0.768 3.392t-0.8 3.36q0 1.12 0.8 1.856t1.952 0.736q0.992 0 1.824-0.448t1.408-1.216 0.992-1.696 0.672-1.952 0.352-1.984 0.128-1.792q0-3.072-1.952-4.8t-5.12-1.728q-3.552 0-5.952 2.304t-2.4 5.856q0 0.8 0.224 1.536t0.48 1.152 0.48 0.832 0.224 0.544q0 0.48-0.256 1.28t-0.672 0.8q-0.032 0-0.288-0.032-0.928-0.288-1.632-0.992t-1.088-1.696-0.576-1.92-0.192-1.92z&quot;,&quot;width&quot;:23,&quot;height&quot;:32},&quot;linkedin&quot;:{&quot;path&quot;:&quot;M6.24 11.168v17.696h-5.888v-17.696h5.888zM6.624 5.696q0 1.312-0.928 2.176t-2.4 0.864h-0.032q-1.472 0-2.368-0.864t-0.896-2.176 0.928-2.176 2.4-0.864 2.368 0.864 0.928 2.176zM27.424 18.72v10.144h-5.856v-9.472q0-1.888-0.736-2.944t-2.272-1.056q-1.12 0-1.856 0.608t-1.152 1.536q-0.192 0.544-0.192 1.44v9.888h-5.888q0.032-7.136 0.032-11.552t0-5.28l-0.032-0.864h5.888v2.56h-0.032q0.352-0.576 0.736-0.992t0.992-0.928 1.568-0.768 2.048-0.288q3.040 0 4.896 2.016t1.856 5.952z&quot;,&quot;width&quot;:27,&quot;height&quot;:32},&quot;whatsapp&quot;:{&quot;path&quot;:&quot;M17.6 17.376q0.224 0 1.728 0.8t1.6 0.96q0.032 0.064 0.032 0.256 0 0.576-0.288 1.344-0.288 0.704-1.28 1.184t-1.824 0.48q-1.024 0-3.392-1.12-1.76-0.8-3.040-2.112t-2.624-3.296q-1.312-1.92-1.28-3.456v-0.16q0.064-1.6 1.312-2.816 0.448-0.384 0.928-0.384 0.128 0 0.32 0.032t0.352 0.032q0.352 0 0.48 0.096t0.256 0.512q0.16 0.352 0.608 1.568t0.448 1.312q0 0.384-0.608 1.056t-0.64 0.832q0 0.096 0.096 0.256 0.608 1.312 1.824 2.432 0.992 0.96 2.688 1.824 0.224 0.128 0.416 0.128 0.256 0 0.96-0.864t0.928-0.896zM13.952 26.848q2.272 0 4.352-0.896t3.584-2.368 2.4-3.584 0.896-4.352-0.896-4.352-2.4-3.584-3.584-2.4-4.352-0.896-4.32 0.896-3.584 2.4-2.4 3.584-0.896 4.352q0 3.616 2.144 6.56l-1.408 4.16 4.32-1.376q2.816 1.856 6.144 1.856zM13.952 2.176q2.752 0 5.248 1.088t4.288 2.848 2.88 4.32 1.056 5.216-1.056 5.216-2.88 4.288-4.288 2.88-5.248 1.088q-3.456 0-6.496-1.696l-7.456 2.4 2.432-7.232q-1.92-3.168-1.92-6.944 0-2.752 1.056-5.216t2.88-4.32 4.288-2.848 5.216-1.088z&quot;,&quot;width&quot;:27,&quot;height&quot;:32}}}"></div> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WWJT5ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="dpsp-floating-sidebar" class="dpsp-position-left dpsp-shape-rounded dpsp-size-small dpsp-hide-on-mobile dpsp-button-style-1 dpsp-no-animation opened" data-trigger-scroll="false"><ul class="dpsp-networks-btns-wrapper dpsp-networks-btns-sidebar dpsp-networks-btns-share "><li><button rel="nofollow noopener noreferrer" data-href="#" class="dpsp-network-btn dpsp-pinterest dpsp-no-label dpsp-first" target="_blank" title="Save to Pinterest"><span class="dpsp-network-icon"><span class="dpsp-network-icon-before"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="23" height="32" viewBox="0 0 23 32"><path d="M0 10.656q0-1.92 0.672-3.616t1.856-2.976 2.72-2.208 3.296-1.408 3.616-0.448q2.816 0 5.248 1.184t3.936 3.456 1.504 5.12q0 1.728-0.32 3.36t-1.088 3.168-1.792 2.656-2.56 1.856-3.392 0.672q-1.216 0-2.4-0.576t-1.728-1.568q-0.16 0.704-0.48 2.016t-0.448 1.696-0.352 1.28-0.48 1.248-0.544 1.12-0.832 1.408-1.12 1.536l-0.224 0.096-0.16-0.192q-0.288-2.816-0.288-3.36 0-1.632 0.384-3.68t1.184-5.152 0.928-3.616q-0.576-1.152-0.576-3.008 0-1.504 0.928-2.784t2.368-1.312q1.088 0 1.696 0.736t0.608 1.824q0 1.184-0.768 3.392t-0.8 3.36q0 1.12 0.8 1.856t1.952 0.736q0.992 0 1.824-0.448t1.408-1.216 0.992-1.696 0.672-1.952 0.352-1.984 0.128-1.792q0-3.072-1.952-4.8t-5.12-1.728q-3.552 0-5.952 2.304t-2.4 5.856q0 0.8 0.224 1.536t0.48 1.152 0.48 0.832 0.224 0.544q0 0.48-0.256 1.28t-0.672 0.8q-0.032 0-0.288-0.032-0.928-0.288-1.632-0.992t-1.088-1.696-0.576-1.92-0.192-1.92z"></path></svg></span><span class="dpsp-network-icon-after"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="23" height="32" viewBox="0 0 23 32"><path d="M0 10.656q0-1.92 0.672-3.616t1.856-2.976 2.72-2.208 3.296-1.408 3.616-0.448q2.816 0 5.248 1.184t3.936 3.456 1.504 5.12q0 1.728-0.32 3.36t-1.088 3.168-1.792 2.656-2.56 1.856-3.392 0.672q-1.216 0-2.4-0.576t-1.728-1.568q-0.16 0.704-0.48 2.016t-0.448 1.696-0.352 1.28-0.48 1.248-0.544 1.12-0.832 1.408-1.12 1.536l-0.224 0.096-0.16-0.192q-0.288-2.816-0.288-3.36 0-1.632 0.384-3.68t1.184-5.152 0.928-3.616q-0.576-1.152-0.576-3.008 0-1.504 0.928-2.784t2.368-1.312q1.088 0 1.696 0.736t0.608 1.824q0 1.184-0.768 3.392t-0.8 3.36q0 1.12 0.8 1.856t1.952 0.736q0.992 0 1.824-0.448t1.408-1.216 0.992-1.696 0.672-1.952 0.352-1.984 0.128-1.792q0-3.072-1.952-4.8t-5.12-1.728q-3.552 0-5.952 2.304t-2.4 5.856q0 0.8 0.224 1.536t0.48 1.152 0.48 0.832 0.224 0.544q0 0.48-0.256 1.28t-0.672 0.8q-0.032 0-0.288-0.032-0.928-0.288-1.632-0.992t-1.088-1.696-0.576-1.92-0.192-1.92z"></path></svg></span></span><span class="dpsp-network-label-wrapper"></span></button></li><li><a rel="nofollow noopener noreferrer" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.makerguides.com%2Fa4988-stepper-motor-driver-arduino-tutorial%2F&amp;t=How%20to%20control%20a%20stepper%20motor%20with%20A4988%20driver%20and%20Arduino" class="dpsp-network-btn dpsp-facebook dpsp-no-label" target="_blank" title="Share on Facebook"><span class="dpsp-network-icon"><span class="dpsp-network-icon-before"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="18" height="32" viewBox="0 0 18 32"><path d="M17.12 0.224v4.704h-2.784q-1.536 0-2.080 0.64t-0.544 1.92v3.392h5.248l-0.704 5.28h-4.544v13.568h-5.472v-13.568h-4.544v-5.28h4.544v-3.904q0-3.328 1.856-5.152t4.96-1.824q2.624 0 4.064 0.224z"></path></svg></span><span class="dpsp-network-icon-after"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="18" height="32" viewBox="0 0 18 32"><path d="M17.12 0.224v4.704h-2.784q-1.536 0-2.080 0.64t-0.544 1.92v3.392h5.248l-0.704 5.28h-4.544v13.568h-5.472v-13.568h-4.544v-5.28h4.544v-3.904q0-3.328 1.856-5.152t4.96-1.824q2.624 0 4.064 0.224z"></path></svg></span></span><span class="dpsp-network-label-wrapper"></span></a></li><li><a rel="nofollow noopener noreferrer" href="https://twitter.com/intent/tweet?text=How%20to%20control%20a%20stepper%20motor%20with%20A4988%20driver%20and%20Arduino&amp;url=https%3A%2F%2Fwww.makerguides.com%2Fa4988-stepper-motor-driver-arduino-tutorial%2F" class="dpsp-network-btn dpsp-twitter dpsp-no-label" target="_blank" title="Share on Twitter"><span class="dpsp-network-icon"><span class="dpsp-network-icon-before"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="30" height="32" viewBox="0 0 30 32"><path d="M28.928 7.296q-1.184 1.728-2.88 2.976 0 0.256 0 0.736 0 2.336-0.672 4.64t-2.048 4.448-3.296 3.744-4.608 2.624-5.792 0.96q-4.832 0-8.832-2.592 0.608 0.064 1.376 0.064 4.032 0 7.168-2.464-1.888-0.032-3.36-1.152t-2.048-2.848q0.608 0.096 1.088 0.096 0.768 0 1.536-0.192-2.016-0.416-3.328-1.984t-1.312-3.68v-0.064q1.216 0.672 2.624 0.736-1.184-0.8-1.888-2.048t-0.704-2.752q0-1.568 0.8-2.912 2.176 2.656 5.248 4.256t6.656 1.76q-0.16-0.672-0.16-1.312 0-2.4 1.696-4.064t4.064-1.696q2.528 0 4.224 1.824 1.952-0.384 3.68-1.408-0.672 2.048-2.56 3.2 1.664-0.192 3.328-0.896z"></path></svg></span><span class="dpsp-network-icon-after"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="30" height="32" viewBox="0 0 30 32"><path d="M28.928 7.296q-1.184 1.728-2.88 2.976 0 0.256 0 0.736 0 2.336-0.672 4.64t-2.048 4.448-3.296 3.744-4.608 2.624-5.792 0.96q-4.832 0-8.832-2.592 0.608 0.064 1.376 0.064 4.032 0 7.168-2.464-1.888-0.032-3.36-1.152t-2.048-2.848q0.608 0.096 1.088 0.096 0.768 0 1.536-0.192-2.016-0.416-3.328-1.984t-1.312-3.68v-0.064q1.216 0.672 2.624 0.736-1.184-0.8-1.888-2.048t-0.704-2.752q0-1.568 0.8-2.912 2.176 2.656 5.248 4.256t6.656 1.76q-0.16-0.672-0.16-1.312 0-2.4 1.696-4.064t4.064-1.696q2.528 0 4.224 1.824 1.952-0.384 3.68-1.408-0.672 2.048-2.56 3.2 1.664-0.192 3.328-0.896z"></path></svg></span></span><span class="dpsp-network-label-wrapper"></span></a></li><li><a rel="nofollow noopener noreferrer" href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fwww.makerguides.com%2Fa4988-stepper-motor-driver-arduino-tutorial%2F&amp;title=How%20to%20control%20a%20stepper%20motor%20with%20A4988%20driver%20and%20Arduino&amp;summary=This%20article%20includes%20everything%20you%20need%20to%20know%20about%20controlling%20a%20stepper%20motor%20with%20the%20A4988%20stepper%20motor%20driver%20and%20Arduino.%20I%20have%20included%20a%20wiring%20diagram%2C%20a%20tutorial%20on%20how%20to%20set%20the%20current%20limit%20and%20many%20example%20codes.&amp;mini=true" class="dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last" target="_blank" title="Share on LinkedIn"><span class="dpsp-network-icon"><span class="dpsp-network-icon-before"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="27" height="32" viewBox="0 0 27 32"><path d="M6.24 11.168v17.696h-5.888v-17.696h5.888zM6.624 5.696q0 1.312-0.928 2.176t-2.4 0.864h-0.032q-1.472 0-2.368-0.864t-0.896-2.176 0.928-2.176 2.4-0.864 2.368 0.864 0.928 2.176zM27.424 18.72v10.144h-5.856v-9.472q0-1.888-0.736-2.944t-2.272-1.056q-1.12 0-1.856 0.608t-1.152 1.536q-0.192 0.544-0.192 1.44v9.888h-5.888q0.032-7.136 0.032-11.552t0-5.28l-0.032-0.864h5.888v2.56h-0.032q0.352-0.576 0.736-0.992t0.992-0.928 1.568-0.768 2.048-0.288q3.040 0 4.896 2.016t1.856 5.952z"></path></svg></span><span class="dpsp-network-icon-after"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="27" height="32" viewBox="0 0 27 32"><path d="M6.24 11.168v17.696h-5.888v-17.696h5.888zM6.624 5.696q0 1.312-0.928 2.176t-2.4 0.864h-0.032q-1.472 0-2.368-0.864t-0.896-2.176 0.928-2.176 2.4-0.864 2.368 0.864 0.928 2.176zM27.424 18.72v10.144h-5.856v-9.472q0-1.888-0.736-2.944t-2.272-1.056q-1.12 0-1.856 0.608t-1.152 1.536q-0.192 0.544-0.192 1.44v9.888h-5.888q0.032-7.136 0.032-11.552t0-5.28l-0.032-0.864h5.888v2.56h-0.032q0.352-0.576 0.736-0.992t0.992-0.928 1.568-0.768 2.048-0.288q3.040 0 4.896 2.016t1.856 5.952z"></path></svg></span></span><span class="dpsp-network-label-wrapper"></span></a></li></ul><div class="dpsp-total-share-wrapper"><span class="dpsp-icon-total-share"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="26" height="32" viewBox="0 0 26 32"><path d="M20.8 20.8q1.984 0 3.392 1.376t1.408 3.424q0 1.984-1.408 3.392t-3.392 1.408-3.392-1.408-1.408-3.392q0-0.192 0.032-0.448t0.032-0.384l-8.32-4.992q-1.344 1.024-2.944 1.024-1.984 0-3.392-1.408t-1.408-3.392 1.408-3.392 3.392-1.408q1.728 0 2.944 0.96l8.32-4.992q0-0.128-0.032-0.384t-0.032-0.384q0-1.984 1.408-3.392t3.392-1.408 3.392 1.376 1.408 3.424q0 1.984-1.408 3.392t-3.392 1.408q-1.664 0-2.88-1.024l-8.384 4.992q0.064 0.256 0.064 0.832 0 0.512-0.064 0.768l8.384 4.992q1.152-0.96 2.88-0.96z"></path></svg></span><span class="dpsp-total-share-count">15</span><span>shares</span></div></div><script type="text/javascript">var dpsp_pin_button_data = {"pin_description_source":"image_alt_tag","pinterest_pinnable_images":"post_images","pinterest_button_share_behavior":"all_images","button_position":"top_left","button_shape":"rounded","minimum_image_width":"300","minimum_image_height":"","show_button_text_label":"yes","button_text_label":"Save","button_share_behavior":"hover_image","post_type_display":["post"]}</script> <script type="text/javascript" async="" data-noptimize="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/front-end-pro-jquery.js"></script> <script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/comment-reply.js"></script> <script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/hoverIntent.js"></script> <script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/superfish_002.js"></script> <script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/superfish.js"></script> <script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/skip-links.js"></script> <script type="text/javascript">/* <![CDATA[ */ var genesis_responsive_menu = {"mainMenu":"Menu","menuIconClass":"dashicons-before dashicons-menu","subMenu":"Submenu","subMenuIconClass":"dashicons-before dashicons-arrow-down-alt2","menuClasses":{"combine":[".nav-primary"],"others":[]}}; /* ]]> */</script> <script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/responsive-menus.js"></script> <script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/genesis-sample.js"></script> <script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/enlighterjs.js"></script> <script type="text/javascript">!function(n,o){"undefined"!=typeof EnlighterJS?(n.EnlighterJSINIT=function(){EnlighterJS.init("pre.EnlighterJSRAW", "code.EnlighterJSRAW", {"indent":2,"ampersandCleanup":true,"linehover":false,"rawcodeDbclick":true,"textOverflow":"break","linenumbers":true,"theme":"enlighter","language":"cpp","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""})})():(o&&(o.error||o.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}(window,console);</script> <script type="text/javascript" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/wp-embed.js"></script> <script>window.lazyLoadOptions={elements_selector:"img[data-lazy-src],.rocket-lazyload",data_src:"lazy-src",data_srcset:"lazy-srcset",data_sizes:"lazy-sizes",class_loading:"lazyloading",class_loaded:"lazyloaded",threshold:300,callback_loaded:function(element){if(element.tagName==="IFRAME"&&element.dataset.rocketLazyload=="fitvidscompatible"){if(element.classList.contains("lazyloaded")){if(typeof window.jQuery!="undefined"){if(jQuery.fn.fitVids){jQuery(element).parent().fitVids()}}}}}};window.addEventListener('LazyLoad::Initialized',function(e){var lazyLoadInstance=e.detail.instance;if(window.MutationObserver){var observer=new MutationObserver(function(mutations){var image_count=0;var iframe_count=0;var rocketlazy_count=0;mutations.forEach(function(mutation){for(i=0;i<mutation.addedNodes.length;i++){if(typeof mutation.addedNodes[i].getElementsByTagName!=='function'){return}
if(typeof mutation.addedNodes[i].getElementsByClassName!=='function'){return}
images=mutation.addedNodes[i].getElementsByTagName('img');is_image=mutation.addedNodes[i].tagName=="IMG";iframes=mutation.addedNodes[i].getElementsByTagName('iframe');is_iframe=mutation.addedNodes[i].tagName=="IFRAME";rocket_lazy=mutation.addedNodes[i].getElementsByClassName('rocket-lazyload');image_count+=images.length;iframe_count+=iframes.length;rocketlazy_count+=rocket_lazy.length;if(is_image){image_count+=1}
if(is_iframe){iframe_count+=1}}});if(image_count>0||iframe_count>0||rocketlazy_count>0){lazyLoadInstance.update()}});var b=document.getElementsByTagName("body")[0];var config={childList:!0,subtree:!0};observer.observe(b,config)}},!1)</script><script data-no-minify="1" async="" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/lazyload.js"></script>
<div style="display: none; visibility: hidden;"><script>(function(){var b={"@context":"http://schema.org/","@type":"TechArticle",dependencies:"A4988 stepper motor driver\t× 1\tAmazon AliExpress NEMA 17 stepper motor\t× 1\tAmazon Arduino Uno Rev3\t× 1\tAmazon Power supply (8-35 V)\t× 1\tAmazon AliExpress Breadboard\t× 1\tAmazon Capacitor (100 µF)\t× 1\tAmazon Jumper wires\t~ 10\tAmazon AliExpress USB cable type A\/B\t× 1\tAmazon",proficiencyLevel:"null",articleBody:"Skip to primary navigation Skip to main content Skip to primary sidebar Skip to footer Makerguides.com Home Tutorials Projects How to control a stepper motor with A4988 driver and Arduino Written by Benne de Bakker 26 Comments This article includes everything you need to know about controlling a stepper motor with the A4988 stepper motor driver and Arduino. I have included a wiring diagram, a tutorial on how to set the current limit and many example codes. Although you can use this driver without an Arduino library, I highly recommend you also take a look at the example code for the AccelStepper library at the end of this tutorial. This library is fairly easy to use and can greatly improve the performance of your hardware. After each example, I break down and explain how the code works, so you should have no problems modifying it to suit your needs. If you would like to learn more about other stepper motor drivers, then the articles below might be useful: How to control a stepper motor with DRV8825 driver and Arduino 28BYJ-48 Stepper Motor with ULN2003 Driver and Arduino Tutorial How to control a Stepper Motor with Arduino Motor Shield Rev3 TB6600 Stepper Motor Driver with Arduino Tutorial Supplies Hardware components A4988 stepper motor driver\t× 1\tAmazon AliExpress NEMA 17 stepper motor\t× 1\tAmazon Arduino Uno Rev3\t× 1\tAmazon Power supply (8-35 V)\t× 1\tAmazon AliExpress Breadboard\t× 1\tAmazon Capacitor (100 µF)\t× 1\tAmazon Jumper wires\t~ 10\tAmazon AliExpress USB cable type A\/B\t× 1\tAmazon I like to use this driver in combination with a CNC-shield or expansion board. Such a shield already includes capacitors and offers an easy way to select the microstepping resolution. It makes wiring much easier and is a great option if you need a more permanent solution than a breadboard. Tools Small screwdriver Amazon Multimeter Amazon Alligator test leads (optional) Amazon Software Arduino IDE Makerguides.com is a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for sites to earn advertising fees by advertising and linking to products on Amazon.com. About the driver At the heart of the A4988 driver you will find a chip made by Allegro MicroSystems: the A4988 DMOS Microstepping Driver with Translator and Overcurrent Protection. This integrated motor driver makes interfacing with a microcontroller super easy as you only need two pins to control both the speed and the direction of the stepper motor. The driver has a maximum output capacity of 35 V and ± 2 A which is great for driving small to medium-sized stepper motors like a NEMA 17 bipolar stepper motor. If you need to control larger stepper motors like NEMA 23, take a look at the TB6600 stepper motor driver. This driver can be used with the same code as the A4988 and has a current rating of 3.5 A. TB6600 Stepper Motor Driver with Arduino Tutorial The A4988 driver chip has several safety functions built-in like overcurrent, short circuit, under-voltage lockout, and over-temperature protection. You can find more specifications in the table below. A4988 Specifications Minimum operating voltage\t8 V Maximum operating voltage\t35 V Continuous current per phase\t1 A Maximum current per phase\t2 A Minimum logic voltage\t3 V Maximum logic voltage\t5.5 V Microstep resolution\tfull, 1\/2, 1\/4, 1\/8 and 1\/16 Reverse voltage protection?\tNo Dimensions\t15.5 × 20.5 mm (0.6″ × 0.8″) Cost\tCheck price For more information you can check out the datasheet here. A4988 Datasheet Differences between the A4988 and DRV8825 The DRV8825 is quite similar to the A4988 but there are some key differences: The DRV8825 offers 1\/32 microstepping, whereas the A4988 only goes down to 1\/16-step. Higher microstepping results in smoother, quieter operation but is not always needed. The current limit potentiometer is at a different location The relation between the reference voltage and the current limit is different. The DRV8825 requires a minimum STEP pulse duration of 1.9µs; the A4988 requires 1µs minimum. The DRV8825 can be used with a higher voltage motor power supply (45 V vs 35 V). This means it is less susceptible to damage from LC voltage spikes. The DRV8825 can deliver slightly more current than the A4988 without any additional cooling. Note that the pinout of the DRV8825 is exactly the same as for the A4988, so it can be used as a drop-in replacement! A4899 (left) vs DRV8825 (right) Microstep settings Stepper motors typically have a step size of 1.8° or 200 steps per revolution, this refers to full steps. A microstepping driver such as the A4988 allows higher resolutions by allowing intermediate step locations. This is achieved by energizing the coils with intermediate current levels. For instance, driving a motor in quarter-step mode will give the 200-step-per-revolution motor 800 microsteps per revolution by using four different current levels. A4988 pinout The resolution (step size) selector pins (MS1, MS2, and MS3) allow you to select one of the five step resolutions according to the table below. MS1\tMS2\tMS3\tMicrostep resolution Low\tLow\tLow\tFull step High\tLow\tLow\t1\/2 step Low\tHigh\tLow\t1\/4 step High\tHigh\tLow\t1\/8 step High\tHigh\tHigh\t1\/16 step All three inputs have internal 100 kΩ pull-down resistors, so leaving the three microstep selection pins disconnected results in full-step mode. I often use a CNC-shield or expansion board in combination with these drivers. The expansion board has 3 dip switches to set MS1 – MS3 high or low and on the CNC-shield you can install jumpers. If you are using the driver with a breadboard, you can just use jumper wires to connect the selector pins to 5 V (i.e. make them HIGH). Wiring – Connecting A4988 to Arduino and stepper motor Wiring diagram\/schematic for A4988 stepper motor driver with Arduino and stepper motor. The wiring diagram\/schematic above shows you how to connect the A4899 driver to a stepper motor and the Arduino. The connections are also given in the following table: A4988 Connections A4988\tConnection VMOT\t8-35V GND\tMotor ground SLP\tRESET RST\tSLP VDD\t5V GND\tLogic ground STP\tPin 3 DIR\tPin 2 1A, 1B, 2A, 2B\tStepper motor The motor power supply is connected to GND and VMOT (top right). The two coils of the stepper motor are connected to 1A, 1B and 2A, 2B (see below). The GND pin (lower right) is connected to the ground pin of the microcontroller and VDD is connected to 5V. The STP (step) and DIR (direction) pin are connected to digital pin 3 and 2 respectively. You can choose a different digital pin if you want, but these are the ones I used for this tutorial and the example code. The SLP pin is an active low input. Meaning, pulling this pin low puts the driver in sleep mode, minimizing the power consumption. RST is also an active low input. When pulled low, all STEP inputs are ignored until you pull it high. If you are not using the pin, you can connect it to the adjacent SLP\/SLEEP pin to bring it high and enable the driver. The EN (enable) pin can be left disconnected, it is pulled low by default. When this pin is set high the driver is disabled. In the rest of this tutorial I have left MS1, MS2 and MS3 disconnected, so the driver operates in full-step mode. This makes explaining the code a bit easier. Normally I would use 1\/8 or 1\/16 microstepping and connect the appropriate pins to 5V (see the table in the introduction). Warning The A4988 carrier board uses low-ESR ceramic capacitors, which makes it susceptible to destructive LC voltage spikes, especially when using power leads longer than a few inches. To protect the driver you can connect an electrolytic capacitor between VMOT and GND. Pololu suggests a capacitor of 47 µF or more (I used a 100 µF capacitor). I like these assortment boxes from Amazon, this way I always have some capacitors of the right size on hand. How to determine the correct stepper motor wiring? If you can’t find the datasheet of your stepper motor, it can be difficult to figure out how to wire your motor correctly. I use the following trick to determine how to connect 4 wire bipolar stepper motors: The only thing you need to identify is the two pairs of wires which are connected to the two coils of the motor. The wires from one coil get connected to 1A and 1B and the other to 2A and 2B, the polarity doesn’t matter. To find the two wires from one coil, do the following with the motor disconnected: Try to spin the shaft of the stepper motor by hand and notice how hard it is to turn. Now pick a random pair of wires from the motor and touch the bare ends together. Next, try to spin the shaft of the stepper motor again. If you feel a lot of resistance, you have found a pair of wires from the same coil. If you can spin the shaft freely, try another pair of wires. Now connect the two coils to the pins shown in the wiring diagram above. (If it is still unclear, please leave a comment below, more info can also be found on the RepRap.org wiki) How to set the current limit? Before you start programming your Arduino and start using the driver there is one very important thing you need to do that a lot of people forget: set the current limit! This step is not very complicated but absolutely necessary to protect your stepper motor and the driver. If you do not set an appropriate current limit, your motor can draw more current than it or your driver can handle, this is likely to damage one or both of them. To set the current limit you need to measure a reference voltage and adjust the on-board potentiometer accordingly. You will need a small screwdriver, a multimeter to measure the reference voltage, and alligator test leads (optional but very handy). Current limit wiring diagram for A4988 driver. To measure the reference voltage, the driver needs to be powered. The A4988 only needs power via VDD (5V) and you need to connect RST and SLP together, otherwise the driver won’t turn on. It’s best to disconnect the stepper motor while you do this. If you have already wired up the driver, you can leave everything but the stepper motor connected. You can apply power through the USB port of the Arduino. A4988\tConnection VDD\t5V RST\tSLP SLP\tRESET GND\tGround Required connections to set the current limit Current limit formula The next step is to calculate the current limit with the following formula: Current Limit \x3d Vref ÷ (8 × Rcs) The Rcs is the current sense resistance. If you bought a A4988 driver from Pololu before January 2017, the Rcs will be 0.050 Ω. Drivers sold after that have 0.068 Ω current sense resistors. So this means that for a current limit of 1A for a board with 0.068 Ω current sense resistors, the Vref should be 540 mV. Current sense resistor locations. Picture: www.pololu.com To select the right current limit, take a look at the datasheet of your stepper motor. If you can’t find the current rating of your motor, I recommend starting with a current limit of 1A. You can always increase it later if your motor\/driver is missing steps. Bonus info: When using the driver in full-step mode, the current through each coil is limited to approximately 70% of the set current limit. This means that you would need to set the current limit 40% higher or 1.4 A in full-step mode. When using microstepping, the formula above applies. Note that you need to re-calibrate the current limit if you change the motor power supply voltage. If your motor is making a lot of noise, try to lower the current limit. It’s best to set the current limit just high enough so the motor doesn’t miss steps. Measuring Vref Now you will need to measure the reference voltage (Vref) between the two points marked on the picture below (GND and the potentiometer) and adjust it to the value you calculated. Vref probe points (GND and potentiometer). I recommend using alligator test leads clamped to the screwdriver to set the current limit. This allows you to adjust the potentiometer and measure the reference voltage at the same time. Note: There is another way to measure the current limit and that is to directly measure the current draw of the stepper motor. Personally I find the above method a lot easier. Pololu mentions the following on their website: Note: The coil current can be very different from the power supply current, so you should not use the current measured at the power supply to set the current limit. The appropriate place to put your current meter is in series with one of your stepper motor coils. Pololu Current limit FAQ Do I need to have the stepper motor connected or not? No, you don’t need to connect the stepper motor to the driver when setting the current limit. To be on the safe side, disconnect your motor, it sometimes interferes with measuring the Vref voltage. Do I need to turn the motor by running the Arduino motor sketch? No, see question above. Do I need to turn the potentiometer clock- or counterclockwise to raise Vref? This depends on the manufacturer of the driver. If you have a genuine Polulu breakout board of the DRV8825 or A4988 you turn the potentiometer clockwise to raise Vref and counterclockwise to lower it. Cooling the driver The A4988 driver IC has a maximum current rating of 2 A per coil, but without a heat sink it can only supply about 1 A per coil before it starts to overheat. The driver usually comes with a small adhesive-backed heat sink, which I recommend you to install right away. You can also buy a bunch of small heat sinks from Amazon for really cheap. Basic Arduino example code to control a stepper motor Now that you have wired up the driver and set the current limit, it is time to connect the Arduino to the computer and upload some code. You can upload the following example code to your Arduino using the Arduino IDE. For this specific example, you do not need to install any libraries. This sketch controls both the speed, the number of revolutions, and the spinning direction of the stepper motor. You can copy the code by clicking on the button in the top right corner of the code field. \/*Example sketch to control a stepper motor with A4988 stepper motor driver and Arduino without a library. More info: https:\/\/www.makerguides.com *\/ \/\/ Define stepper motor connections and steps per revolution: #define dirPin 2 #define stepPin 3 #define stepsPerRevolution 200 void setup() { \/\/ Declare pins as output: pinMode(stepPin, OUTPUT); pinMode(dirPin, OUTPUT); } void loop() { \/\/ Set the spinning direction clockwise: digitalWrite(dirPin, HIGH); \/\/ Spin the stepper motor 1 revolution slowly: for (int i \x3d 0; i \x3c stepsPerRevolution; i++) { \/\/ These four lines result in 1 step: digitalWrite(stepPin, HIGH); delayMicroseconds(2000); digitalWrite(stepPin, LOW); delayMicroseconds(2000); } delay(1000); \/\/ Set the spinning direction counterclockwise: digitalWrite(dirPin, LOW); \/\/ Spin the stepper motor 1 revolution quickly: for (int i \x3d 0; i \x3c stepsPerRevolution; i++) { \/\/ These four lines result in 1 step: digitalWrite(stepPin, HIGH); delayMicroseconds(1000); digitalWrite(stepPin, LOW); delayMicroseconds(1000); } delay(1000); \/\/ Set the spinning direction clockwise: digitalWrite(dirPin, HIGH); \/\/ Spin the stepper motor 5 revolutions fast: for (int i \x3d 0; i \x3c 5 * stepsPerRevolution; i++) { \/\/ These four lines result in 1 step: digitalWrite(stepPin, HIGH); delayMicroseconds(500); digitalWrite(stepPin, LOW); delayMicroseconds(500); } delay(1000); \/\/ Set the spinning direction counterclockwise: digitalWrite(dirPin, LOW); \/\/Spin the stepper motor 5 revolutions fast: for (int i \x3d 0; i \x3c 5 * stepsPerRevolution; i++) { \/\/ These four lines result in 1 step: digitalWrite(stepPin, HIGH); delayMicroseconds(500); digitalWrite(stepPin, LOW); delayMicroseconds(500); } delay(1000); } How the code works: The sketch starts with defining the step and direction pins. I connected them to Arduino pin 3 and 2. The statement #define is used to give a name to a constant value. The compiler will replace any references to this constant with the defined value when the program is compiled. So everywhere you mention dirPin, the compiler will replace it with the value 2 when the program is compiled.",articleSection:"null",dateModified:"2020-05-22T12:28:15+00:00",datePublished:"2019-02-11T18:46:14+00:00",author:{"@type":"Person",name:"Benne de Bakker"},mainEntityOfPage:{"@type":"WebPage","@id":"https:\/\/www.makerguides.com\/a4988-stepper-motor-driver-arduino-tutorial\/"},image:{"@type":"imageObject",url:"https:\/\/www.makerguides.com\/wp-content\/uploads\/2019\/02\/A4988-Arduino-stepper-motor-wiring-schematic-diagram-pinout.jpg"},headline:"Stepper Motor with A4988 and Arduino Tutorial (4 Examples)",
description:"In this tutorial you will learn how to control a stepper motor with A4988, AccelStepper and Arduino. Wiring diagram and many example codes included!",publisher:{"@type":"Organization",name:"makerguides.com",logo:{"@type":"ImageObject",url:"https://www.makerguides.com/wp-content/uploads/2019/08/Publisher-logo.png"}},articleBody:"Skip to primary navigation Skip to main content Skip to primary sidebar Skip to footer Makerguides.com Home Tutorials Projects How to control a stepper motor with A4988 driver and Arduino Written by Benne de Bakker 26 Comments This article includes everything you need to know about controlling a stepper motor with the A4988 stepper motor driver and Arduino. I have included a wiring diagram, a tutorial on how to set the current limit and many example codes. Although you can use this driver without an Arduino library, I highly recommend you also take a look at the example code for the AccelStepper library at the end of this tutorial. This library is fairly easy to use and can greatly improve the performance of your hardware. After each example, I break down and explain how the code works, so you should have no problems modifying it to suit your needs. If you would like to learn more about other stepper motor drivers, then the articles below might be useful: How to control a stepper motor with DRV8825 driver and Arduino 28BYJ-48 Stepper Motor with ULN2003 Driver and Arduino Tutorial How to control a Stepper Motor with Arduino Motor Shield Rev3 TB6600 Stepper Motor Driver with Arduino Tutorial Supplies Hardware components A4988 stepper motor driver\t× 1\tAmazon AliExpress NEMA 17 stepper motor\t× 1\tAmazon Arduino Uno Rev3\t× 1\tAmazon Power supply (8-35 V)\t× 1\tAmazon AliExpress Breadboard\t× 1\tAmazon Capacitor (100 µF)\t× 1\tAmazon Jumper wires\t~ 10\tAmazon AliExpress USB cable type A\/B\t× 1\tAmazon I like to use this driver in combination with a CNC-shield or expansion board. Such a shield already includes capacitors and offers an easy way to select the microstepping resolution. It makes wiring much easier and is a great option if you need a more permanent solution than a breadboard. Tools Small screwdriver Amazon Multimeter Amazon Alligator test leads (optional) Amazon Software Arduino IDE Makerguides.com is a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for sites to earn advertising fees by advertising and linking to products on Amazon.com. About the driver At the heart of the A4988 driver you will find a chip made by Allegro MicroSystems: the A4988 DMOS Microstepping Driver with Translator and Overcurrent Protection. This integrated motor driver makes interfacing with a microcontroller super easy as you only need two pins to control both the speed and the direction of the stepper motor. The driver has a maximum output capacity of 35 V and ± 2 A which is great for driving small to medium-sized stepper motors like a NEMA 17 bipolar stepper motor. If you need to control larger stepper motors like NEMA 23, take a look at the TB6600 stepper motor driver. This driver can be used with the same code as the A4988 and has a current rating of 3.5 A. TB6600 Stepper Motor Driver with Arduino Tutorial The A4988 driver chip has several safety functions built-in like overcurrent, short circuit, under-voltage lockout, and over-temperature protection. You can find more specifications in the table below. A4988 Specifications Minimum operating voltage\t8 V Maximum operating voltage\t35 V Continuous current per phase\t1 A Maximum current per phase\t2 A Minimum logic voltage\t3 V Maximum logic voltage\t5.5 V Microstep resolution\tfull, 1\/2, 1\/4, 1\/8 and 1\/16 Reverse voltage protection?\tNo Dimensions\t15.5 × 20.5 mm (0.6″ × 0.8″) Cost\tCheck price For more information you can check out the datasheet here. A4988 Datasheet Differences between the A4988 and DRV8825 The DRV8825 is quite similar to the A4988 but there are some key differences: The DRV8825 offers 1\/32 microstepping, whereas the A4988 only goes down to 1\/16-step. Higher microstepping results in smoother, quieter operation but is not always needed. The current limit potentiometer is at a different location The relation between the reference voltage and the current limit is different. The DRV8825 requires a minimum STEP pulse duration of 1.9µs; the A4988 requires 1µs minimum. The DRV8825 can be used with a higher voltage motor power supply (45 V vs 35 V). This means it is less susceptible to damage from LC voltage spikes. The DRV8825 can deliver slightly more current than the A4988 without any additional cooling. Note that the pinout of the DRV8825 is exactly the same as for the A4988, so it can be used as a drop-in replacement! A4899 (left) vs DRV8825 (right) Microstep settings Stepper motors typically have a step size of 1.8° or 200 steps per revolution, this refers to full steps. A microstepping driver such as the A4988 allows higher resolutions by allowing intermediate step locations. This is achieved by energizing the coils with intermediate current levels. For instance, driving a motor in quarter-step mode will give the 200-step-per-revolution motor 800 microsteps per revolution by using four different current levels. A4988 pinout The resolution (step size) selector pins (MS1, MS2, and MS3) allow you to select one of the five step resolutions according to the table below. MS1\tMS2\tMS3\tMicrostep resolution Low\tLow\tLow\tFull step High\tLow\tLow\t1\/2 step Low\tHigh\tLow\t1\/4 step High\tHigh\tLow\t1\/8 step High\tHigh\tHigh\t1\/16 step All three inputs have internal 100 kΩ pull-down resistors, so leaving the three microstep selection pins disconnected results in full-step mode. I often use a CNC-shield or expansion board in combination with these drivers. The expansion board has 3 dip switches to set MS1 – MS3 high or low and on the CNC-shield you can install jumpers. If you are using the driver with a breadboard, you can just use jumper wires to connect the selector pins to 5 V (i.e. make them HIGH). Wiring – Connecting A4988 to Arduino and stepper motor Wiring diagram\/schematic for A4988 stepper motor driver with Arduino and stepper motor. The wiring diagram\/schematic above shows you how to connect the A4899 driver to a stepper motor and the Arduino. The connections are also given in the following table: A4988 Connections A4988\tConnection VMOT\t8-35V GND\tMotor ground SLP\tRESET RST\tSLP VDD\t5V GND\tLogic ground STP\tPin 3 DIR\tPin 2 1A, 1B, 2A, 2B\tStepper motor The motor power supply is connected to GND and VMOT (top right). The two coils of the stepper motor are connected to 1A, 1B and 2A, 2B (see below). The GND pin (lower right) is connected to the ground pin of the microcontroller and VDD is connected to 5V. The STP (step) and DIR (direction) pin are connected to digital pin 3 and 2 respectively. You can choose a different digital pin if you want, but these are the ones I used for this tutorial and the example code. The SLP pin is an active low input. Meaning, pulling this pin low puts the driver in sleep mode, minimizing the power consumption. RST is also an active low input. When pulled low, all STEP inputs are ignored until you pull it high. If you are not using the pin, you can connect it to the adjacent SLP\/SLEEP pin to bring it high and enable the driver. The EN (enable) pin can be left disconnected, it is pulled low by default. When this pin is set high the driver is disabled. In the rest of this tutorial I have left MS1, MS2 and MS3 disconnected, so the driver operates in full-step mode. This makes explaining the code a bit easier. Normally I would use 1\/8 or 1\/16 microstepping and connect the appropriate pins to 5V (see the table in the introduction). Warning The A4988 carrier board uses low-ESR ceramic capacitors, which makes it susceptible to destructive LC voltage spikes, especially when using power leads longer than a few inches. To protect the driver you can connect an electrolytic capacitor between VMOT and GND. Pololu suggests a capacitor of 47 µF or more (I used a 100 µF capacitor). I like these assortment boxes from Amazon, this way I always have some capacitors of the right size on hand. How to determine the correct stepper motor wiring? If you can’t find the datasheet of your stepper motor, it can be difficult to figure out how to wire your motor correctly. I use the following trick to determine how to connect 4 wire bipolar stepper motors: The only thing you need to identify is the two pairs of wires which are connected to the two coils of the motor. The wires from one coil get connected to 1A and 1B and the other to 2A and 2B, the polarity doesn’t matter. To find the two wires from one coil, do the following with the motor disconnected: Try to spin the shaft of the stepper motor by hand and notice how hard it is to turn. Now pick a random pair of wires from the motor and touch the bare ends together. Next, try to spin the shaft of the stepper motor again. If you feel a lot of resistance, you have found a pair of wires from the same coil. If you can spin the shaft freely, try another pair of wires. Now connect the two coils to the pins shown in the wiring diagram above. (If it is still unclear, please leave a comment below, more info can also be found on the RepRap.org wiki) How to set the current limit? Before you start programming your Arduino and start using the driver there is one very important thing you need to do that a lot of people forget: set the current limit! This step is not very complicated but absolutely necessary to protect your stepper motor and the driver. If you do not set an appropriate current limit, your motor can draw more current than it or your driver can handle, this is likely to damage one or both of them. To set the current limit you need to measure a reference voltage and adjust the on-board potentiometer accordingly. You will need a small screwdriver, a multimeter to measure the reference voltage, and alligator test leads (optional but very handy). Current limit wiring diagram for A4988 driver. To measure the reference voltage, the driver needs to be powered. The A4988 only needs power via VDD (5V) and you need to connect RST and SLP together, otherwise the driver won’t turn on. It’s best to disconnect the stepper motor while you do this. If you have already wired up the driver, you can leave everything but the stepper motor connected. You can apply power through the USB port of the Arduino. A4988\tConnection VDD\t5V RST\tSLP SLP\tRESET GND\tGround Required connections to set the current limit Current limit formula The next step is to calculate the current limit with the following formula: Current Limit \x3d Vref ÷ (8 × Rcs) The Rcs is the current sense resistance. If you bought a A4988 driver from Pololu before January 2017, the Rcs will be 0.050 Ω. Drivers sold after that have 0.068 Ω current sense resistors. So this means that for a current limit of 1A for a board with 0.068 Ω current sense resistors, the Vref should be 540 mV. Current sense resistor locations. Picture: www.pololu.com To select the right current limit, take a look at the datasheet of your stepper motor. If you can’t find the current rating of your motor, I recommend starting with a current limit of 1A. You can always increase it later if your motor\/driver is missing steps. Bonus info: When using the driver in full-step mode, the current through each coil is limited to approximately 70% of the set current limit. This means that you would need to set the current limit 40% higher or 1.4 A in full-step mode. When using microstepping, the formula above applies. Note that you need to re-calibrate the current limit if you change the motor power supply voltage. If your motor is making a lot of noise, try to lower the current limit. It’s best to set the current limit just high enough so the motor doesn’t miss steps. Measuring Vref Now you will need to measure the reference voltage (Vref) between the two points marked on the picture below (GND and the potentiometer) and adjust it to the value you calculated. Vref probe points (GND and potentiometer). I recommend using alligator test leads clamped to the screwdriver to set the current limit. This allows you to adjust the potentiometer and measure the reference voltage at the same time. Note: There is another way to measure the current limit and that is to directly measure the current draw of the stepper motor. Personally I find the above method a lot easier. Pololu mentions the following on their website: Note: The coil current can be very different from the power supply current, so you should not use the current measured at the power supply to set the current limit. The appropriate place to put your current meter is in series with one of your stepper motor coils. Pololu Current limit FAQ Do I need to have the stepper motor connected or not? No, you don’t need to connect the stepper motor to the driver when setting the current limit. To be on the safe side, disconnect your motor, it sometimes interferes with measuring the Vref voltage. Do I need to turn the motor by running the Arduino motor sketch? No, see question above. Do I need to turn the potentiometer clock- or counterclockwise to raise Vref? This depends on the manufacturer of the driver. If you have a genuine Polulu breakout board of the DRV8825 or A4988 you turn the potentiometer clockwise to raise Vref and counterclockwise to lower it. Cooling the driver The A4988 driver IC has a maximum current rating of 2 A per coil, but without a heat sink it can only supply about 1 A per coil before it starts to overheat. The driver usually comes with a small adhesive-backed heat sink, which I recommend you to install right away. You can also buy a bunch of small heat sinks from Amazon for really cheap. Basic Arduino example code to control a stepper motor Now that you have wired up the driver and set the current limit, it is time to connect the Arduino to the computer and upload some code. You can upload the following example code to your Arduino using the Arduino IDE. For this specific example, you do not need to install any libraries. This sketch controls both the speed, the number of revolutions, and the spinning direction of the stepper motor. You can copy the code by clicking on the button in the top right corner of the code field. \/*Example sketch to control a stepper motor with A4988 stepper motor driver and Arduino without a library. More info: https:\/\/www.makerguides.com *\/ \/\/ Define stepper motor connections and steps per revolution: #define dirPin 2 #define stepPin 3 #define stepsPerRevolution 200 void setup() { \/\/ Declare pins as output: pinMode(stepPin, OUTPUT); pinMode(dirPin, OUTPUT); } void loop() { \/\/ Set the spinning direction clockwise: digitalWrite(dirPin, HIGH); \/\/ Spin the stepper motor 1 revolution slowly: for (int i \x3d 0; i \x3c stepsPerRevolution; i++) { \/\/ These four lines result in 1 step: digitalWrite(stepPin, HIGH); delayMicroseconds(2000); digitalWrite(stepPin, LOW); delayMicroseconds(2000); } delay(1000); \/\/ Set the spinning direction counterclockwise: digitalWrite(dirPin, LOW); \/\/ Spin the stepper motor 1 revolution quickly: for (int i \x3d 0; i \x3c stepsPerRevolution; i++) { \/\/ These four lines result in 1 step: digitalWrite(stepPin, HIGH); delayMicroseconds(1000); digitalWrite(stepPin, LOW); delayMicroseconds(1000); } delay(1000); \/\/ Set the spinning direction clockwise: digitalWrite(dirPin, HIGH); \/\/ Spin the stepper motor 5 revolutions fast: for (int i \x3d 0; i \x3c 5 * stepsPerRevolution; i++) { \/\/ These four lines result in 1 step: digitalWrite(stepPin, HIGH); delayMicroseconds(500); digitalWrite(stepPin, LOW); delayMicroseconds(500); } delay(1000); \/\/ Set the spinning direction counterclockwise: digitalWrite(dirPin, LOW); \/\/Spin the stepper motor 5 revolutions fast: for (int i \x3d 0; i \x3c 5 * stepsPerRevolution; i++) { \/\/ These four lines result in 1 step: digitalWrite(stepPin, HIGH); delayMicroseconds(500); digitalWrite(stepPin, LOW); delayMicroseconds(500); } delay(1000); } How the code works: The sketch starts with defining the step and direction pins. I connected them to Arduino pin 3 and 2. The statement #define is used to give a name to a constant value. The compiler will replace any references to this constant with the defined value when the program is compiled. So everywhere you mention dirPin, the compiler will replace it with the value 2 when the program is compiled."},a=document.createElement("script");a.type="application/ld+json";a.innerHTML=JSON.stringify(b);document.getElementsByTagName("head")[0].appendChild(a)})(document);</script>	
</div><iframe id="google_osd_static_frame_7020949489643" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;"></iframe></body><iframe id="google_esf" name="google_esf" src="Stepper%20Motor%20with%20A4988%20and%20Arduino%20Tutorial%20(4%20Examples)_fichiers/zrt_lookup.html" style="display: none;" data-ad-client="ca-pub-9246321331815157"></iframe></html>
<!-- This website is like a Rocket, isn't it? Performance optimized by WP Rocket. Learn more: https://wp-rocket.me - Debug: cached@1594551019 -->